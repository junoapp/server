{"version":3,"sources":["services/user.service.ts","utils/functions.ts","components/ui/Alert.tsx","components/ui/Loading.tsx","components/ui/Card.tsx","components/ui/Badge.tsx","components/UsersList.tsx","contexts/user.context.tsx","pages/Home.tsx","services/dataset.service.ts","services/dashboard.service.ts","components/form/Input.tsx","components/form/Select.tsx","pages/DatasetColumns.tsx","charts/VerticalBarChart.tsx","services/dashboard-recommendation.service.ts","charts/LineChart.tsx","charts/Heatmap.tsx","charts/HorizontalBarChart.tsx","charts/StackedHorizontalBarChart.tsx","charts/MultipleLineChart.tsx","charts/MapChart.tsx","charts/Mapbox.tsx","charts/GroupedHorizontalBarChart.tsx","pages/Dashboard.tsx","hooks/useButtonGroup.tsx","pages/UserAdd.tsx","components/DashboardList.tsx","components/DatasetsList.tsx","pages/UserView.tsx","components/UploadFileForm.tsx","components/Header.tsx","components/form/Checkbox.tsx","pages/Preferences.tsx","App.tsx","index.tsx"],"names":["a","ky","get","json","getById","id","user","post","remove","delete","preferences","applyClass","condition","className","generateId","Math","random","toString","substr","capitalize","value","endsWith","slice","replaceAll","split","map","s","flat","charAt","toUpperCase","join","replace","createColorScale","disability","keys","d3","includes","length","Alert","title","message","role","icon","Loading","loading","spin","size","Card","children","Badge","UsersList","useState","users","setUsers","isLoading","setIsLoading","load","getAll","then","useEffect","onDeleteHandler","name","visLiteracy","formatRelative","Date","updatedDate","createdDate","to","type","onClick","UserContext","createContext","undefined","UserProvider","props","localStorage","getItem","setUser","setDisability","Provider","signIn","setItem","signOut","removeItem","Home","history","useHistory","useContext","uploadDataset","userId","file","formData","FormData","append","body","save","fields","update","put","Input","label","placeholder","disabled","formik","htmlFor","getFieldProps","Select","options","toLowerCase","option","isDisabled","DatasetColumns","action","setLoading","purpose","values","setValues","setName","loadingCount","setLoadingCount","useParams","response","columns","formFields","indexes","forEach","field","index","push","originalName","removed","aggregate","DatasetColumnRole","MEASURE","DatasetSchemaAggregateFunction","Sum","None","originalname","setTimeout","dashboardService","userDatasets","column","goalType","goalPurpose","backToHome","enableReinitialize","initialValues","onSubmit","f","i","datasetId","goal","colums","setFieldValue","item","elementId","svgId","VerticalBarChart","margin","svg","attr","width","node","getBoundingClientRect","groupHover","groupData","groupAxis","data","d","valueMax","xScale","domain","paddingInner","paddingOuter","range","yScale","colorScale","xAxis","yAxis","on","event","x","scale","eachBand","step","floor","max","min","scaleBandInvert","find","selectAll","scaleMargin","bandwidth","enter","call","LineChart","height","extent","lineGenerator","defined","isNaN","y","datum","Heatmap","xAcessor","dayOfWeeks","Array","from","e","format","addDays","startOfWeek","formatWeeek","weeks","Set","padding","filter","getDay","parse","delta","differenceInDays","tickValues","ceil","HorizontalBarChart","top","bottom","left","right","maxTextWidth","text","each","thisWidth","this","getComputedTextLength","StackedHorizontalBarChart","Number","MIN_SAFE_INTEGER","sort","b","name2","localeCompare","reduce","prev","curr","p","total","start","end","reverse","colors","v","MultipleLineChart","valueMaxLeft","Object","k","axis","valueMaxRight","hasRightAxis","some","y2Scale","y2Axis","key","leftLineGenerator","rightLineGenerator","MapChart","geofile","shape","projection","fitExtent","path","style","trim","properties","accessor","MapBox","mapContainer","useRef","current","latMin","MAX_VALUE","latMax","MIN_VALUE","lngMin","lngMax","features","latitude","longitude","geometry","coordinates","mapbox","Map","container","zoom","bounds","addSource","cluster","clusterMaxZoom","clusterRadius","addLayer","source","paint","layout","ref","GroupedHorizontalBarChart","groupedKeys","firstGroup","convert","accessToken","formatter","Intl","NumberFormat","maximumFractionDigits","minimumFractionDigits","Dashboard","dashboard","setDashboard","chartData","setChartData","page","setPage","setD","getSpec","cData","pages","clampStrings","owner","charts","multipleLines","fieldX","specs","spec","userDimension","fieldY","userMeasure","encoding","fieldColor","color","Mean","trimValues","userSecondDimension","mark","geoFile","dashboardPage","chart","dd","VegaLite","useButtonGroup","defaultValue","state","setState","UserAdd","VisLiteracy","colorBlind","ColorBlind","dyslexic","Dyslexic","useFormik","Boolean","handleSubmit","DashboardList","datasets","setDatasets","countColumns","dataset","count","DIMENSION","DatasetsList","UserView","userData","UploadFileForm","onChangeHandler","persist","target","files","console","log","onChange","withRouter","Checkbox","checked","types","chartTypes","typeX","typeY","Preferences","setVisLiteracy","setColorBlind","setDyslexic","stacked","multiline","rightAxis","binValues","savePreferences","findIndex","chartType","_","library","add","fas","App","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3612d565.chunk.js","sourcesContent":["import ky from 'ky';\n\nimport { UserDTO, UserInterface } from '@junoapp/common';\n\nexport async function getAll(): Promise<UserInterface[]> {\n  return ky.get('/api/user').json();\n}\n\nexport async function getById(id: number): Promise<UserInterface> {\n  return ky.get(`/api/user/${id}`).json();\n}\n\nexport async function save(user: UserDTO): Promise<UserInterface> {\n  return ky\n    .post('/api/user', {\n      json: user,\n    })\n    .json();\n}\n\nexport async function remove(id: number): Promise<Response> {\n  return ky.delete(`/api/user/${id}`);\n}\n\nexport async function savePreferences(id: number, preferences: any): Promise<Response> {\n  return ky.post(`/api/user/preferences/${id}`, {\n    json: preferences,\n  });\n}\n","import * as d3 from 'd3';\n\nexport function applyClass(condition: boolean | string | undefined, className?: string) {\n  return className ? (condition ? className : '') : condition ? condition : '';\n}\n\nexport function generateId(): string {\n  return 'juno-' + Math.random().toString(36).substr(2, 9);\n}\n\nexport function generateId2(): string {\n  return 'j' + Math.random().toString(36).substr(2, 9);\n}\n\nexport function scaleBandInvert(scale: d3.ScaleBand<string>) {\n  var domain = scale.domain();\n  var paddingOuter = scale(domain[0]) || 0;\n  var eachBand = scale.step();\n\n  return function (value: number) {\n    var index = Math.floor((value - paddingOuter) / eachBand);\n    return domain[Math.max(0, Math.min(index, domain.length - 1))];\n  };\n}\n\nexport function capitalize(value: string) {\n  if (value.endsWith('.csv')) {\n    value = value.slice(0, -4);\n  }\n\n  value = value.replaceAll('_', ' ');\n\n  return value\n    .split(' ')\n    .map((s) => s.split(/(?=[A-Z])/))\n    .flat()\n    .map((s) => s.charAt(0).toUpperCase() + s.slice(1))\n    .join(' ')\n    .replace(/\\s+/g, ' ');\n}\n\nexport function createColorScale(\n  disability: string,\n  keys: string[]\n): d3.ScaleOrdinal<string, string> {\n  return d3.scaleOrdinal(\n    disability?.includes('colorBlind')\n      ? keys.length > 4\n        ? ['#3575B1']\n        : ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c']\n      : keys.length > 10\n      ? ['#3575B1']\n      : d3.schemeCategory10\n  );\n}\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { applyClass } from '../../utils/functions';\n\nexport function Alert({\n  title,\n  message,\n  className,\n}: {\n  title: string;\n  message: string;\n  className?: string;\n}) {\n  return (\n    <div\n      className={`bg-blue-100 border-blue-500 rounded-b text-blue-900 px-4 py-3 shadow-md w-full h-fit ${applyClass(\n        className\n      )}`}\n      role=\"alert\"\n    >\n      <div className=\"flex\">\n        <div className=\"py-1 h-6 w-6 text-blue-500 mr-4\">\n          <FontAwesomeIcon icon=\"info-circle\" />\n        </div>\n        <div>\n          <p className=\"font-bold\">{title}</p>\n          <p className=\"text-sm\">{message}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function Loading({ loading }: { loading: boolean }): JSX.Element {\n  return loading ? (\n    <div className=\"absolute top-1/2 left-1/2 -mt-4 -ml-4 h-40\">\n      <FontAwesomeIcon icon=\"circle-notch\" spin size=\"2x\" className=\"text-orange-500\" />\n    </div>\n  ) : (\n    <></>\n  );\n}\n","import { applyClass } from '../../utils/functions';\n\nexport function Card({\n  title,\n  className,\n  children,\n}: {\n  title?: string;\n  className?: string;\n  children: React.ReactNode;\n}): JSX.Element {\n  return (\n    <div\n      className={`w-full h-full rounded overflow-hidden shadow bg-white ${applyClass(className)}`}\n    >\n      {title && (\n        <div className=\"px-6 pt-4\">\n          <div className=\"font-bold text-xl mb-2 break-words\">{title}</div>\n        </div>\n      )}\n      <div className=\"px-6 py-4\">{children}</div>\n    </div>\n  );\n}\n","export function Badge({ children }: { children: React.ReactNode }): JSX.Element {\n  return (\n    <span className=\"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2\">\n      {children}\n    </span>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { formatRelative } from 'date-fns';\nimport { Link } from 'react-router-dom';\n\nimport { getAll, remove } from '../services/user.service';\nimport { UserInterface } from '@junoapp/common';\nimport { Alert } from './ui/Alert';\nimport { Loading } from './ui/Loading';\nimport { Card } from './ui/Card';\nimport { Badge } from './ui/Badge';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function UsersList(): JSX.Element {\n  const [users, setUsers] = useState<UserInterface[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const load = () => {\n    setIsLoading(true);\n\n    getAll().then((users) => {\n      setUsers(users);\n      setIsLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  const onDeleteHandler = async (id: number) => {\n    setIsLoading(true);\n    await remove(id);\n    load();\n  };\n\n  return (\n    <div className=\"relative flex flex-wrap -mx-4 min-h\">\n      <Loading loading={isLoading} />\n\n      {!isLoading && users.length === 0 && (\n        <Alert\n          title=\"No user added\"\n          message=\"Add some user to start a new dashboard.\"\n          className=\"mx-4\"\n        />\n      )}\n\n      {!isLoading &&\n        users.length > 0 &&\n        users.map((user: UserInterface) => (\n          <div key={user['id']} className=\"w-1/3 px-4 mb-4\">\n            <Card title={user.name}>\n              <div className=\"flex flex-col items-start\">\n                <Badge>VisLiteracy: {user.visLiteracy}</Badge>\n                {user.disability && <Badge>Disability: {user.disability}</Badge>}\n\n                <span className=\"text-gray-600 text-xs mb-2\">\n                  Updated {formatRelative(new Date(user.updatedDate), new Date())}\n                  <br />\n                  Created {formatRelative(new Date(user.createdDate), new Date())}\n                </span>\n              </div>\n              <div className=\"flex\">\n                <Link\n                  to={`user/view/${user.id}`}\n                  className=\"button button-primary button-small mr-2\"\n                >\n                  <FontAwesomeIcon icon=\"eye\" />\n                  Login\n                </Link>\n                <button\n                  type=\"button\"\n                  className=\"button button-danger button-small\"\n                  onClick={() => onDeleteHandler(user.id)}\n                >\n                  <FontAwesomeIcon icon=\"trash\" />\n                  Delete\n                </button>\n              </div>\n            </Card>\n          </div>\n        ))}\n    </div>\n  );\n}\n","import { createContext, useState } from 'react';\n\nexport interface UserContextData {\n  user: string;\n  disability: string;\n  signIn(user: string, disability: string): void;\n  signOut(): void;\n}\n\nexport const UserContext = createContext<UserContextData | undefined>(undefined);\n\nexport function UserProvider(props: { children: JSX.Element }): JSX.Element {\n  const [user, setUser] = useState<string>(localStorage.getItem('user'));\n  const [disability, setDisability] = useState<string>(localStorage.getItem('disability'));\n\n  function signIn(user: string, disability: string) {\n    localStorage.setItem('user', user);\n    localStorage.setItem('disability', disability);\n\n    setUser(user);\n    setDisability(disability);\n  }\n\n  function signOut() {\n    localStorage.removeItem('user');\n    localStorage.removeItem('disability');\n    setUser(undefined);\n    setDisability(undefined);\n  }\n\n  return (\n    <UserContext.Provider value={{ user, disability, signIn, signOut }}>\n      {props.children}\n    </UserContext.Provider>\n  );\n}\n","import { Link, useHistory } from 'react-router-dom';\n\nimport { UsersList } from '../components/UsersList';\nimport { useContext } from 'react';\nimport { UserContext } from '../contexts/user.context';\n\nexport function Home(): JSX.Element {\n  const history = useHistory();\n  const { user } = useContext(UserContext);\n\n  if (user) {\n    history.replace(`/user/view/${user}`);\n  }\n\n  return (\n    <div>\n      <div className=\"flex\">\n        <Link to={`/user/add`} className=\"button button-primary\">\n          Add new user\n        </Link>\n      </div>\n\n      <div className=\"mt-5\">\n        <UsersList />\n      </div>\n    </div>\n  );\n}\n","import ky from 'ky';\n\nimport { DashboardUpdate, DatasetInterface } from '@junoapp/common';\n\nexport async function getAll(): Promise<DatasetInterface[]> {\n  return ky.get(`http://localhost:3001/api/dataset`).json();\n}\n\nexport async function getById(id: number): Promise<DatasetInterface> {\n  return ky.get(`http://localhost:3001/api/dataset/${id}`).json();\n}\n\nexport async function getSpec(datasetId: number): Promise<any[]> {\n  return ky.get(`http://localhost:3001/api/dashboard/${datasetId}/spec`).json();\n}\n\nexport async function uploadDataset(userId: string, file: File): Promise<DatasetInterface> {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('user', userId);\n\n  return ky\n    .post('http://localhost:3001/api/dataset/upload', {\n      body: formData,\n    })\n    .json();\n}\n\nexport async function updateColumns(id: number, fields: DashboardUpdate): Promise<Response> {\n  return ky.post(`http://localhost:3001/api/dashboard/${id}`, {\n    json: fields,\n  });\n}\n\nexport async function remove(id: number): Promise<Response> {\n  return ky.delete(`http://localhost:3001/api/dataset/${id}`);\n}\n","import ky from 'ky';\n\nimport {\n  DashboardInsert,\n  DashboardInterface,\n  DashboardUpdate,\n  DatasetInterface,\n} from '@junoapp/common';\n\nexport async function getAll(userId: number): Promise<DashboardInterface[]> {\n  return ky.get(`http://localhost:3001/api/dashboard?user=${userId}`).json();\n}\n\nexport async function getById(id: number): Promise<DashboardInterface> {\n  return ky.get(`http://localhost:3001/api/dashboard/${id}`).json();\n}\n\nexport async function getSpec(datasetId: number): Promise<any[]> {\n  return ky.get(`http://localhost:3001/api/dashboard/${datasetId}/spec`).json();\n}\n\nexport async function uploadDataset(userId: string, file: File): Promise<DatasetInterface> {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('user', userId);\n\n  return ky\n    .post('http://localhost:3001/api/dashboard/upload', {\n      body: formData,\n    })\n    .json();\n}\n\nexport async function save(fields: DashboardInsert): Promise<Response> {\n  return ky.post(`http://localhost:3001/api/dashboard`, {\n    json: fields,\n  });\n}\n\nexport async function update(fields: DashboardUpdate): Promise<Response> {\n  return ky.put(`http://localhost:3001/api/dashboard`, {\n    json: fields,\n  });\n}\n\nexport async function remove(id: number): Promise<Response> {\n  return ky.delete(`http://localhost:3001/api/dashboard/${id}`);\n}\n","import { FieldInputProps } from 'formik';\n\nexport function Input({\n  name,\n  label,\n  type,\n  placeholder,\n  disabled,\n  formik,\n}: {\n  name: string;\n  label: string;\n  type?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  formik: { getFieldProps: (name: string) => FieldInputProps<any> };\n}): JSX.Element {\n  return (\n    <div>\n      <label className=\"label\" htmlFor={name}>\n        {label}\n      </label>\n      <input\n        className=\"input\"\n        id={name}\n        type={type || 'text'}\n        placeholder={placeholder || ''}\n        disabled={disabled}\n        {...formik.getFieldProps(name)}\n      />\n    </div>\n  );\n}\n","import { FieldInputProps } from 'formik';\nimport { DropdownOption } from '../../models/dropdown-option';\n\nexport function Select({\n  name,\n  label,\n  options,\n  formik,\n  disabled,\n}: {\n  name: string;\n  label: string;\n  options: Array<DropdownOption>;\n  formik: { getFieldProps: (name: string) => FieldInputProps<any> };\n  disabled?: boolean;\n}): JSX.Element {\n  return (\n    <div>\n      <label className=\"label\" htmlFor={name}>\n        {label}\n      </label>\n      <div className=\"relative\">\n        <select className=\"select\" id={name} {...formik.getFieldProps(name)} disabled={disabled}>\n          <option value=\"\">Select a {label.toLowerCase()}</option>\n          {options.map((option) => (\n            <option key={option.value} value={option.value} disabled={option.isDisabled || false}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useContext } from 'react';\nimport { Formik, Form } from 'formik';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport { getById } from '../services/dataset.service';\nimport * as dashboardService from '../services/dashboard.service';\nimport { Loading } from '../components/ui/Loading';\nimport { Card } from '../components/ui/Card';\nimport { Input } from '../components/form/Input';\nimport { Select } from '../components/form/Select';\nimport { UploadInfoField } from '../models/upload-info';\nimport { DropdownOption } from '../models/dropdown-option';\nimport { DashboardGoal, DashboardPurpose, DatasetColumnRole } from '@junoapp/common';\nimport { UserContext } from '../contexts/user.context';\nimport { DatasetSchemaAggregateFunction } from '@junoapp/common';\nimport { capitalize } from '../utils/functions';\n\nexport function DatasetColumns({ action }: { action: 'add' | 'edit' }): JSX.Element {\n  const [isLoading, setLoading] = useState(false);\n  const [values, setValues] = useState<{\n    name: string;\n    type: string;\n    purpose: string;\n    fields: Array<UploadInfoField>;\n  }>({ name: '', type: '', purpose: '', fields: [] });\n\n  const [name, setName] = useState<string | undefined>(undefined);\n  const [loadingCount, setLoadingCount] = useState(0);\n\n  const { id } = useParams<{ id: string }>();\n  const history = useHistory();\n  const { user } = useContext(UserContext);\n\n  useEffect(() => {\n    setLoading(true);\n    if (action === 'add') {\n      getById(+id).then((response) => {\n        if (response.columns.length === 0) {\n          setTimeout(() => {\n            setLoadingCount(loadingCount + 1);\n          }, 1000);\n          return;\n        }\n\n        const formFields: UploadInfoField[] = [];\n        const indexes: DropdownOption[] = [];\n\n        response.columns.forEach((field, index) => {\n          formFields.push({\n            id: field.id,\n            originalName: field.name,\n            name: capitalize(field.name),\n            role: field.role,\n            index,\n            removed: false,\n            type: field.type,\n            aggregate:\n              field.role === DatasetColumnRole.MEASURE\n                ? DatasetSchemaAggregateFunction.Sum\n                : DatasetSchemaAggregateFunction.None,\n          });\n\n          indexes.push({\n            label: index.toString(),\n            value: index.toString(),\n            isDisabled: false,\n          });\n        });\n\n        setName(capitalize(response.originalname));\n        setLoading(false);\n        setValues({\n          name: capitalize(response.originalname),\n          type: '',\n          purpose: '',\n          fields: formFields,\n        });\n      });\n    } else {\n      dashboardService.getById(+id).then((response) => {\n        const formFields: UploadInfoField[] = [];\n        const indexes: DropdownOption[] = [];\n\n        response.userDatasets[0].columns.forEach((field, index) => {\n          formFields.push({\n            id: field.id,\n            originalName: field.column.name,\n            name: field.name,\n            role: field.role,\n            index,\n            removed: field.removed,\n            type: field.column.type,\n            aggregate: field.aggregate,\n          });\n\n          indexes.push({\n            label: index.toString(),\n            value: index.toString(),\n            isDisabled: false,\n          });\n        });\n\n        setName(response.name);\n        setLoading(false);\n        setValues({\n          name: response.name,\n          type: response.goalType,\n          purpose: response.goalPurpose,\n          fields: formFields,\n        });\n      });\n    }\n  }, [id, action, loadingCount]);\n\n  const backToHome = () => {\n    history.replace(`/user/view/${user}`);\n  };\n\n  return (\n    <div className=\"relative\">\n      <Card className=\"min-h\" title={name}>\n        <Loading loading={isLoading} />\n\n        {!isLoading && (\n          <div className=\"mt-4\">\n            <Formik\n              enableReinitialize={true}\n              initialValues={values}\n              onSubmit={async (values) => {\n                const fields = values.fields.map((f, i) => ({\n                  ...f,\n                  index: i,\n                  role: f.role as DatasetColumnRole,\n                }));\n\n                setLoading(true);\n                if (action === 'add') {\n                  await dashboardService.save({\n                    datasetId: +id,\n                    name: values.name,\n                    user: +user,\n                    goal: values.type as DashboardGoal,\n                    purpose: values.purpose as DashboardPurpose,\n                    colums: fields,\n                  });\n                } else {\n                  await dashboardService.update({\n                    id: +id,\n                    name: values.name,\n                    user: +user,\n                    goal: values.type as DashboardGoal,\n                    purpose: values.purpose as DashboardPurpose,\n                    colums: fields,\n                  });\n                }\n                backToHome();\n              }}\n            >\n              {({ getFieldProps, values, setFieldValue }) => (\n                <Form>\n                  <div className=\"flex -mx-4 bg-white\">\n                    <div className=\"px-4 w-1/3\">\n                      <Input name={`name`} label={`Name`} formik={{ getFieldProps }} />\n                    </div>\n                    <div className=\"px-4 w-1/3\">\n                      <Select\n                        name={`type`}\n                        label=\"Goal Type\"\n                        options={[\n                          { value: 'DECISION_MAKING', label: 'Decision Making' },\n                          { value: 'AWARENESS', label: 'Awareness' },\n                          { value: 'MOTIVATIONAL_LEARNING', label: 'Motivational Learning' },\n                          { value: 'OTHER', label: 'Other' },\n                        ]}\n                        formik={{ getFieldProps }}\n                      />\n                    </div>\n                    <div className=\"px-4 w-1/3\">\n                      <Select\n                        name={`purpose`}\n                        label=\"Goal Purpose\"\n                        options={[\n                          { value: 'STRATEGIC', label: 'Strategic' },\n                          { value: 'OPERATIONAL', label: 'Operational' },\n                          { value: 'ORGANIZATIONAL', label: 'Organizational' },\n                          { value: 'LEARNING', label: 'Learning' },\n                        ]}\n                        formik={{ getFieldProps }}\n                      />\n                    </div>\n                  </div>\n\n                  <hr className=\"mt-2 mb-4\" />\n\n                  <div>\n                    {values.fields.length > 0 &&\n                      values.fields.map((item, index) => (\n                        <div className=\"flex -mx-4 bg-white\">\n                          {/* <div className=\"px-4 flex items-center\">\n                            <FontAwesomeIcon icon=\"bars\" />\n                          </div> */}\n                          <div className=\"px-4 w-2/5\">\n                            <Input\n                              name={`fields.${index}.name`}\n                              label={`Name`}\n                              formik={{ getFieldProps }}\n                            />\n                          </div>\n                          <div className=\"px-4 w-2/5\">\n                            <Input\n                              name={`fields.${index}.type`}\n                              label={`Type`}\n                              formik={{ getFieldProps }}\n                              disabled\n                            />\n                          </div>\n                          <div className=\"px-4 w-2/5\">\n                            <Select\n                              name={`fields.${index}.role`}\n                              label=\"Type\"\n                              options={[\n                                { value: 'measure', label: 'Measure' },\n                                { value: 'dimension', label: 'Dimension' },\n                              ]}\n                              formik={{ getFieldProps }}\n                            />\n                          </div>\n                          <div className=\"px-4 w-2/5\">\n                            <Select\n                              name={`fields.${index}.aggregate`}\n                              label=\"Aggregate\"\n                              options={[\n                                { value: 'NONE', label: 'None' },\n                                { value: 'MIN', label: 'Min' },\n                                { value: 'MEAN', label: 'Mean' },\n                                { value: 'SUM', label: 'Sum' },\n                                { value: 'BIN', label: 'Bin' },\n                                { value: 'MAX', label: 'Max' },\n                                { value: 'MEDIAN', label: 'Median' },\n                              ]}\n                              formik={{ getFieldProps }}\n                              disabled={\n                                values.fields[index].role === 'dimension' ||\n                                values.fields[index].originalName === 'count'\n                              }\n                            />\n                          </div>\n                          <div className=\"px-4 flex items-center\">\n                            <button\n                              type=\"button\"\n                              className={`button ${\n                                item.removed ? 'button-success' : 'button-danger'\n                              }`}\n                              onClick={() =>\n                                setFieldValue(\n                                  `fields.${index}.removed`,\n                                  !values.fields[index].removed\n                                )\n                              }\n                            >\n                              <FontAwesomeIcon icon={item.removed ? 'plus' : 'times'} />\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                  </div>\n                  <div className=\"flex justify-end\">\n                    <button type=\"button\" className=\"button mr-2\" onClick={backToHome}>\n                      Cancel\n                    </button>\n                    <button type=\"submit\" className=\"button button-primary\">\n                      Submit\n                    </button>\n                  </div>\n                </Form>\n              )}\n            </Formik>\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n}\n","import { useState, useEffect, useContext } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues } from '@junoapp/common';\n\nimport { createColorScale, generateId, scaleBandInvert } from '../utils/functions';\nimport { UserContext } from '../contexts/user.context';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function VerticalBarChart(props: {\n  name: string;\n  data: Array<DatasetChartSpecValues>;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n  const { disability } = useContext(UserContext);\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 40,\n      right: 10,\n    };\n\n    const height = 400;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupHover = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    const xAcessor = (d: DatasetChartSpecValues) => d.name;\n    const yAcessor = (d: DatasetChartSpecValues) => d.value;\n\n    const keys = props.data.map(xAcessor);\n    const valueMax = d3.max(props.data, yAcessor);\n\n    const xScale = d3\n      .scaleBand()\n      .domain(keys)\n      .paddingInner(0.1)\n      .paddingOuter(0.1)\n      .range([margin.left, width - margin.right]);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain([0, valueMax])\n      .range([height - margin.bottom, margin.top]);\n\n    const colorScale = createColorScale(disability, keys);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n\n    svg\n      .on('mousemove', function (event: any) {\n        const [x] = (d3 as any).pointer(event);\n\n        const name = scaleBandInvert(xScale)(x);\n\n        const d = props.data.find((d) => d.name === name);\n\n        groupHover.selectAll('.hover-rect').remove();\n        if (d) {\n          const scaleMargin = xScale.step() * xScale.paddingInner();\n\n          groupHover\n            .append('rect')\n            .attr('class', 'hover-rect')\n            .attr('x', (xScale(d.name) as number) - scaleMargin / 2)\n            .attr('y', yScale(valueMax))\n            .attr('width', xScale.bandwidth() + scaleMargin)\n            .attr('height', yScale(0) - margin.top)\n            .attr('fill', '#ccc');\n        }\n      })\n      .on('mouseleave', () => {\n        groupHover.selectAll('.hover-rect').remove();\n      });\n\n    groupData\n      .selectAll('rect.data-item')\n      .data(props.data)\n      .enter()\n      .append('rect')\n      .attr('class', 'data-item')\n      .attr('x', (d) => xScale(d.name) as number)\n      .attr('y', (d) => yScale(d.value))\n      .attr('width', xScale.bandwidth())\n      .attr('height', (d) => yScale(0) - yScale(d.value))\n      .attr('fill', (d) => colorScale(d.name))\n      .attr('pointer-events', 'none');\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis.append('g').call(yAxis).attr('transform', `translate(${margin.left}, 0)`);\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props, disability]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { DashboardRecommendation } from '@junoapp/common';\nimport ky from 'ky';\n\nexport async function getSpec(datasetId: number): Promise<DashboardRecommendation> {\n  return ky.get(`http://localhost:3001/api/dashboard-recommendation/${datasetId}/spec`).json();\n}\n","import { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues } from '@junoapp/common';\n\nimport { generateId } from '../utils/functions';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function LineChart(props: {\n  name: string;\n  data: Array<DatasetChartSpecValues>;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 80,\n      right: 80,\n    };\n\n    const height = 400;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    const xAcessor = (d: DatasetChartSpecValues) => new Date(d.name);\n    const yAcessor = (d: DatasetChartSpecValues) => d.value;\n\n    const valueMax = d3.max(props.data, yAcessor);\n\n    const extent = d3.extent(props.data, xAcessor);\n\n    const xScale = d3\n      .scaleTime()\n      .domain(extent)\n      .range([margin.left, width - margin.right]);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain([0, valueMax])\n      .range([height - margin.bottom, margin.top]);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n\n    const lineGenerator = d3\n      .line<DatasetChartSpecValues>()\n      .defined((d) => !isNaN(d.value))\n      .x((d) => xScale(new Date(d.name)))\n      .y((d) => yScale(d.value));\n\n    groupData\n      .append('path')\n      .datum(props.data)\n      .attr('d', lineGenerator)\n      .attr('width', width)\n      .attr('height', height)\n      .attr('fill', 'none')\n      .attr('stroke', 'steelblue')\n      .attr('stroke-width', 1.5)\n      .attr('stroke-linejoin', 'round')\n      .attr('stroke-linecap', 'round');\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis.append('g').call(yAxis).attr('transform', `translate(${margin.left}, 0)`);\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues } from '@junoapp/common';\n\nimport { generateId } from '../utils/functions';\nimport { getDay, format, addDays, startOfWeek, parse, differenceInDays } from 'date-fns';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function Heatmap(props: { name: string; data: Array<DatasetChartSpecValues> }): JSX.Element {\n  const [id] = useState<string>(generateId());\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 80,\n      right: 80,\n    };\n\n    const height = 250;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    const xAcessor = (d: DatasetChartSpecValues) => new Date(d.name);\n\n    const max = d3.max(props.data, (d) => d.value);\n\n    const dayOfWeeks = Array.from(Array(7)).map((e, i) =>\n      format(addDays(startOfWeek(new Date()), i), 'E')\n    );\n\n    const formatWeeek = (d: DatasetChartSpecValues) =>\n      format(startOfWeek(xAcessor(d)), 'dd/MM/yyyy');\n\n    const weeks = [...new Set(props.data.map((d) => formatWeeek(d)))];\n\n    const xScale = d3\n      .scaleBand()\n      .domain(weeks)\n      .range([margin.left, width - margin.right])\n      .padding(0.1);\n\n    const yScale = d3\n      .scaleBand()\n      .range([height - margin.bottom, margin.top])\n      .domain(dayOfWeeks)\n      .padding(0.1);\n\n    groupData\n      .selectAll('rect')\n      .data(props.data.filter((d) => !isNaN(d.value)))\n      .enter()\n      .append('rect')\n      .attr('x', (d) => xScale(formatWeeek(d)))\n      .attr('y', (d) => yScale(dayOfWeeks[getDay(xAcessor(d))]))\n      .attr('width', xScale.bandwidth())\n      .attr('height', yScale.bandwidth())\n      .attr('fill', (d) => d3.interpolateBlues(d.value / max));\n\n    const extent = d3.extent(props.data, (d) => parse(d.name, 'yyyy/MM/dd', new Date()));\n    const delta = differenceInDays(extent[1], extent[0]);\n\n    const xAxis = d3\n      .axisBottom(xScale)\n      .tickValues(xScale.domain().filter((d, i) => !(i % Math.ceil(delta * 0.0065))));\n    const yAxis = d3.axisLeft(yScale);\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis.append('g').call(yAxis).attr('transform', `translate(${margin.left}, 0)`);\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { useState, useEffect, useContext } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues } from '@junoapp/common';\n\nimport { createColorScale, generateId } from '../utils/functions';\nimport { UserContext } from '../contexts/user.context';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function HorizontalBarChart(props: {\n  name: string;\n  data: Array<DatasetChartSpecValues>;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n  const { disability } = useContext(UserContext);\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 0,\n      right: 10,\n    };\n\n    const height = 400;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    const xAcessor = (d: DatasetChartSpecValues) => d.name;\n    const yAcessor = (d: DatasetChartSpecValues) => d.value;\n\n    const keys = props.data.map(xAcessor);\n    const valueMax = d3.max(props.data, yAcessor);\n\n    var maxTextWidth = 0;\n\n    svg\n      .append('g')\n      .selectAll('.dummyText')\n      .data(keys)\n      .enter()\n      .append('text')\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', '14px')\n      .text((d) => d)\n      .each(function () {\n        const thisWidth = this.getComputedTextLength() + 10;\n        if (thisWidth > maxTextWidth) {\n          maxTextWidth = thisWidth;\n        }\n\n        this.remove();\n      });\n\n    margin.left = maxTextWidth;\n\n    const xScale = d3\n      .scaleLinear()\n      .domain([0, valueMax])\n      .range([margin.left, width - margin.right]);\n\n    const yScale = d3\n      .scaleBand()\n      .domain(keys)\n      .paddingInner(0.1)\n      .paddingOuter(0.1)\n      .range([margin.top, height - margin.bottom]);\n\n    const colorScale = createColorScale(disability, keys);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n\n    groupData\n      .selectAll('rect.data-item')\n      .data(props.data)\n      .enter()\n      .append('rect')\n      .attr('class', 'data-item')\n      .attr('x', xScale(0))\n      .attr('y', (d) => yScale(d.name))\n      .attr('width', (d) => xScale(d.value) - xScale(0))\n      .attr('height', yScale.bandwidth())\n      .attr('fill', (d) => colorScale(d.name))\n      .attr('pointer-events', 'none');\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis\n      .append('g')\n      .call(yAxis)\n      .attr('transform', `translate(${margin.left}, 0)`)\n      .attr('class', 'y-axis');\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props, disability]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { useState, useEffect, useContext } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues } from '@junoapp/common';\n\nimport { createColorScale, generateId } from '../utils/functions';\nimport { UserContext } from '../contexts/user.context';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function StackedHorizontalBarChart(props: {\n  name: string;\n  data: Array<DatasetChartSpecValues>;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n  const { disability } = useContext(UserContext);\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 100,\n      right: 10,\n    };\n\n    const height = 400;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    type StackedData = {\n      name: string;\n      total: number;\n      values: Array<{\n        name: string;\n        end: number;\n        start: number;\n      }>;\n    };\n\n    let valueMax = Number.MIN_SAFE_INTEGER;\n\n    props.data.sort((a, b) => a.name2.localeCompare(b.name2));\n\n    const data: Array<StackedData> = props.data.reduce(\n      (prev: StackedData[], curr: DatasetChartSpecValues) => {\n        let item = prev.find((p) => p.name === curr.name);\n\n        if (!item) {\n          item = {\n            name: curr.name,\n            total: 0,\n            values: [],\n          };\n\n          prev.push(item);\n        }\n\n        item.values.push({\n          name: curr.name2,\n          start: item.total,\n          end: item.total + curr.value,\n        });\n\n        item.total += curr.value;\n\n        if (item.total >= valueMax) {\n          valueMax = item.total;\n        }\n\n        return prev;\n      },\n      []\n    );\n\n    const keys = data.map((d) => d.name).reverse();\n    const colors = [...new Set(data.map((d) => d.values.map((v) => v.name)).flat())];\n\n    const xScale = d3\n      .scaleLinear()\n      .domain([0, valueMax])\n      .range([margin.left, width - margin.right]);\n\n    const yScale = d3\n      .scaleBand()\n      .domain(keys)\n      .paddingInner(0.1)\n      .paddingOuter(0.1)\n      .range([height - margin.bottom, margin.top]);\n\n    const colorScale = createColorScale(disability, colors);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n\n    groupData\n      .selectAll('g.group-item')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'group-item')\n      .attr('transform', (d) => `translate(0, ${yScale(d.name)})`)\n      .selectAll('rect.data-item')\n      .data((d) => d.values)\n      .enter()\n      .append('rect')\n      .attr('class', 'data-item')\n      .attr('x', (d) => xScale(d.start))\n      .attr('width', (d) => xScale(d.end) - xScale(d.start))\n      .attr('height', yScale.bandwidth())\n      .attr('fill', (d) => colorScale(d.name))\n      .attr('pointer-events', 'none');\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis.append('g').call(yAxis).attr('transform', `translate(${margin.left}, 0)`);\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props, disability]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { useState, useEffect, useContext } from 'react';\nimport * as d3 from 'd3';\nimport {\n  DatasetRecommendationMultipleLinesAxis,\n  DatasetRecommendationMultipleLinesData,\n} from '@junoapp/common';\n\nimport { createColorScale, generateId } from '../utils/functions';\nimport { UserContext } from '../contexts/user.context';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function MultipleLineChart(props: {\n  name: string;\n  data: Array<DatasetRecommendationMultipleLinesData>;\n  axis: DatasetRecommendationMultipleLinesAxis;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n  const { disability } = useContext(UserContext);\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 80,\n      right: 80,\n    };\n\n    const height = 400;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    const xAcessor = (d: DatasetRecommendationMultipleLinesData) => new Date(d.name);\n\n    const valueMaxLeft = d3.max(props.data, (d) =>\n      d3.max(\n        Object.keys(d.values)\n          .filter((k) => props.axis[k] === 'left')\n          .map((k) => d.values[k])\n      )\n    );\n\n    const valueMaxRight = d3.max(props.data, (d) =>\n      d3.max(\n        Object.keys(d.values)\n          .filter((k) => props.axis[k] === 'right')\n          .map((k) => d.values[k])\n      )\n    );\n\n    const hasRightAxis = Object.values(props.axis).some((a) => a === 'right');\n\n    const extent = d3.extent(props.data, xAcessor);\n    const keys = [\n      ...new Set([\n        ...Object.keys(props.data[0].values),\n        ...Object.keys(props.data[1].values),\n        ...Object.keys(props.data[props.data.length - 2].values),\n        ...Object.keys(props.data[props.data.length - 1].values),\n      ]),\n    ].filter((k) => props.axis[k]);\n\n    const colorScale = createColorScale(disability, keys);\n\n    const xScale = d3\n      .scaleTime()\n      .domain(extent)\n      .range([margin.left, width - margin.right]);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain([0, valueMaxLeft])\n      .range([height - margin.bottom, margin.top]);\n\n    const y2Scale = d3\n      .scaleLinear()\n      .domain([0, valueMaxRight])\n      .range([height - margin.bottom, margin.top]);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n    const y2Axis = d3.axisRight(y2Scale);\n\n    for (const key of keys) {\n      const leftLineGenerator = d3\n        .line<DatasetRecommendationMultipleLinesData>()\n        .defined((d) => !isNaN(d.values[key]))\n        .x((d) => xScale(new Date(d.name)))\n        .y((d) => yScale(d.values[key]));\n\n      const rightLineGenerator = d3\n        .line<DatasetRecommendationMultipleLinesData>()\n        .defined((d) => !isNaN(d.values[key]))\n        .x((d) => xScale(new Date(d.name)))\n        .y((d) => y2Scale(d.values[key]));\n\n      groupData\n        .append('path')\n        .datum(props.data)\n        .attr('d', props.axis[key] === 'left' ? leftLineGenerator : rightLineGenerator)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('fill', 'none')\n        .attr('stroke', colorScale(key))\n        .attr('stroke-width', 1.5)\n        .attr('stroke-linejoin', 'round')\n        .attr('stroke-linecap', 'round');\n    }\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis.append('g').call(yAxis).attr('transform', `translate(${margin.left}, 0)`);\n\n    if (hasRightAxis) {\n      groupAxis\n        .append('g')\n        .call(y2Axis)\n        .attr('transform', `translate(${width - margin.right}, 0)`);\n    }\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props, disability]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues, generateId } from '@junoapp/common';\n\nexport function MapChart(props: {\n  name: string;\n  geofile: string;\n  data: Array<DatasetChartSpecValues>;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n\n  useEffect(() => {\n    d3.json(`http://localhost:3001/${props.geofile}`).then((shape) => {\n      const height = 600;\n\n      const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n      const width = svg.node()?.getBoundingClientRect().width;\n\n      const projection = d3.geoMercator().fitExtent(\n        [\n          [20, 20],\n          [width, height],\n        ],\n        shape as any\n      );\n\n      const path = d3.geoPath().projection(projection);\n      const max = d3.max(props.data, (d) => d.value);\n\n      const accessor = (d) => {\n        const item = props.data.find((datum) => datum.name.trim() === d.properties.name);\n\n        if (item) {\n          return d3.interpolateBlues(item.value / max);\n        }\n\n        return 'white';\n      };\n\n      svg\n        .append('g')\n        .selectAll('path')\n        .data(shape['features'])\n        .enter()\n        .append('path')\n        .attr('d', path)\n        .style('fill', (d) => accessor(d))\n        .style('stroke', '#ccc')\n        .attr('alt', (d) => d['properties'].name);\n\n      return () => {\n        svg.remove();\n      };\n    });\n  }, [id, props.data, props.geofile]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n\nexport default MapChart;\n","import { useEffect, useRef } from 'react';\nimport mapbox from 'mapbox-gl';\nimport { DatasetGeoChartSpecValues } from '@junoapp/common';\n\nmapbox.accessToken =\n  'pk.eyJ1IjoicGF1bG9tZW5lemVzIiwiYSI6ImNrMHZrc3Z2NjEwODMzbG52emduZWFkeTIifQ.fUByXk2mj50HO1xPDiTr5w';\n\nexport function MapBox(props: {\n  name: string;\n  data: Array<DatasetGeoChartSpecValues>;\n}): JSX.Element {\n  const mapContainer = useRef(null);\n  const map = useRef<mapbox.Map>(null);\n\n  useEffect(() => {\n    if (map.current) return;\n\n    let latMin = Number.MAX_VALUE;\n    let latMax = Number.MIN_VALUE;\n\n    let lngMin = Number.MAX_VALUE;\n    let lngMax = Number.MIN_VALUE;\n\n    const data = props.data.filter((d) => d.value > 0);\n\n    const features = data.map((d) => {\n      latMin = Math.min(latMin, +d.latitude);\n      latMax = Math.max(latMax, +d.latitude);\n\n      lngMin = Math.min(lngMin, +d.longitude);\n      lngMax = Math.max(lngMax, +d.longitude);\n\n      return {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [d.longitude, d.latitude],\n        },\n        properties: {\n          title: d.name,\n        },\n      };\n    });\n\n    map.current = new mapbox.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/streets-v11',\n      zoom: 9,\n      bounds: [\n        [latMin, latMax],\n        [lngMin, lngMax],\n      ],\n    });\n\n    map.current.on('load', () => {\n      map.current.addSource('points', {\n        type: 'geojson',\n        cluster: true,\n        clusterMaxZoom: 14,\n        clusterRadius: 50,\n        data: {\n          type: 'FeatureCollection',\n          features: features as any,\n        },\n      });\n\n      map.current.addLayer({\n        id: 'points',\n        type: 'circle',\n        source: 'points',\n        paint: {\n          'circle-color': '#919ad7',\n          'circle-opacity': 0.7,\n          'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40],\n        },\n      });\n\n      map.current.addLayer({\n        id: 'points-count',\n        type: 'symbol',\n        source: 'points',\n        filter: ['has', 'point_count'],\n        layout: {\n          'text-field': '{point_count_abbreviated}',\n          'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n          'text-size': 12,\n        },\n      });\n    });\n  }, [props.data]);\n\n  return (\n    <div className=\"relative mb-4 mt-4\" style={{ height: 600 }}>\n      <h1>{props.name}</h1>\n      <div ref={mapContainer} className=\"map-container mapContainer\" />\n    </div>\n  );\n}\n","import { useState, useEffect, useContext } from 'react';\nimport * as d3 from 'd3';\nimport { DatasetChartSpecValues } from '@junoapp/common';\n\nimport { createColorScale, generateId } from '../utils/functions';\nimport { UserContext } from '../contexts/user.context';\n\nfunction elementId(svgId: string, id: string): string {\n  return `${svgId}-${id}`;\n}\n\nexport function GroupedHorizontalBarChart(props: {\n  name: string;\n  data: Array<DatasetChartSpecValues>;\n}): JSX.Element {\n  const [id] = useState<string>(generateId());\n  const { disability } = useContext(UserContext);\n\n  useEffect(() => {\n    const margin = {\n      top: 10,\n      bottom: 30,\n      left: 100,\n      right: 10,\n    };\n\n    const height = 400;\n\n    const svg = d3.select(`#${id}`).append('svg').attr('width', '100%').attr('height', height);\n    const width = svg.node()?.getBoundingClientRect().width;\n\n    const groupData = svg.append('g').attr('id', elementId(id, 'group-data'));\n    const groupAxis = svg.append('g').attr('id', elementId(id, 'group-axis'));\n\n    type GroupedData = {\n      name: string;\n      values: Array<{\n        name: string;\n        value: number;\n      }>;\n    };\n\n    let valueMax = Number.MIN_SAFE_INTEGER;\n\n    props.data.sort((a, b) => a.name2.localeCompare(b.name2));\n\n    const data: Array<GroupedData> = props.data.reduce(\n      (prev: GroupedData[], curr: DatasetChartSpecValues) => {\n        let item = prev.find((p) => p.name === curr.name);\n\n        if (!item) {\n          item = {\n            name: curr.name,\n            values: [],\n          };\n\n          prev.push(item);\n        }\n\n        item.values.push({\n          name: curr.name2,\n          value: curr.value,\n        });\n\n        if (curr.value >= valueMax) {\n          valueMax = curr.value;\n        }\n\n        return prev;\n      },\n      []\n    );\n\n    const keys = data.map((d) => d.name).reverse();\n    const groupedKeys = [...new Set(data.map((d) => d.values.map((v) => v.name)).flat())];\n\n    const colors = [...new Set(data.map((d) => d.values.map((v) => v.name)).flat())];\n\n    const xScale = d3\n      .scaleLinear()\n      .domain([0, valueMax])\n      .range([margin.left, width - margin.right]);\n\n    const yScale = d3\n      .scaleBand()\n      .domain(keys)\n      .paddingInner(0.1)\n      .paddingOuter(0.1)\n      .range([height - margin.bottom, margin.top]);\n\n    const y2Scale = d3\n      .scaleBand()\n      .domain(groupedKeys)\n      .paddingInner(0.1)\n      .paddingOuter(0.1)\n      .range([0, yScale.bandwidth()]);\n\n    const colorScale = createColorScale(disability, colors);\n\n    const xAxis = d3.axisBottom(xScale);\n    const yAxis = d3.axisLeft(yScale);\n\n    const firstGroup = groupData\n      .selectAll('g.group-item')\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'group-item')\n      .attr('transform', (d) => `translate(0, ${yScale(d.name)})`)\n      .selectAll('rect.data-item')\n      .data((d) => d.values)\n      .enter()\n      .append('g')\n      .attr('class', 'data-item');\n\n    firstGroup\n      .append('rect')\n      .attr('x', (d) => xScale(0))\n      .attr('y', (d) => y2Scale(d.name))\n      .attr('width', (d) => xScale(d.value))\n      .attr('height', y2Scale.bandwidth())\n      .attr('fill', (d) => colorScale(d.name))\n      .attr('pointer-events', 'none');\n\n    firstGroup\n      .append('text')\n      .attr('x', (d) => xScale(0) + 5)\n      .attr('y', (d) => y2Scale(d.name) + y2Scale.bandwidth() - 5)\n      .attr('font-size', '12px')\n      .text((d) => d.name);\n\n    groupAxis\n      .append('g')\n      .call(xAxis)\n      .attr('transform', `translate(0, ${height - margin.bottom})`);\n\n    groupAxis.append('g').call(yAxis).attr('transform', `translate(${margin.left}, 0)`);\n\n    return () => {\n      svg.remove();\n    };\n  }, [id, props, disability]);\n\n  return (\n    <div>\n      <h1>{props.name}</h1>\n      <div id={id}></div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { VerticalBarChart } from '../charts/VerticalBarChart';\nimport {\n  DatasetRecommendation,\n  DatasetChartSpec,\n  DashboardInterface,\n  DatasetRecommendationMultipleLinesData,\n  DatasetChartSpecValues,\n  DashboardRecommendation,\n  DatasetGeoChartSpecValues,\n  DatasetSchemaAggregateFunction,\n} from '@junoapp/common';\nimport { getById } from '../services/dashboard.service';\nimport { getSpec } from '../services/dashboard-recommendation.service';\n\nimport { LineChart } from '../charts/LineChart';\nimport { Heatmap } from '../charts/Heatmap';\nimport { HorizontalBarChart } from '../charts/HorizontalBarChart';\nimport { StackedHorizontalBarChart } from '../charts/StackedHorizontalBarChart';\nimport { FieldDefBase } from 'vega-lite/build/src/channeldef';\nimport { Field } from 'vega';\nimport { InlineData } from 'vega-lite/build/src/data';\nimport { VegaLite } from 'react-vega';\nimport { MultipleLineChart } from '../charts/MultipleLineChart';\nimport { applyClass } from '../utils/functions';\nimport { Card } from '../components/ui/Card';\nimport MapChart from '../charts/MapChart';\nimport { MapBox } from '../charts/Mapbox';\nimport { GroupedHorizontalBarChart } from '../charts/GroupedHorizontalBarChart';\n\nfunction convert(value: string) {\n  return isNaN(+value) ? undefined : +value;\n}\n\nconst formatter = new Intl.NumberFormat('pt-BR', {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 2,\n}).format;\n\nexport function Dashboard(): JSX.Element {\n  const [dashboard, setDashboard] = useState<DashboardRecommendation | undefined>(undefined);\n  const [chartData, setChartData] = useState<DatasetChartSpec[]>([]);\n  const [page, setPage] = useState<string>();\n  const [d, setD] = useState<DatasetRecommendation[]>([]);\n\n  const { id } = useParams<{ id: string }>();\n\n  useEffect(() => {\n    getById(+id).then((dashboard: DashboardInterface) => {\n      getSpec(dashboard.id).then((data: DashboardRecommendation) => {\n        // setD(data);\n        setDashboard(data);\n\n        let cData: DatasetChartSpec[] = [];\n\n        setPage(data.pages[0].name);\n\n        const clampStrings = dashboard.userDatasets[0].owner.preferences\n          ? dashboard.userDatasets[0].owner.preferences.clampStrings\n          : 30;\n\n        for (const page of data.pages) {\n          for (const datum of page.charts) {\n            if (datum.multipleLines) {\n              const fieldX = [\n                ...new Set(\n                  datum.multipleLines.specs.map((spec) => (spec as any).userDimension.name)\n                ),\n              ];\n              const fieldY = [\n                ...new Set(datum.multipleLines.specs.map((spec) => (spec as any).userMeasure.name)),\n              ];\n\n              cData.push({\n                page: page.name,\n                type: 'multiple-line',\n                name:\n                  fieldX.length > 1\n                    ? `${fieldY[0]} by ${fieldX.join(', ')}`\n                    : `${fieldY.join(', ')} by ${fieldX[0]}`,\n                values: datum.multipleLines.data,\n                axis: datum.multipleLines.axis,\n              });\n            } else if (Object.keys(datum.encoding).length === 3) {\n              const fieldColor = (datum.encoding.color as FieldDefBase<Field>).field.toString();\n\n              if (datum.userMeasure.aggregate === DatasetSchemaAggregateFunction.Mean) {\n                cData.push({\n                  page: page.name,\n                  type:\n                    datum.key === (datum.encoding.x as FieldDefBase<Field>).field\n                      ? 'grouped-vertical-bar'\n                      : 'grouped-horizontal-bar',\n                  name: `${datum.userMeasure.name} by ${\n                    datum.trimValues ? `Top ${clampStrings}` : ''\n                  } ${datum.userDimension.name} and ${datum.userSecondDimension.name}`,\n                  values: ((datum.data as InlineData).values as Array<any>).map((v) => ({\n                    name: v[datum.key],\n                    name2: v[fieldColor],\n                    value: convert(v[datum.value]), // isNaN(+v[datum.value]) ? undefined : +v[datum.value],\n                  })),\n                });\n              } else {\n                cData.push({\n                  page: page.name,\n                  type:\n                    datum.key === (datum.encoding.x as FieldDefBase<Field>).field\n                      ? 'stacked-vertical-bar'\n                      : 'stacked-horizontal-bar',\n                  name: `${datum.userMeasure.name} by ${\n                    datum.trimValues ? `Top ${clampStrings}` : ''\n                  } ${datum.userDimension.name} and ${datum.userSecondDimension.name}`,\n                  values: ((datum.data as InlineData).values as Array<any>).map((v) => ({\n                    name: v[datum.key],\n                    name2: v[fieldColor],\n                    value: convert(v[datum.value]), // isNaN(+v[datum.value]) ? undefined : +v[datum.value],\n                  })),\n                });\n              }\n            } else if (datum.mark === 'text') {\n              cData.push({\n                page: page.name,\n                type: datum.mark,\n                name: datum.value,\n                values: [\n                  {\n                    name: datum.value,\n                    value: +(datum.data as InlineData).values[0],\n                  },\n                ],\n              });\n            } else if (datum.mark === 'geo-lat-lng') {\n              cData.push({\n                page: page.name,\n                type: datum.mark,\n                name: `${datum.value} ${datum.userDimension.name} map`,\n                values: ((datum.data as InlineData).values as Array<any>).map((v) => ({\n                  name: v[datum.key],\n                  value: convert(v[datum.value]),\n                  latitude: v['latitude'],\n                  longitude: v['longitude'],\n                })),\n              });\n            } else {\n              cData.push({\n                page: page.name,\n                type:\n                  datum.mark === 'bar'\n                    ? datum.key === (datum.encoding.x as FieldDefBase<Field>).field\n                      ? 'vertical-bar'\n                      : 'horizontal-bar'\n                    : datum.mark,\n                name: `${datum.userMeasure.name} of ${\n                  datum.trimValues ? `Top ${clampStrings}` : ''\n                } ${datum?.userDimension?.name ?? datum.key} ${\n                  datum.mark === 'heatmap' ? 'heatmap' : ''\n                }`,\n                values: ((datum.data as InlineData).values as Array<any>).map((v) => ({\n                  name: v[datum.key],\n                  value: convert(v[datum.value]), // isNaN(+v[datum.value]) ? undefined : +v[datum.value],\n                })),\n                geofile: datum.geoFile,\n              });\n            }\n          }\n        }\n\n        setChartData(cData);\n      });\n    });\n\n    return () => {\n      setChartData([]);\n      setD([]);\n    };\n  }, [id]);\n\n  return (\n    <div>\n      <div className=\"flex flex-wrap mb-2\">\n        {dashboard &&\n          dashboard.pages.length > 1 &&\n          dashboard.pages.map((dashboardPage) => (\n            <button\n              key={dashboardPage.name}\n              type=\"button\"\n              className={`button button-primary mr-2 mb-2 ${applyClass(\n                dashboardPage.name === page,\n                'active'\n              )}`}\n              onClick={() => setPage(dashboardPage.name)}\n            >\n              {dashboardPage.name}\n            </button>\n          ))}\n      </div>\n\n      <div className=\"flex -mx-4 mb-4\">\n        {chartData &&\n          chartData\n            .filter((chart) => chart.type === 'text')\n            .map((chart) => (\n              <Card title={chart.name} key={chart.name} className=\"mx-4\">\n                <div key={chart.name} className=\"card\">\n                  <h3>{formatter((chart.values[0] as DatasetChartSpecValues).value)}</h3>\n                </div>\n              </Card>\n            ))}\n      </div>\n\n      {chartData &&\n        chartData\n          .filter((chart) => chart.page === page)\n          .map((chart, index) => (\n            <div key={`${chart.name}-${index}`}>\n              {chart.type === 'geoshape' && (\n                <MapChart\n                  name={chart.name}\n                  geofile={chart.geofile}\n                  data={chart.values as DatasetChartSpecValues[]}\n                />\n              )}\n\n              {chart.type === 'geo-lat-lng' && (\n                <MapBox name={chart.name} data={chart.values as DatasetGeoChartSpecValues[]} />\n              )}\n\n              {chart.type === 'multiple-line' && (\n                <MultipleLineChart\n                  name={chart.name}\n                  data={chart.values as DatasetRecommendationMultipleLinesData[]}\n                  axis={chart.axis!}\n                />\n              )}\n\n              {chart.type === 'line' && (\n                <LineChart name={chart.name} data={chart.values as DatasetChartSpecValues[]} />\n              )}\n\n              {chart.type === 'heatmap' && (\n                <Heatmap name={chart.name} data={chart.values as DatasetChartSpecValues[]} />\n              )}\n\n              {chart.type === 'vertical-bar' && (\n                <VerticalBarChart\n                  name={chart.name}\n                  data={chart.values as DatasetChartSpecValues[]}\n                />\n              )}\n\n              {chart.type === 'horizontal-bar' && (\n                <HorizontalBarChart\n                  name={chart.name}\n                  data={chart.values as DatasetChartSpecValues[]}\n                />\n              )}\n\n              {chart.type === 'stacked-horizontal-bar' && (\n                <StackedHorizontalBarChart\n                  name={chart.name}\n                  data={chart.values as DatasetChartSpecValues[]}\n                />\n              )}\n\n              {chart.type === 'grouped-horizontal-bar' && (\n                <GroupedHorizontalBarChart\n                  name={chart.name}\n                  data={chart.values as DatasetChartSpecValues[]}\n                />\n              )}\n            </div>\n          ))}\n\n      {d &&\n        d\n          .filter((dd) => dd.mark !== 'line')\n          .map((dd) => (\n            <span>\n              <VegaLite spec={dd as any} data={dd.data as any} />\n            </span>\n          ))}\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { applyClass } from '../utils/functions';\n\nexport function useButtonGroup(\n  options: Array<{ type: string; label: string }>,\n  defaultValue: string | undefined\n): [string | undefined, () => JSX.Element, React.Dispatch<React.SetStateAction<string>>] {\n  const [state, setState] = useState<string | undefined>(defaultValue);\n\n  const ButtonGroup = () => (\n    <div className=\"flex items-start\">\n      {options &&\n        options.map((option) => (\n          <button\n            key={option.type}\n            type=\"button\"\n            className={`button button-primary rounded-none first:rounded-l-md last:rounded-r-md ${applyClass(\n              state === option.type,\n              'active'\n            )}`}\n            onClick={() => setState(option.type)}\n          >\n            {option.label}\n          </button>\n        ))}\n    </div>\n  );\n\n  return [state, ButtonGroup, setState];\n}\n","import { UserVisLiteracy } from '@junoapp/common';\nimport { useFormik } from 'formik';\nimport { useHistory } from 'react-router-dom';\n\nimport { Input } from '../components/form/Input';\nimport { Card } from '../components/ui/Card';\nimport { useButtonGroup } from '../hooks/useButtonGroup';\nimport { save } from '../services/user.service';\n\nexport function UserAdd(): JSX.Element {\n  const history = useHistory();\n  const [visLiteracy, VisLiteracy] = useButtonGroup(\n    [\n      { type: 'LOW', label: 'Low' },\n      { type: 'MEDIUM', label: 'Medium' },\n      { type: 'HIGH', label: 'High' },\n    ],\n    'LOW'\n  );\n\n  const [colorBlind, ColorBlind] = useButtonGroup(\n    [\n      { type: 'false', label: 'No' },\n      { type: 'true', label: 'Yes' },\n    ],\n    'false'\n  );\n\n  const [dyslexic, Dyslexic] = useButtonGroup(\n    [\n      { type: 'false', label: 'No' },\n      { type: 'true', label: 'Yes' },\n    ],\n    'false'\n  );\n\n  const formik = useFormik({\n    initialValues: {\n      name: '',\n      disability: '',\n      visLiteracy: '',\n    },\n    onSubmit: (values) => {\n      save({\n        name: values.name,\n        disability: [\n          colorBlind === 'true' ? 'colorBlind' : false,\n          dyslexic === 'true' ? 'dyslexic' : false,\n        ]\n          .filter(Boolean)\n          .join(', '),\n        visLiteracy: visLiteracy as UserVisLiteracy,\n      }).then((user) => {\n        history.replace('/');\n      });\n    },\n  });\n\n  return (\n    <div className=\"relative\">\n      <Card className=\"min-h\" title=\"Add new user\">\n        <form className=\"w-full max-w-lg\" onSubmit={formik.handleSubmit}>\n          <div className=\"flex flex-wrap -mx-3 mb-6\">\n            <div className=\"w-full px-3\">\n              <Input name=\"name\" label=\"Name\" placeholder=\"name\" formik={formik} />\n            </div>\n          </div>\n          <div className=\"flex flex-wrap -mx-3 mb-6\">\n            <div className=\"w-full px-3\">\n              <label className=\"label\">Disability - Color blind</label>\n\n              <ColorBlind />\n            </div>\n          </div>\n          <div className=\"flex flex-wrap -mx-3 mb-6\">\n            <div className=\"w-full px-3\">\n              <label className=\"label\">Disability - Dyslexic</label>\n\n              <Dyslexic />\n            </div>\n          </div>\n          <div className=\"flex flex-wrap -mx-3 mb-6\">\n            <div className=\"w-full px-3\">\n              <label className=\"label\">Vis Literacy</label>\n\n              <VisLiteracy />\n            </div>\n          </div>\n\n          <button type=\"submit\" className=\"button\">\n            Save\n          </button>\n        </form>\n      </Card>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { formatRelative } from 'date-fns';\nimport { Link, useParams } from 'react-router-dom';\n\nimport { getAll } from '../services/dashboard.service';\nimport { DatasetColumnRole, DashboardInterface } from '@junoapp/common';\nimport { Alert } from './ui/Alert';\nimport { Loading } from './ui/Loading';\nimport { Card } from './ui/Card';\nimport { Badge } from './ui/Badge';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function DashboardList(): JSX.Element {\n  const [datasets, setDatasets] = useState<DashboardInterface[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const { id } = useParams<{ id: string }>();\n\n  useEffect(() => {\n    const load = () => {\n      setIsLoading(true);\n\n      getAll(+id).then((datasets) => {\n        setDatasets(datasets);\n        setIsLoading(false);\n      });\n    };\n\n    load();\n  }, [id]);\n\n  const countColumns = (dataset: DashboardInterface, type: DatasetColumnRole): React.ReactNode => {\n    const count = dataset.userDatasets[0].columns.filter(\n      (column) => column.role === type && !column.removed\n    ).length;\n\n    if (count > 0) {\n      return (\n        <Badge>\n          {count} {type.toLowerCase()} column{count > 1 ? 's' : ''}\n        </Badge>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <div className=\"relative flex flex-wrap -mx-4 min-h\">\n      <Loading loading={isLoading} />\n\n      {!isLoading && datasets.length === 0 && (\n        <Alert\n          title=\"No dataset loaded\"\n          message=\"Upload a CSV file or connect with a database.\"\n          className=\"mx-4\"\n        />\n      )}\n\n      {!isLoading &&\n        datasets.length > 0 &&\n        datasets.map((dashboard: DashboardInterface) => (\n          <div key={dashboard.id} className=\"w-1/3 px-4 mb-4\">\n            <Card title={dashboard.name}>\n              <div className=\"flex flex-col items-start\">\n                <Badge>CSV</Badge>\n                {countColumns(dashboard, DatasetColumnRole.MEASURE)}\n                {countColumns(dashboard, DatasetColumnRole.DIMENSION)}\n                <span className=\"text-gray-600 text-xs mb-2\">\n                  Updated {formatRelative(new Date(dashboard.updatedDate), new Date())}\n                  <br />\n                  Created {formatRelative(new Date(dashboard.createdDate), new Date())}\n                </span>\n              </div>\n              <div className=\"flex\">\n                <Link\n                  to={`/dashboard/view/${dashboard.id}`}\n                  className=\"button button-primary button-small mr-2\"\n                >\n                  <FontAwesomeIcon icon=\"eye\" />\n                  View\n                </Link>\n                <Link\n                  to={`/dashboard/${dashboard.id}/edit`}\n                  className=\"button button-primary button-small mr-2\"\n                >\n                  <FontAwesomeIcon icon=\"pencil-alt\" />\n                  Edit\n                </Link>\n              </div>\n            </Card>\n          </div>\n        ))}\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { formatRelative } from 'date-fns';\nimport { Link } from 'react-router-dom';\n\nimport { getAll } from '../services/dataset.service';\nimport { DatasetInterface, DatasetColumnRole } from '@junoapp/common';\nimport { Alert } from './ui/Alert';\nimport { Loading } from './ui/Loading';\nimport { Card } from './ui/Card';\nimport { Badge } from './ui/Badge';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function DatasetsList(): JSX.Element {\n  const [datasets, setDatasets] = useState<DatasetInterface[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const load = () => {\n    setIsLoading(true);\n\n    getAll().then((datasets) => {\n      setDatasets(datasets);\n      setIsLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    load();\n  }, []);\n\n  const countColumns = (dataset: DatasetInterface, type: DatasetColumnRole): React.ReactNode => {\n    const count = dataset.columns.filter((column) => column.role === type).length;\n\n    if (count > 0) {\n      return (\n        <Badge>\n          {count} {type.toLowerCase()} column{count > 1 ? 's' : ''}\n        </Badge>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <div className=\"relative flex flex-wrap -mx-4 min-h\">\n      <Loading loading={isLoading} />\n\n      {!isLoading && datasets.length === 0 && (\n        <Alert\n          title=\"No dataset loaded\"\n          message=\"Upload a CSV file or connect with a database.\"\n          className=\"mx-4\"\n        />\n      )}\n\n      {!isLoading &&\n        datasets.length > 0 &&\n        datasets.map((dataset: DatasetInterface) => (\n          <div key={dataset.id} className=\"w-1/3 px-4 mb-4\">\n            <Card title={dataset.originalname}>\n              <div className=\"flex flex-col items-start\">\n                <Badge>CSV</Badge>\n                {countColumns(dataset, DatasetColumnRole.MEASURE)}\n                {countColumns(dataset, DatasetColumnRole.DIMENSION)}\n                <span className=\"text-gray-600 text-xs mb-2\">\n                  Updated {formatRelative(new Date(dataset.updatedDate), new Date())}\n                  <br />\n                  Created {formatRelative(new Date(dataset.createdDate), new Date())}\n                </span>\n              </div>\n              <div className=\"flex\">\n                <Link\n                  to={`/dashboard/add/${dataset.id}`}\n                  className=\"button button-primary button-small mr-2\"\n                >\n                  <FontAwesomeIcon icon=\"pencil-alt\" className=\"mr-1\" />\n                  Create new dashboard\n                </Link>\n              </div>\n            </Card>\n          </div>\n        ))}\n    </div>\n  );\n}\n","import { useEffect, useContext } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { DashboardList } from '../components/DashboardList';\n\nimport { DatasetsList } from '../components/DatasetsList';\nimport { UserContext } from '../contexts/user.context';\nimport { getById } from '../services/user.service';\n\nexport function UserView(): JSX.Element {\n  const { id } = useParams<{ id: string }>();\n  const user = useContext(UserContext);\n\n  useEffect(() => {\n    getById(+id).then((userData) => {\n      user.signIn(id, userData.disability);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  return (\n    <div>\n      <div className=\"flex\">\n        <Link to={`/dataset/add`} className=\"button button-primary\">\n          Add new dataset\n        </Link>\n      </div>\n\n      <div className=\"text-lg mt-3\">My dashboards</div>\n\n      <hr />\n\n      <div className=\"mt-5\">\n        <DashboardList />\n      </div>\n\n      <div className=\"text-lg\">Public datasets</div>\n\n      <hr />\n\n      <div className=\"mt-5\">\n        <DatasetsList />\n      </div>\n    </div>\n  );\n}\n","import { useState, ChangeEvent, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { uploadDataset } from '../services/dataset.service';\nimport { Loading } from './ui/Loading';\nimport { Card } from './ui/Card';\nimport { UserContext } from '../contexts/user.context';\n\nexport function UploadFileForm(): JSX.Element {\n  const { user } = useContext(UserContext);\n  const [isLoading, setLoading] = useState(false);\n\n  const history = useHistory();\n\n  const onChangeHandler = async (event: ChangeEvent<HTMLInputElement>) => {\n    event.persist();\n\n    if (event.target.files) {\n      try {\n        setLoading(true);\n\n        const response = await uploadDataset(user, event.target.files[0]);\n\n        history.push(`/dashboard/add/${response.id}`);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <Card className=\"min-h\">\n        <Loading loading={isLoading} />\n\n        {!isLoading && (\n          <div>\n            <label className=\"label\">Upload a file:</label>\n            <div className=\"mt-2\">\n              <label htmlFor=\"file\" className=\"button\">\n                Select a file\n              </label>\n              <input\n                type=\"file\"\n                className=\"hide\"\n                name=\"file\"\n                id=\"file\"\n                onChange={onChangeHandler}\n              />\n            </div>\n          </div>\n        )}\n      </Card>\n    </div>\n  );\n}\n","import { Link, useHistory, withRouter } from 'react-router-dom';\n\nimport { useContext } from 'react';\nimport { UserContext } from '../contexts/user.context';\n\nfunction Header(): JSX.Element {\n  const history = useHistory();\n  const { user, signOut } = useContext(UserContext);\n\n  return (\n    <header className=\"bg-yellow-500 p-3 text-white text-lg font-bold flex justify-between\">\n      <Link to=\"/\">Juno</Link>\n\n      {user && (\n        <div>\n          <button type=\"button\" onClick={() => history.replace('/preferences')} className=\"mr-4\">\n            Preferences\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              signOut();\n              history.replace('/');\n            }}\n          >\n            Sair\n          </button>\n        </div>\n      )}\n    </header>\n  );\n}\n\nexport default withRouter(Header);\n","import { FieldInputProps } from 'formik';\n\nexport function Checkbox({\n  name,\n  label,\n  disabled,\n  formik,\n  checked,\n}: {\n  name: string;\n  label: string;\n  checked: boolean;\n  placeholder?: string;\n  disabled?: boolean;\n  formik: { getFieldProps: (name: string) => FieldInputProps<any> };\n}): JSX.Element {\n  return (\n    <div>\n      <label className=\"label\" htmlFor={name}>\n        {label}\n      </label>\n      <input\n        id={name}\n        type=\"checkbox\"\n        checked={checked}\n        className=\"rounded bg-gray-200 border-transparent focus:border-transparent focus:bg-gray-200 text-gray-700 focus:ring-1 focus:ring-offset-2 focus:ring-gray-500\"\n        disabled={disabled}\n        {...formik.getFieldProps(name)}\n      />\n    </div>\n  );\n}\n","import { UserVisLiteracy } from '@junoapp/common';\nimport { useFormik } from 'formik';\nimport { useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Checkbox } from '../components/form/Checkbox';\nimport { Input } from '../components/form/Input';\nimport { Select } from '../components/form/Select';\nimport { Card } from '../components/ui/Card';\nimport { UserContext } from '../contexts/user.context';\nimport { useButtonGroup } from '../hooks/useButtonGroup';\nimport { getById, savePreferences } from '../services/user.service';\n\nconst types = ['NUMBER', 'STRING', 'DATE'];\nconst chartTypes = [];\n\nfor (const typeX of types) {\n  for (const typeY of types) {\n    if (typeX !== typeY) {\n      chartTypes.push({\n        typeX,\n        typeY,\n        chart: 'AUTO',\n      });\n    }\n  }\n}\n\nexport function Preferences(): JSX.Element {\n  const { user } = useContext(UserContext);\n  const history = useHistory();\n\n  const [visLiteracy, VisLiteracy, setVisLiteracy] = useButtonGroup(\n    [\n      { type: 'LOW', label: 'Low' },\n      { type: 'MEDIUM', label: 'Medium' },\n      { type: 'HIGH', label: 'High' },\n    ],\n    'LOW'\n  );\n\n  const [colorBlind, ColorBlind, setColorBlind] = useButtonGroup(\n    [\n      { type: 'false', label: 'No' },\n      { type: 'true', label: 'Yes' },\n    ],\n    'false'\n  );\n\n  const [dyslexic, Dyslexic, setDyslexic] = useButtonGroup(\n    [\n      { type: 'false', label: 'No' },\n      { type: 'true', label: 'Yes' },\n    ],\n    'false'\n  );\n\n  const formik = useFormik({\n    initialValues: {\n      stacked: true,\n      multiline: true,\n      rightAxis: true,\n      binValues: 50,\n      clampStrings: 30,\n      chartTypes,\n    },\n    onSubmit: (values) => {\n      savePreferences(+user, {\n        ...values,\n        disability: [\n          colorBlind === 'true' ? 'colorBlind' : false,\n          dyslexic === 'true' ? 'dyslexic' : false,\n        ]\n          .filter(Boolean)\n          .join(', '),\n        visLiteracy: visLiteracy as UserVisLiteracy,\n      }).then(() => {\n        backToHome();\n      });\n    },\n  });\n\n  useEffect(() => {\n    getById(+user).then((userData) => {\n      setVisLiteracy(userData.visLiteracy);\n      setColorBlind(userData.disability.includes('colorBlind') ? 'true' : 'false');\n      setDyslexic(userData.disability.includes('dyslexic') ? 'true' : 'false');\n\n      if (userData['preferences']) {\n        formik.setFieldValue('stacked', userData['preferences'].stacked);\n        formik.setFieldValue('multiline', userData['preferences'].multiline);\n        formik.setFieldValue('rightAxis', userData['preferences'].rightAxis);\n        formik.setFieldValue('binValues', userData['preferences'].binValues);\n        formik.setFieldValue('clampStrings', userData['preferences'].clampStrings);\n\n        for (const typeX of types) {\n          for (const typeY of types) {\n            if (typeX !== typeY) {\n              const index = userData['preferences'].chartTypes.findIndex(\n                (chartType) => chartType.typeX === typeX && chartType.typeY === typeY\n              );\n\n              formik.setFieldValue(\n                `chartTypes.${index}.chart`,\n                userData['preferences'].chartTypes[index].chart\n              );\n            }\n          }\n        }\n      }\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user]);\n\n  const backToHome = () => {\n    history.replace(`/`);\n  };\n\n  return (\n    <Card title=\"Preferences\">\n      <form className=\"w-full\" onSubmit={formik.handleSubmit}>\n        <div className=\"flex flex-wrap -mx-3 mb-6\">\n          <div className=\"w-full px-3\">\n            <label className=\"label\">Disability - Color blind</label>\n\n            <ColorBlind />\n          </div>\n        </div>\n        <div className=\"flex flex-wrap -mx-3 mb-6\">\n          <div className=\"w-full px-3\">\n            <label className=\"label\">Disability - Dyslexic</label>\n\n            <Dyslexic />\n          </div>\n        </div>\n        <div className=\"flex flex-wrap -mx-3 mb-6\">\n          <div className=\"w-full px-3\">\n            <label className=\"label\">Vis Literacy</label>\n\n            <VisLiteracy />\n          </div>\n        </div>\n\n        <div className=\"font-bold\">Based on chart types:</div>\n        <hr className=\"my-2\" />\n        <Checkbox\n          checked={formik.values.stacked}\n          name=\"stacked\"\n          label=\"Stacked bars when possible\"\n          formik={formik}\n        />\n\n        <hr className=\"my-2\" />\n        <Checkbox\n          checked={formik.values.multiline}\n          name=\"multiline\"\n          label=\"Multiline charts\"\n          formik={formik}\n        />\n\n        <hr className=\"my-2\" />\n        <Checkbox\n          checked={formik.values.rightAxis}\n          name=\"rightAxis\"\n          label=\"Line charts with right axis\"\n          formik={formik}\n        />\n\n        <hr className=\"my-2\" />\n        <Input name=\"binValues\" label=\"Bin quantitative columns higher than\" formik={formik} />\n\n        <hr className=\"my-2\" />\n        <Input\n          name=\"clampStrings\"\n          label=\"Clamp string columns with more distinct values than\"\n          formik={formik}\n        />\n\n        <div className=\"font-bold\">Based on chart types:</div>\n        <hr className=\"my-2\" />\n        {chartTypes.map((_, index) => (\n          <div className=\"flex -mx-4 mb-3\" key={index}>\n            <div className=\"px-4 w-1/3\">\n              <Input\n                name={`chartTypes.${index}.typeX`}\n                label=\"Type X\"\n                disabled={true}\n                formik={formik}\n              />\n            </div>\n            <div className=\"px-4 w-1/3\">\n              <Input\n                name={`chartTypes.${index}.typeY`}\n                label=\"Type Y\"\n                disabled={true}\n                formik={formik}\n              />\n            </div>\n            <div className=\"px-4 w-1/3\">\n              <Select\n                name={`chartTypes.${index}.chart`}\n                label=\"Chart Type\"\n                options={[\n                  { value: 'AUTO', label: 'Auto' },\n                  { value: 'LINE', label: 'Line' },\n                  { value: 'BAR', label: 'Bar' },\n                ]}\n                formik={formik}\n              />\n            </div>\n          </div>\n        ))}\n\n        <div className=\"flex justify-end\">\n          <button type=\"button\" className=\"button mr-2\" onClick={backToHome}>\n            Cancel\n          </button>\n          <button type=\"submit\" className=\"button button-primary\">\n            Submit\n          </button>\n        </div>\n      </form>\n    </Card>\n  );\n}\n","import { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\n\nimport { Home } from './pages/Home';\nimport { DatasetColumns } from './pages/DatasetColumns';\nimport { Dashboard } from './pages/Dashboard';\nimport { UserAdd } from './pages/UserAdd';\nimport { UserView } from './pages/UserView';\nimport { UploadFileForm } from './components/UploadFileForm';\nimport Header from './components/Header';\nimport { Preferences } from './pages/Preferences';\nimport { UserContext } from './contexts/user.context';\nimport { useContext } from 'react';\n\nlibrary.add(fas);\n\nfunction App(): JSX.Element {\n  const { disability } = useContext(UserContext);\n\n  return (\n    <div className={`App ${disability?.includes('dyslexic') ? 'dyslexic-font' : ''}`}>\n      <BrowserRouter>\n        <Switch>\n          <div>\n            <Header />\n\n            <div className=\"container mx-auto pt-4 mb-8\">\n              <Route exact path=\"/user/add\">\n                <UserAdd />\n              </Route>\n              <Route exact path=\"/dataset/add\">\n                <UploadFileForm />\n              </Route>\n              <Route exact path=\"/dashboard/add/:id\">\n                <DatasetColumns action=\"add\" />\n              </Route>\n              <Route exact path=\"/dashboard/:id/edit\">\n                <DatasetColumns action=\"edit\" />\n              </Route>\n              <Route exact path=\"/dashboard/view/:id\">\n                <Dashboard />\n              </Route>\n              <Route exact path=\"/user/view/:id\">\n                <UserView />\n              </Route>\n              <Route exact path=\"/preferences\">\n                <Preferences />\n              </Route>\n              <Route exact path=\"/\">\n                <Home />\n              </Route>\n            </div>\n          </div>\n        </Switch>\n      </BrowserRouter>\n\n      {/* <div className=\"border h-12 border-red-600\">Toolbar</div>\n\n      <div className=\"flex flex-1\">\n        <div className=\"border w-1/6 h-10\"></div>\n        <div className=\"border flex-1 h-10\"></div>\n        <div className=\"border w-1/6 h-10\"></div>\n      </div> */}\n    </div>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport './tailwind.css';\n\nimport App from './App';\nimport { UserProvider } from './contexts/user.context';\n\nReactDOM.render(\n  <StrictMode>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}