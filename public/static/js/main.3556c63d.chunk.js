(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{393:function(e,t,a){},394:function(e,t,a){},407:function(e,t){},408:function(e,t){},409:function(e,t){},410:function(e,t){},461:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),c=a(293),i=a.n(c),s=(a(393),a(394),a(30)),l=a(29),o=a(116),u=a(300),d=a(8),m=a.n(d),p=a(15),b=a(10),f=a(476),j=a(28),h="";function x(){return(x=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/user")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/user/").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.post("".concat(h,"/api/user"),{json:t}).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.delete("".concat(h,"/api/user/").concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.post("".concat(h,"/api/user/preferences/").concat(t),{json:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=a(43),S=a(13);function M(e,t){return t?e?t:"":e||""}function A(){return"juno-"+Math.random().toString(36).substr(2,9)}function D(e){var t=e.domain(),a=e(t[0])||0,n=e.step();return function(e){var r=Math.floor((e-a)/n);return t[Math.max(0,Math.min(r,t.length-1))]}}function B(e){return e.endsWith(".csv")&&(e=e.slice(0,-4)),(e=e.replaceAll("_"," ")).split(" ").map((function(e){return e.split(/(?=[A-Z])/)})).flat().map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ").replace(/\s+/g," ")}function C(e,t){return S.n((null===e||void 0===e?void 0:e.includes("colorBlind"))?t.length>4?["#3575B1"]:["#a6cee3","#1f78b4","#b2df8a","#33a02c"]:t.length>10?["#3575B1"]:S.p)}function E(e,t){return"".concat(e,"-").concat(t)}function I(e){var t=e.title,a=e.message,r=e.className;return Object(n.jsx)("div",{className:"bg-blue-100 border-blue-500 rounded-b text-blue-900 px-4 py-3 shadow-md w-full h-fit ".concat(M(r)),role:"alert",children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)("div",{className:"py-1 h-6 w-6 text-blue-500 mr-4",children:Object(n.jsx)(k.a,{icon:"info-circle"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"font-bold",children:t}),Object(n.jsx)("p",{className:"text-sm",children:a})]})]})})}function T(e){return e.loading?Object(n.jsx)("div",{className:"absolute top-1/2 left-1/2 -mt-4 -ml-4 h-40",children:Object(n.jsx)(k.a,{icon:"circle-notch",spin:!0,size:"2x",className:"text-orange-500"})}):Object(n.jsx)(n.Fragment,{})}function L(e){var t=e.title,a=e.className,r=e.children;return Object(n.jsxs)("div",{className:"w-full h-full rounded overflow-hidden shadow bg-white ".concat(M(a)),children:[t&&Object(n.jsx)("div",{className:"px-6 pt-4",children:Object(n.jsx)("div",{className:"font-bold text-xl mb-2 break-words",children:t})}),Object(n.jsx)("div",{className:"px-6 py-4",children:r})]})}function F(e){var t=e.children;return Object(n.jsx)("span",{className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:t})}function R(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),l=Object(b.a)(i,2),o=l[0],u=l[1],d=function(){u(!0),function(){return x.apply(this,arguments)}().then((function(e){c(e),u(!1)}))};Object(r.useEffect)((function(){d()}),[]);var j=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,y(t);case 3:d();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(T,{loading:o}),!o&&0===a.length&&Object(n.jsx)(I,{title:"No user added",message:"Add some user to start a new dashboard.",className:"mx-4"}),!o&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(L,{title:e.name,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsxs)(F,{children:["VisLiteracy: ",e.visLiteracy]}),e.disability&&Object(n.jsxs)(F,{children:["Disability: ",e.disability]}),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(f.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(f.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)(s.b,{to:"user/view/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"eye"}),"Login"]}),Object(n.jsxs)("button",{type:"button",className:"button button-danger button-small",onClick:function(){return j(e.id)},children:[Object(n.jsx)(k.a,{icon:"trash"}),"Delete"]})]})]})},e.id)}))]})}var z=Object(r.createContext)(void 0);function V(e){var t=Object(r.useState)(localStorage.getItem("user")),a=Object(b.a)(t,2),c=a[0],i=a[1],s=Object(r.useState)(localStorage.getItem("disability")),l=Object(b.a)(s,2),o=l[0],u=l[1];return Object(n.jsx)(z.Provider,{value:{user:c,disability:o,signIn:function(e,t){localStorage.setItem("user",e),localStorage.setItem("disability",t),i(e),u(t)},signOut:function(){localStorage.removeItem("user"),localStorage.removeItem("disability"),i(void 0),u(void 0)}},children:e.children})}function U(){var e=Object(l.f)(),t=Object(r.useContext)(z).user;return t&&e.replace("/user/view/".concat(t)),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(s.b,{to:"/user/add",className:"button button-primary",children:"Add new user"})}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(R,{})})]})}var q=a(22),P=a(80);function G(){return(G=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/dataset")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/dataset/").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",a),n.append("user",t),e.abrupt("return",j.a.post("".concat(h,"/api/dataset/upload"),{body:n}).json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/dashboard?user=").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/dashboard/").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.post("".concat(h,"/api/dashboard"),{json:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return $.apply(this,arguments)}function $(){return($=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.put("".concat(h,"/api/dashboard"),{json:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){var t=e.name,a=e.label,r=e.type,c=e.placeholder,i=e.disabled,s=e.formik;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("input",Object(q.a)({className:"input",id:t,type:r||"text",placeholder:c||"",disabled:i},s.getFieldProps(t)))]})}function te(e){var t=e.name,a=e.label,r=e.options,c=e.formik,i=e.disabled;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)("select",Object(q.a)(Object(q.a)({className:"select",id:t},c.getFieldProps(t)),{},{disabled:i,children:[Object(n.jsxs)("option",{value:"",children:["Select a ",a.toLowerCase()]}),r.map((function(e){return Object(n.jsx)("option",{value:e.value,disabled:e.isDisabled||!1,children:e.label},e.value)}))]}))})]})}var ae=a(38);function ne(e){var t=e.action,a=Object(r.useState)(!1),c=Object(b.a)(a,2),i=c[0],s=c[1],o=Object(r.useState)({name:"",type:"",purpose:"",fields:[]}),u=Object(b.a)(o,2),d=u[0],f=u[1],j=Object(r.useState)(void 0),h=Object(b.a)(j,2),x=h[0],v=h[1],O=Object(r.useState)(0),g=Object(b.a)(O,2),y=g[0],w=g[1],N=Object(l.g)().id,S=Object(l.f)(),M=Object(r.useContext)(z).user;Object(r.useEffect)((function(){s(!0),"add"===t?function(e){return _.apply(this,arguments)}(+N).then((function(e){if(0!==e.columns.length){var t=[],a=[],n=e.columns.filter((function(e){return e.role===ae.a.MEASURE})).length>1;e.columns.forEach((function(e,r){t.push({id:e.id,originalName:e.name,name:B(e.name),role:e.role,index:r,removed:n&&e.role===ae.a.MEASURE&&"count"===e.name.toLowerCase(),type:e.type,aggregate:e.role===ae.a.MEASURE?ae.b.Sum:ae.b.None}),a.push({label:r.toString(),value:r.toString(),isDisabled:!1})})),v(B(e.originalname)),s(!1),f({name:B(e.originalname),type:"",purpose:"",fields:t})}else setTimeout((function(){w(y+1)}),1e3)})):X(+N).then((function(e){var t=[],a=[];e.userDatasets[0].columns.forEach((function(e,n){t.push({id:e.id,originalName:e.column.name,name:e.name,role:e.role,index:n,removed:e.removed,type:e.column.type,aggregate:e.aggregate}),a.push({label:n.toString(),value:n.toString(),isDisabled:!1})})),v(e.name),s(!1),f({name:e.name,type:e.goalType,purpose:e.goalPurpose,fields:t})}))}),[N,t,y]);var A=function(){S.replace("/user/view/".concat(M))};return Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)(L,{className:"min-h",title:x,children:[Object(n.jsx)(T,{loading:i}),!i&&Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(P.b,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var e=Object(p.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.fields.map((function(e,t){return Object(q.a)(Object(q.a)({},e),{},{index:t,role:e.role})})),s(!0),"add"!==t){e.next=7;break}return e.next=5,J({datasetId:+N,name:a.name,user:+M,goal:a.type,purpose:a.purpose,colums:n});case 5:e.next=9;break;case 7:return e.next=9,Q({id:+N,name:a.name,user:+M,goal:a.type,purpose:a.purpose,colums:n});case 9:A();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getFieldProps,a=e.values,r=e.setFieldValue;return Object(n.jsxs)(P.a,{children:[Object(n.jsxs)("div",{className:"flex -mx-4 bg-white",children:[Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(ee,{name:"name",label:"Name",formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(te,{name:"type",label:"Goal Type",options:[{value:"DECISION_MAKING",label:"Decision Making"},{value:"AWARENESS",label:"Awareness"},{value:"MOTIVATIONAL_LEARNING",label:"Motivational Learning"},{value:"OTHER",label:"Other"}],formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(te,{name:"purpose",label:"Goal Purpose",options:[{value:"STRATEGIC",label:"Strategic"},{value:"OPERATIONAL",label:"Operational"},{value:"ORGANIZATIONAL",label:"Organizational"},{value:"LEARNING",label:"Learning"}],formik:{getFieldProps:t}})})]}),Object(n.jsx)("hr",{className:"mt-2 mb-4"}),Object(n.jsx)("div",{children:a.fields.length>0&&a.fields.map((function(e,c){return Object(n.jsxs)("div",{className:"flex -mx-4 bg-white",children:[Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(ee,{name:"fields.".concat(c,".name"),label:"Name",formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(ee,{name:"fields.".concat(c,".type"),label:"Type",formik:{getFieldProps:t},disabled:!0})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(te,{name:"fields.".concat(c,".role"),label:"Type",options:[{value:"measure",label:"Measure"},{value:"dimension",label:"Dimension"}],formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(te,{name:"fields.".concat(c,".aggregate"),label:"Aggregate",options:[{value:"NONE",label:"None"},{value:"MIN",label:"Min"},{value:"MEAN",label:"Mean"},{value:"SUM",label:"Sum"},{value:"BIN",label:"Bin"},{value:"MAX",label:"Max"},{value:"MEDIAN",label:"Median"}],formik:{getFieldProps:t},disabled:"dimension"===a.fields[c].role||"count"===a.fields[c].originalName})}),Object(n.jsx)("div",{className:"px-4 flex items-center",children:Object(n.jsx)("button",{type:"button",className:"button ".concat(e.removed?"button-success":"button-danger"),onClick:function(){return r("fields.".concat(c,".removed"),!a.fields[c].removed)},children:Object(n.jsx)(k.a,{icon:e.removed?"plus":"times"})})})]})}))}),Object(n.jsxs)("div",{className:"flex justify-end",children:[Object(n.jsx)("button",{type:"button",className:"button mr-2",onClick:A,children:"Cancel"}),Object(n.jsx)("button",{type:"submit",className:"button button-primary",children:"Submit"})]})]})}})})]})})}var re=a(5),ce=a(2);function ie(e,t,a,n,r,c){var i={};e.append("g").selectAll(".dummyText").data(n).enter().append("text").attr("font-family","sans-serif").attr("font-size","14px").text((function(e){return c?c[e]:e})).each((function(e,t){var a=this.getComputedTextLength()+10;i[t]=30+(0===t?a:a+i[t-1]),this.remove()}));var s=e.append("g").attr("id",E(t,"group-legend")).attr("transform","translate(".concat(a,", 10)")).selectAll("g.legend-item").data(n).enter().append("g").attr("class","legend-item").attr("transform",(function(e,t){return"translate(".concat(0===t?0:i[t-1],", 0)")}));s.append("rect").attr("width",15).attr("height",15).attr("rx",5).attr("fill",(function(e){return r(e)})),s.append("text").text((function(e){return c?c[e]:e})).attr("font-family","sans-serif").attr("font-size","14px").attr("transform","translate(20, 13)")}var se=a(302),le=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function oe(e,t,a,n,r,c,i,s,l){var o=e.append("g").attr("id",E(t,"group-data"));e.on("mousemove",(function(t){var u=S.k(t),d=Object(b.a)(u,1)[0],m=s?D(s)(d):l.invert(d),p=n.findIndex((function(e){return console.log(e,e.name,m),"string"===typeof m||"number"===typeof m?e.name===m:e.name===Object(se.a)(m,"yyyy/MM/dd")}));if(console.log(m,p,n),o.selectAll(".hover-line").remove(),o.selectAll(".hover-group").remove(),p>=0){var f=n[p],j=n[p+1],h=0,x=!1;j&&l&&(h=Math.abs(l(new Date(f.name))-l(new Date(j.name)))/2,x=d>l(new Date(f.name))+h);var v=s?s(f.name)+s.bandwidth()/2:l(new Date(x?j.name:f.name));o.append("rect").attr("class","hover-line").attr("x",v).attr("y",a(c)).attr("width",1).attr("height",a(0)-i).attr("fill","#ccc").attr("z-index",999);var O=o.append("g").attr("class","hover-group").attr("pointer-events","none").attr("transform","translate(".concat(v+5,", ").concat(a(c),")"));O.append("rect").attr("class","hover-container").attr("fill","white").attr("stroke","#ccc").attr("width",100).attr("height",42),O.append("rect").attr("class","hover-header-container").attr("fill","#aaa").attr("width",100).attr("height",20),O.append("rect").attr("class","hover-divider").attr("fill","#ccc").attr("width",1).attr("height",22).attr("y",20);var g=O.append("text").text("string"===typeof m||"number"===typeof m?m:Object(se.a)(new Date(x?j.name:f.name),"dd/MM/yyyy")).attr("transform","translate(5, 15)").attr("fill","#fff").attr("font-size",12).attr("font-weight","bold").node().getComputedTextLength(),y=O.append("text").text(r[0]).attr("transform","translate(5, 35)").attr("color","black").attr("font-size",12).node().getComputedTextLength(),w=O.append("text").text(le((x?j:f).value)).attr("transform","translate(".concat(y+15,", 35)")).attr("color","black").attr("font-size",12).node().getComputedTextLength();S.q(".hover-container").attr("width",Math.max(g,y+w)+20),S.q(".hover-header-container").attr("width",Math.max(g,y+w)+20),S.q(".hover-divider").attr("x",y+10),v+O.node().getBBox().width+50>e.node().getBBox().width&&O.attr("transform","translate(".concat(v-O.node().getBBox().width-5,", ").concat(a(c),")"))}})).on("mouseleave",(function(){o.selectAll(".hover-line").remove(),o.selectAll(".hover-group").remove()}))}function ue(e,t){return"".concat(e,"-").concat(t)}function de(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0],c=Object(r.useContext)(z).disability;return Object(r.useEffect)((function(){var t,n=40,r=30,i=40,s=10,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",ue(a,"group-data")),d=l.append("g").attr("id",ue(a,"group-axis")),m=e.data.map((function(e){return e.name})),p=S.j(e.data,(function(e){return e.value})),b=S.l().domain(m).paddingInner(.1).paddingOuter(.1).range([i,o-s]),f=S.m().domain([0,p]).range([400-r,n]),j=C(c,m),h=S.a(b),x=S.b(f);return u.selectAll("rect.data-item").data(e.data).enter().append("rect").attr("class","data-item").attr("x",(function(e){return b(e.name)})).attr("y",(function(e){return f(e.value)})).attr("width",b.bandwidth()).attr("height",(function(e){return f(0)-f(e.value)})).attr("fill",(function(e){return j(e.name)})).attr("pointer-events","none"),d.append("g").call(h).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(x).attr("transform","translate(".concat(i,", 0)")),ie(l,a,i,j.domain().length>j.range().length?e.keys:j.domain(),j),oe(l,a,f,e.data,e.keys,p,n,b),function(){l.remove()}}),[a,e,c]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}function me(){return(me=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("".concat(h,"/api/dashboard-recommendation/").concat(t,"/spec")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return"".concat(e,"-").concat(t)}function be(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0];return Object(r.useEffect)((function(){var t,n=40,r=30,c=80,i=80,s=400,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",s),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",pe(a,"group-data")),d=l.append("g").attr("id",pe(a,"group-axis")),m=S.j(e.data,(function(e){return e.value})),p=S.d(e.data,(function(e){return new Date(e.name)})),b=S.o().domain(p).range([c,o-i]),f=S.m().domain([0,m]).range([s-r,n]),j=S.a(b),h=S.b(f),x=S.i().defined((function(e){return!isNaN(e.value)})).x((function(e){return b(new Date(e.name))})).y((function(e){return f(e.value)}));return u.append("path").datum(e.data).attr("d",x).attr("width",o).attr("height",s).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round"),d.append("g").call(j).attr("transform","translate(0, ".concat(s-r,")")),d.append("g").call(h).attr("transform","translate(".concat(c,", 0)")),ie(l,a,c,e.keys,(function(){return"steelblue"})),oe(l,a,f,e.data,e.keys,m,n,null,b),function(){l.remove()}}),[a,e]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}var fe=a(477),je=a(478),he=a(479),xe=a(483),ve=a(480);function Oe(e,t){return"".concat(e,"-").concat(t)}function ge(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0];return Object(r.useEffect)((function(){var t,n=10,r=30,c=80,i=80,s=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",250),l=null===(t=s.node())||void 0===t?void 0:t.getBoundingClientRect().width,o=s.append("g").attr("id",Oe(a,"group-data")),u=s.append("g").attr("id",Oe(a,"group-axis")),d=function(e){return new Date(e.name)},m=S.j(e.data,(function(e){return e.value})),p=Array.from(Array(7)).map((function(e,t){return Object(se.a)(Object(fe.a)(Object(je.a)(new Date),t),"E")})),b=function(e){return Object(se.a)(Object(je.a)(d(e)),"dd/MM/yyyy")},f=Object(re.a)(new Set(e.data.map((function(e){return b(e)})))),j=S.l().domain(f).range([c,l-i]).padding(.1),h=S.l().range([250-r,n]).domain(p).padding(.1);o.selectAll("rect").data(e.data.filter((function(e){return!isNaN(e.value)}))).enter().append("rect").attr("x",(function(e){return j(b(e))})).attr("y",(function(e){return h(p[Object(he.a)(d(e))])})).attr("width",j.bandwidth()).attr("height",h.bandwidth()).attr("fill",(function(e){return S.g(e.value/m)}));var x=S.d(e.data,(function(e){return Object(xe.a)(e.name,"yyyy/MM/dd",new Date)})),v=Object(ve.a)(x[1],x[0]),O=S.a(j).tickValues(j.domain().filter((function(e,t){return!(t%Math.ceil(.0065*v))}))),g=S.b(h);return u.append("g").call(O).attr("transform","translate(0, ".concat(250-r,")")),u.append("g").call(g).attr("transform","translate(".concat(c,", 0)")),function(){s.remove()}}),[a,e]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}var ye=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function we(e,t){return"".concat(e,"-").concat(t)}function Ne(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0],c=Object(r.useContext)(z).disability;return Object(r.useEffect)((function(){var t,n={top:40,bottom:30,left:0,right:10},r=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",450),i=null===(t=r.node())||void 0===t?void 0:t.getBoundingClientRect().width,s=r.append("g").attr("id",we(a,"group-data")),l=r.append("g").attr("id",we(a,"group-axis")),o=e.data.map((function(e){return e.name})),u=S.j(e.data,(function(e){return e.value})),d=0;r.append("g").selectAll(".dummyText").data(o).enter().append("text").attr("font-family","sans-serif").attr("font-size","14px").text((function(e){return e})).each((function(){var e=this.getComputedTextLength()+10;e>d&&(d=e),this.remove()})),n.left=d;var m=S.m().domain([0,u]).range([n.left,i-n.right]),p=S.l().domain(o).paddingInner(.1).paddingOuter(.1).range([n.top,450-n.bottom]),f=C(c,o),j=S.a(m),h=S.b(p);return s.selectAll("rect.data-item").data(e.data).enter().append("rect").attr("class","data-item").attr("x",m(0)).attr("y",(function(e){return p(e.name)})).attr("width",(function(e){return m(e.value)-m(0)})).attr("height",p.bandwidth()).attr("fill",(function(e){return f(e.name)})).attr("pointer-events","none"),l.append("g").call(j).attr("transform","translate(0, ".concat(450-n.bottom,")")),l.append("g").call(h).attr("transform","translate(".concat(n.left,", 0)")).attr("class","y-axis"),ie(r,a,n.left,f.domain().length>f.range().length?e.keys:f.domain(),f),function(e,t,a,n,r,c,i,s,l){var o=e.append("g").attr("id",E(t,"group-data"));e.on("mousemove",(function(t){var i=S.k(t),u=Object(b.a)(i,2),d=u[0],m=u[1],p=s?D(s)(m):l.invert(m),f=n.findIndex((function(e){return"string"===typeof p?e.name===p:e.name===Object(se.a)(p,"yyyy/MM/dd")}));if(o.selectAll(".hover-line").remove(),o.selectAll(".hover-group").remove(),f>=0){var j=n[f],h=n[f+1],x=0,v=!1;h&&l&&(x=Math.abs(l(new Date(j.name))-l(new Date(h.name)))/2,v=m>l(new Date(j.name))+x);var O=s?s(j.name)+s.bandwidth()/2:l(new Date(v?h.name:j.name));o.append("rect").attr("class","hover-line").attr("x",a(0)).attr("y",O).attr("width",a(c)).attr("height",1).attr("fill","#ccc").attr("z-index",999);var g=o.append("g").attr("class","hover-group").attr("pointer-events","none").attr("transform","translate(".concat(d,", ").concat(O+5,")"));g.append("rect").attr("class","hover-container").attr("fill","white").attr("stroke","#ccc").attr("width",100).attr("height",42),g.append("rect").attr("class","hover-header-container").attr("fill","#aaa").attr("width",100).attr("height",20),g.append("rect").attr("class","hover-divider").attr("fill","#ccc").attr("width",1).attr("height",22).attr("y",20);var y=g.append("text").text("string"===typeof p?p:Object(se.a)(new Date(v?h.name:j.name),"dd/MM/yyyy")).attr("transform","translate(5, 15)").attr("fill","#fff").attr("font-size",12).attr("font-weight","bold").node().getComputedTextLength(),w=g.append("text").text(r[0]).attr("transform","translate(5, 35)").attr("color","black").attr("font-size",12).node().getComputedTextLength(),N=g.append("text").text(ye((v?h:j).value)).attr("transform","translate(".concat(w+15,", 35)")).attr("color","black").attr("font-size",12).node().getComputedTextLength();S.q(".hover-container").attr("width",Math.max(w+N,y)+20),S.q(".hover-header-container").attr("width",Math.max(w+N,y)+20),S.q(".hover-divider").attr("x",w+10);var k=d+g.node().getBBox().width,M=O+g.node().getBBox().height,A=d,B=O+5;k+50>e.node().getBBox().width&&(A=d-g.node().getBBox().width-5),M+50>e.node().getBBox().height&&(B=O-g.node().getBBox().height-5),g.attr("transform","translate(".concat(A,", ").concat(B,")"))}})).on("mouseleave",(function(){o.selectAll(".hover-line").remove(),o.selectAll(".hover-group").remove()}))}(r,a,m,e.data,e.keys,u,n.left,p),function(){r.remove()}}),[a,e,c]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}var ke=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function Se(e,t,a,n,r,c,i,s,l){var o=e.append("g").attr("id",E(a,"group-data"));t.selectAll("g.group-area").data(i).enter().append("rect").attr("class","group-area").attr("x",(function(e){return n(0)})).attr("y",(function(e){return r(e.name)})).attr("width",(function(e){return n(s)-l})).attr("height",(function(e){return r.bandwidth()})).attr("fill","transparent").on("mousemove",(function(t,a){var i=S.k(t),l=Object(b.a)(i,1)[0];o.selectAll(".hover-line").remove(),o.selectAll(".hover-group").remove();var u=r(a.name)+r.bandwidth()/2,d=22+20*a.values.length;o.append("rect").attr("class","hover-line").attr("x",n(0)).attr("y",u).attr("width",n(s)).attr("height",1).attr("fill","#ccc").attr("z-index",999);var m=o.append("g").attr("class","hover-group").attr("pointer-events","none").attr("transform","translate(".concat(l,", ").concat(u+5,")"));m.append("rect").attr("class","hover-container").attr("fill","white").attr("stroke","#ccc").attr("width",100).attr("height",d),m.append("rect").attr("class","hover-header-container").attr("fill","#aaa").attr("width",100).attr("height",20),m.append("rect").attr("class","hover-divider").attr("fill","#ccc").attr("width",1).attr("height",2+20*a.values.length).attr("y",20);var p=m.append("text").text(a.name).attr("transform","translate(5, 15)").attr("fill","#fff").attr("font-size",12).attr("font-weight","bold").node().getComputedTextLength();m.selectAll("rect.color-item").data(a.values).enter().append("rect").attr("class","color-item").attr("transform",(function(e,t){return"translate(5, ".concat(23+20*t,")")})).attr("width",15).attr("height",15).attr("rx",5).attr("fill",(function(e){return c(e.name)}));var f=0;m.selectAll("text.text-title").data(a.values).enter().append("text").text((function(e){return e.name})).attr("class","text-title").attr("transform",(function(e,t){return"translate(24, ".concat(35+20*t,")")})).attr("color","black").attr("font-size",12).each((function(){f=Math.max(f,this.getComputedTextLength()+35)}));var j=0;m.selectAll("text.text-value").data(a.values).enter().append("text").text((function(e){return ke(e.value)})).attr("class","text-value").attr("transform",(function(e,t){return"translate(".concat(f+15,", ").concat(35+20*t,")")})).attr("color","black").attr("font-size",12).each((function(){j=Math.max(j,this.getComputedTextLength()+10)})),S.q(".hover-container").attr("width",Math.max(f+j,p)+20),S.q(".hover-header-container").attr("width",Math.max(f+j,p)+20),S.q(".hover-divider").attr("x",f+10);var h=l+m.node().getBBox().width,x=u+m.node().getBBox().height,v=l,O=u+5;h+50>e.node().getBBox().width&&(v=l-m.node().getBBox().width-5),x+50>e.node().getBBox().height&&(O=u-m.node().getBBox().height-5),m.attr("transform","translate(".concat(v,", ").concat(O,")"))})).on("mouseleave",(function(){o.selectAll(".hover-line").remove(),o.selectAll(".hover-group").remove()}))}function Me(e,t){return"".concat(e,"-").concat(t)}function Ae(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0],c=Object(r.useContext)(z).disability;return Object(r.useEffect)((function(){var t,n=40,r=30,i=100,s=10,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",Me(a,"group-data")),d=l.append("g").attr("id",Me(a,"group-axis")),m=Number.MIN_SAFE_INTEGER;e.data.sort((function(e,t){return e.name2.localeCompare(t.name2)}));var p=e.data.reduce((function(e,t){var a=e.find((function(e){return e.name===t.name}));return a||(a={name:t.name,total:0,values:[]},e.push(a)),a.values.push({name:t.name2,start:a.total,end:a.total+t.value,value:t.value}),a.total+=t.value,a.total>=m&&(m=a.total),e}),[]),b=p.map((function(e){return e.name})).reverse(),f=Object(re.a)(new Set(p.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),j=S.m().domain([0,m]).range([i,o-s]),h=S.l().domain(b).paddingInner(.1).paddingOuter(.1).range([400-r,n]),x=C(c,f),v=S.a(j),O=S.b(h);return Se(l,u,a,j,h,x,p,m,i),u.selectAll("g.group-item").data(p).enter().append("g").attr("class","group-item").attr("transform",(function(e){return"translate(0, ".concat(h(e.name),")")})).selectAll("rect.data-item").data((function(e){return e.values})).enter().append("rect").attr("class","data-item").attr("x",(function(e){return j(e.start)})).attr("width",(function(e){return j(e.end)-j(e.start)})).attr("height",h.bandwidth()).attr("fill",(function(e){return x(e.name)})).attr("pointer-events","none"),d.append("g").call(v).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(O).attr("transform","translate(".concat(i,", 0)")),ie(l,a,i,f,x),function(){l.remove()}}),[a,e,c]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}var De=a(482),Be=a(6);function Ce(e,t){return"".concat(e,"-").concat(t)}var Ee=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function Ie(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0],c=Object(r.useContext)(z).disability;return Object(r.useEffect)((function(){var t,n,r=40,i=30,s=80,l=80,o=400,u=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",o),d=null===(t=u.node())||void 0===t?void 0:t.getBoundingClientRect().width,m=u.append("g").attr("id",Ce(a,"group-data")),p=u.append("g").attr("id",Ce(a,"group-axis")),f=S.j(e.data,(function(t){return S.j(Object.keys(t.values).filter((function(t){return"left"===e.axis[t]})).map((function(e){return t.values[e]})))})),j=S.j(e.data,(function(t){return S.j(Object.keys(t.values).filter((function(t){return"right"===e.axis[t]})).map((function(e){return t.values[e]})))})),h=Object.values(e.axis).some((function(e){return"right"===e})),x=S.d(e.data,(function(e){return new Date(e.name)})),v=Object(re.a)(new Set([].concat(Object(re.a)(Object.keys(e.data[0].values)),Object(re.a)(Object.keys(e.data[1].values)),Object(re.a)(Object.keys(e.data[e.data.length-2].values)),Object(re.a)(Object.keys(e.data[e.data.length-1].values))))).filter((function(t){return e.axis[t]})),O=C(c,v),g=S.o().domain(x).range([s,d-l]),y=S.m().domain([0,f]).range([o-i,r]),w=S.m().domain([0,j]).range([o-i,r]),N=S.a(g),k=S.b(y),M=S.c(w),A=Object(ce.a)(v);try{var D=function(){var t=n.value,a=S.i().defined((function(e){return!isNaN(e.values[t])})).x((function(e){return g(new Date(e.name))})).y((function(e){return y(e.values[t])})),r=S.i().defined((function(e){return!isNaN(e.values[t])})).x((function(e){return g(new Date(e.name))})).y((function(e){return w(e.values[t])}));m.append("path").datum(e.data).attr("d","left"===e.axis[t]?a:r).attr("width",d).attr("height",o).attr("fill","none").attr("stroke",O(t)).attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round")};for(A.s();!(n=A.n()).done;)D()}catch(I){A.e(I)}finally{A.f()}p.append("g").call(N).attr("transform","translate(0, ".concat(o-i,")")),p.append("g").call(k).attr("transform","translate(".concat(s,", 0)")),h&&p.append("g").call(M).attr("transform","translate(".concat(d-l,", 0)"));var B=v.reduce((function(t,a,n){return Object(q.a)(Object(q.a)({},t),{},Object(Be.a)({},a,e.keys[n]))}),{});ie(u,a,s,v,O,B);var E=u.append("g").attr("id",Ce(a,"group-data"));return u.on("mousemove",(function(t){var a=S.k(t),n=Object(b.a)(a,1)[0],c=g.invert(n),i=e.data.findIndex((function(e){return e.name===Object(se.a)(c,"yyyy/MM/dd")}));if(E.selectAll(".hover-line").remove(),E.selectAll(".hover-group").remove(),i>=0){var s=e.data[i],l=e.data[i+1],o=0,d=!1;l&&g&&(o=Math.abs(g(new Date(s.name))-g(new Date(l.name)))/2,d=n>g(new Date(s.name))+o);var m=g(new Date(d?l.name:s.name)),p=22+20*v.length;E.append("rect").attr("class","hover-line").attr("x",m).attr("y",y(f)).attr("width",1).attr("height",y(0)-r).attr("fill","#ccc").attr("z-index",999);var j=E.append("g").attr("class","hover-group").attr("pointer-events","none").attr("transform","translate(".concat(m+5,", ").concat(y(f),")"));j.append("rect").attr("class","hover-container").attr("fill","white").attr("stroke","#ccc").attr("width",100).attr("height",p),j.append("rect").attr("class","hover-header-container").attr("fill","#aaa").attr("width",100).attr("height",20),j.append("rect").attr("class","hover-divider").attr("fill","#ccc").attr("width",1).attr("height",2+20*v.length).attr("y",20),j.append("text").text("string"===typeof c?c:Object(se.a)(new Date(d?l.name:s.name),"dd/MM/yyyy")).attr("transform","translate(5, 15)").attr("fill","#fff").attr("font-size",12).attr("font-weight","bold"),j.selectAll("rect.color-item").data(v).enter().append("rect").attr("class","color-item").attr("transform",(function(e,t){return"translate(5, ".concat(23+20*t,")")})).attr("width",15).attr("height",15).attr("rx",5).attr("fill",(function(e){return O(e)}));var h=0;j.selectAll("text.text-title").data(v).enter().append("text").text((function(e){return B[e]})).attr("class","text-title").attr("transform",(function(e,t){return"translate(24, ".concat(35+20*t,")")})).attr("color","black").attr("font-size",12).each((function(){h=Math.max(h,this.getComputedTextLength()+35)}));var x=0;j.selectAll("text.text-value").data(v).enter().append("text").text((function(e){return s.values[e]?Ee(s.values[e]):"-"})).attr("class","text-value").attr("transform",(function(e,t){return"translate(".concat(h+15,", ").concat(35+20*t,")")})).attr("color","black").attr("font-size",12).each((function(){x=Math.max(x,this.getComputedTextLength()+10)})),S.q(".hover-container").attr("width",h+x+20),S.q(".hover-header-container").attr("width",h+x+20),S.q(".hover-divider").attr("x",h+10),m+j.node().getBBox().width+50>u.node().getBBox().width&&j.attr("transform","translate(".concat(m-j.node().getBBox().width-5,", ").concat(y(f),")"))}})).on("mouseleave",(function(){E.selectAll(".hover-line").remove(),E.selectAll(".hover-group").remove()})),function(){u.remove()}}),[a,e,c]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}var Te=function(e){var t=Object(r.useState)(Object(ae.c)()),a=Object(b.a)(t,1)[0];return Object(r.useEffect)((function(){S.h("".concat(h,"/").concat(e.geofile)).then((function(t){var n,r=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",600),c=null===(n=r.node())||void 0===n?void 0:n.getBoundingClientRect().width,i=S.e().fitExtent([[20,20],[c,600]],t),s=S.f().projection(i),l=S.j(e.data,(function(e){return e.value}));return r.append("g").selectAll("path").data(t.features).enter().append("path").attr("d",s).style("fill",(function(t){return function(t){var a=e.data.find((function(e){return e.name.trim()===t.properties.name}));return a?S.g(a.value/l):"white"}(t)})).style("stroke","#ccc").attr("alt",(function(e){return e.properties.name})),function(){r.remove()}}))}),[a,e.data,e.geofile]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})},Le=a(215),Fe=a.n(Le);function Re(e){var t=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(!a.current){var n=Number.MAX_VALUE,r=Number.MIN_VALUE,c=Number.MAX_VALUE,i=Number.MIN_VALUE,s=e.data.filter((function(e){return e.value>0})).map((function(e){return n=Math.min(n,+e.latitude),r=Math.max(r,+e.latitude),c=Math.min(c,+e.longitude),i=Math.max(i,+e.longitude),{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{title:e.name}}}));a.current=new Fe.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",zoom:9,bounds:[[n,r],[c,i]]}),a.current.on("load",(function(){a.current.addSource("points",{type:"geojson",cluster:!0,clusterMaxZoom:14,clusterRadius:50,data:{type:"FeatureCollection",features:s}}),a.current.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-color":"#919ad7","circle-opacity":.7,"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),a.current.addLayer({id:"points-count",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}})}))}}),[e.data]),Object(n.jsx)("div",{className:"relative mb-4 mt-4",style:{height:600},children:Object(n.jsx)("div",{ref:t,className:"map-container mapContainer"})})}function ze(e,t){return"".concat(e,"-").concat(t)}function Ve(e){var t=Object(r.useState)(A()),a=Object(b.a)(t,1)[0],c=Object(r.useContext)(z).disability;return Object(r.useEffect)((function(){var t,n=40,r=30,i=100,s=10,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",ze(a,"group-data")),d=l.append("g").attr("id",ze(a,"group-axis")),m=Number.MIN_SAFE_INTEGER;e.data.sort((function(e,t){return e.name2.localeCompare(t.name2)}));var p=e.data.reduce((function(e,t){var a=e.find((function(e){return e.name===t.name}));return a||(a={name:t.name,values:[]},e.push(a)),a.values.push({name:t.name2,value:t.value}),t.value>=m&&(m=t.value),e}),[]),b=p.map((function(e){return e.name})).reverse(),f=Object(re.a)(new Set(p.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),j=Object(re.a)(new Set(p.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),h=S.m().domain([0,m]).range([i,o-s]),x=S.l().domain(b).paddingInner(.1).paddingOuter(.1).range([400-r,n]),v=S.l().domain(f).paddingInner(.1).paddingOuter(.1).range([0,x.bandwidth()]),O=C(c,j),g=S.a(h),y=S.b(x),w=u.selectAll("g.group-item").data(p).enter().append("g").attr("class","group-item").attr("transform",(function(e){return"translate(0, ".concat(x(e.name),")")})).selectAll("rect.data-item").data((function(e){return e.values})).enter().append("g").attr("class","data-item");return w.append("rect").attr("x",(function(e){return h(0)})).attr("y",(function(e){return v(e.name)})).attr("width",(function(e){return h(e.value)})).attr("height",v.bandwidth()).attr("fill",(function(e){return O(e.name)})).attr("pointer-events","none"),w.append("text").attr("x",(function(e){return h(0)+5})).attr("y",(function(e){return v(e.name)+v.bandwidth()-5})).attr("font-size","12px").text((function(e){return e.name})),d.append("g").call(g).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(y).attr("transform","translate(".concat(i,", 0)")),ie(l,a,i,j,O),Se(l,u,a,h,x,O,p,m,i),function(){l.remove()}}),[a,e,c]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{id:a})})}function Ue(e){return isNaN(+e)?void 0:+e}Fe.a.accessToken="pk.eyJ1IjoicGF1bG9tZW5lemVzIiwiYSI6ImNrMHZrc3Z2NjEwODMzbG52emduZWFkeTIifQ.fUByXk2mj50HO1xPDiTr5w";var qe=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function Pe(){var e=Object(r.useState)(void 0),t=Object(b.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(b.a)(i,2),o=s[0],u=s[1],d=Object(r.useState)(),m=Object(b.a)(d,2),p=m[0],f=m[1],j=Object(r.useState)([]),h=Object(b.a)(j,2),x=h[0],v=h[1],O=Object(l.g)().id;return Object(r.useEffect)((function(){return X(+O).then((function(e){(function(e){return me.apply(this,arguments)})(e.id).then((function(t){c(t);var a=[];f(t.pages[0].name);var n,r=e.userDatasets[0].owner.preferences?e.userDatasets[0].owner.preferences.clampStrings:30,i=Object(ce.a)(t.pages);try{for(i.s();!(n=i.n()).done;){var s,l=n.value,o=Object(ce.a)(l.charts);try{var d=function(){var e=s.value;if(e.multipleLines){var t=Object(re.a)(new Set(e.multipleLines.specs.map((function(e){return e.userDimension.name})))),n=Object(re.a)(new Set(e.multipleLines.specs.map((function(e){return e.userMeasure.name}))));a.push({page:l.name,type:"multiple-line",name:t.length>1?"".concat(n[0]," by ").concat(t.join(", ")):"".concat(n.join(", ")," by ").concat(t[0]),values:e.multipleLines.data,axis:e.multipleLines.axis,keysTitle:t.length>1?t:n})}else if(3===Object.keys(e.encoding).length){var c=e.encoding.color.field.toString();e.userMeasure.aggregate===ae.b.Mean?a.push({page:l.name,type:e.key===e.encoding.x.field?"grouped-vertical-bar":"grouped-horizontal-bar",name:"".concat(e.userMeasure.name," by ").concat(e.trimValues?"Top ".concat(r):""," ").concat(e.userDimension.name," and ").concat(e.userSecondDimension.name),values:e.data.values.map((function(t){return{name:t[e.key],name2:t[c],value:Ue(t[e.value])}}))}):a.push({page:l.name,type:e.key===e.encoding.x.field?"stacked-vertical-bar":"stacked-horizontal-bar",name:"".concat(e.userMeasure.name," by ").concat(e.trimValues?"Top ".concat(r):""," ").concat(e.userDimension.name," and ").concat(e.userSecondDimension.name),values:e.data.values.map((function(t){return{name:t[e.key],name2:t[c],value:Ue(t[e.value])}}))})}else if("text"===e.mark)a.push({page:l.name,type:e.mark,name:e.value,values:[{name:e.value,value:+e.data.values[0]}]});else if("geo-lat-lng"===e.mark)a.push({page:l.name,type:e.mark,name:"".concat(e.value," ").concat(e.userDimension.name," map"),values:e.data.values.map((function(t){return{name:t[e.key],value:Ue(t[e.value]),latitude:t.latitude,longitude:t.longitude}}))});else{var i,o;a.push({page:l.name,type:"bar"===e.mark?e.key===e.encoding.x.field?"vertical-bar":"horizontal-bar":e.mark,name:"".concat(e.userMeasure.name," of ").concat(e.trimValues?"Top ".concat(r):""," ").concat(null!==(i=null===e||void 0===e||null===(o=e.userDimension)||void 0===o?void 0:o.name)&&void 0!==i?i:e.key," ").concat("heatmap"===e.mark?"heatmap":""),values:e.data.values.map((function(t){return{name:t[e.key],value:Ue(t[e.value])}})),geofile:e.geoFile,keysTitle:[e.userMeasure.name]})}};for(o.s();!(s=o.n()).done;)d()}catch(m){o.e(m)}finally{o.f()}}}catch(m){i.e(m)}finally{i.f()}console.log(a),u(a)}))})),function(){u([]),v([])}}),[O]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex flex-wrap mb-2",children:a&&a.pages.length>1&&a.pages.map((function(e){return Object(n.jsx)("button",{type:"button",className:"button button-primary mr-2 mb-2 ".concat(M(e.name===p,"active")),onClick:function(){return f(e.name)},children:e.name},e.name)}))}),Object(n.jsx)("div",{className:"flex -mx-4 mb-4",children:o&&o.filter((function(e){return"text"===e.type})).map((function(e){return Object(n.jsx)(L,{title:e.name,className:"mx-4",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("h3",{children:qe(e.values[0].value)})},e.name)},e.name)}))}),Object(n.jsx)("div",{className:"space-y-4",children:o&&o.filter((function(e){return e.page===p&&"text"!==e.type})).map((function(e,t){return Object(n.jsx)("div",{children:Object(n.jsxs)(L,{title:e.name,children:["geoshape"===e.type&&Object(n.jsx)(Te,{name:e.name,geofile:e.geofile,data:e.values}),"geo-lat-lng"===e.type&&Object(n.jsx)(Re,{name:e.name,data:e.values}),"multiple-line"===e.type&&Object(n.jsx)(Ie,{name:e.name,data:e.values,axis:e.axis,keys:e.keysTitle}),"line"===e.type&&Object(n.jsx)(be,{name:e.name,data:e.values,keys:e.keysTitle}),"heatmap"===e.type&&Object(n.jsx)(ge,{name:e.name,data:e.values}),"vertical-bar"===e.type&&Object(n.jsx)(de,{name:e.name,data:e.values,keys:e.keysTitle}),"horizontal-bar"===e.type&&Object(n.jsx)(Ne,{name:e.name,data:e.values,keys:e.keysTitle}),"stacked-horizontal-bar"===e.type&&Object(n.jsx)(Ae,{name:e.name,data:e.values}),"grouped-horizontal-bar"===e.type&&Object(n.jsx)(Ve,{name:e.name,data:e.values})]})},"".concat(e.name,"-").concat(t))}))}),x&&x.filter((function(e){return"line"!==e.mark})).map((function(e){return Object(n.jsx)("span",{children:Object(n.jsx)(De.a,{spec:e,data:e.data})})}))]})}function Ge(e,t){var a=Object(r.useState)(t),c=Object(b.a)(a,2),i=c[0],s=c[1];return[i,function(){return Object(n.jsx)("div",{className:"flex items-start",children:e&&e.map((function(e){return Object(n.jsx)("button",{type:"button",className:"button button-primary rounded-none first:rounded-l-md last:rounded-r-md ".concat(M(i===e.type,"active")),onClick:function(){return s(e.type)},children:e.label},e.type)}))})},s]}function _e(){var e=Object(l.f)(),t=Ge([{type:"LOW",label:"Low"},{type:"MEDIUM",label:"Medium"},{type:"HIGH",label:"High"}],"LOW"),a=Object(b.a)(t,2),r=a[0],c=a[1],i=Ge([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),s=Object(b.a)(i,2),o=s[0],u=s[1],d=Ge([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),m=Object(b.a)(d,2),p=m[0],f=m[1],j=Object(P.c)({initialValues:{name:"",disability:"",visLiteracy:""},onSubmit:function(t){(function(e){return g.apply(this,arguments)})({name:t.name,disability:["true"===o&&"colorBlind","true"===p&&"dyslexic"].filter(Boolean).join(", "),visLiteracy:r}).then((function(t){e.replace("/")}))}});return Object(n.jsx)("div",{className:"relative",children:Object(n.jsx)(L,{className:"min-h",title:"Add new user",children:Object(n.jsxs)("form",{className:"w-full max-w-lg",onSubmit:j.handleSubmit,children:[Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsx)("div",{className:"w-full px-3",children:Object(n.jsx)(ee,{name:"name",label:"Name",placeholder:"name",formik:j})})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Color blind"}),Object(n.jsx)(u,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Dyslexic"}),Object(n.jsx)(f,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Vis Literacy"}),Object(n.jsx)(c,{})]})}),Object(n.jsx)("button",{type:"submit",className:"button",children:"Save"})]})})})}function He(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),o=Object(b.a)(i,2),u=o[0],d=o[1],m=Object(l.g)().id;Object(r.useEffect)((function(){d(!0),function(e){return W.apply(this,arguments)}(+m).then((function(e){c(e),d(!1)}))}),[m]);var p=function(e,t){var a=e.userDatasets[0].columns.filter((function(e){return e.role===t&&!e.removed})).length;return a>0?Object(n.jsxs)(F,{children:[a," ",t.toLowerCase()," column",a>1?"s":""]}):null};return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(T,{loading:u}),!u&&0===a.length&&Object(n.jsx)(I,{title:"No dataset loaded",message:"Upload a CSV file or connect with a database.",className:"mx-4"}),!u&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(L,{title:e.name,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsx)(F,{children:"CSV"}),p(e,ae.a.MEASURE),p(e,ae.a.DIMENSION),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(f.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(f.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)(s.b,{to:"/dashboard/view/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"eye"}),"View"]}),Object(n.jsxs)(s.b,{to:"/dashboard/".concat(e.id,"/edit"),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"pencil-alt"}),"Edit"]})]})]})},e.id)}))]})}function Ye(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),l=Object(b.a)(i,2),o=l[0],u=l[1],d=function(){u(!0),function(){return G.apply(this,arguments)}().then((function(e){c(e),u(!1)}))};Object(r.useEffect)((function(){d()}),[]);var m=function(e,t){var a=e.columns.filter((function(e){return e.role===t})).length;return a>0?Object(n.jsxs)(F,{children:[a," ",t.toLowerCase()," column",a>1?"s":""]}):null};return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(T,{loading:o}),!o&&0===a.length&&Object(n.jsx)(I,{title:"No dataset loaded",message:"Upload a CSV file or connect with a database.",className:"mx-4"}),!o&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(L,{title:e.originalname,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsx)(F,{children:"CSV"}),m(e,ae.a.MEASURE),m(e,ae.a.DIMENSION),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(f.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(f.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsxs)(s.b,{to:"/dashboard/add/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"pencil-alt",className:"mr-1"}),"Create new dashboard"]})})]})},e.id)}))]})}function We(){var e=Object(l.g)().id,t=Object(r.useContext)(z);return Object(r.useEffect)((function(){v(+e).then((function(a){t.signIn(e,a.disability)}))}),[e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(s.b,{to:"/dataset/add",className:"button button-primary",children:"Add new dataset"})}),Object(n.jsx)("div",{className:"text-lg mt-3",children:"My dashboards"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(He,{})}),Object(n.jsx)("div",{className:"text-lg",children:"Public datasets"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(Ye,{})})]})}function Xe(){var e=Object(r.useContext)(z).user,t=Object(r.useState)(!1),a=Object(b.a)(t,2),c=a[0],i=a[1],s=Object(l.f)(),o=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.persist(),!a.target.files){t.next=13;break}return t.prev=2,i(!0),t.next=6,H(e,a.target.files[0]);case 6:n=t.sent,s.push("/dashboard/add/".concat(n.id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)(L,{className:"min-h",children:[Object(n.jsx)(T,{loading:c}),!c&&Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",children:"Upload a file:"}),Object(n.jsxs)("div",{className:"mt-2",children:[Object(n.jsx)("label",{htmlFor:"file",className:"button",children:"Select a file"}),Object(n.jsx)("input",{type:"file",className:"hide",name:"file",id:"file",onChange:o})]})]})]})})}var Ze=Object(l.h)((function(){var e=Object(l.f)(),t=Object(r.useContext)(z),a=t.user,c=t.signOut;return Object(n.jsxs)("header",{className:"bg-yellow-500 p-3 text-white text-lg font-bold flex justify-between",children:[Object(n.jsx)(s.b,{to:"/",children:"Juno"}),a&&Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{type:"button",onClick:function(){return e.replace("/preferences")},className:"mr-4",children:"Preferences"}),Object(n.jsx)("button",{type:"button",onClick:function(){c(),e.replace("/")},children:"Sair"})]})]})}));function Je(e){var t=e.name,a=e.label,r=e.disabled,c=e.formik,i=e.checked;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("input",Object(q.a)({id:t,type:"checkbox",checked:i,className:"rounded bg-gray-200 border-transparent focus:border-transparent focus:bg-gray-200 text-gray-700 focus:ring-1 focus:ring-offset-2 focus:ring-gray-500",disabled:r},c.getFieldProps(t)))]})}for(var Ke=["NUMBER","STRING","DATE"],Qe=[],$e=0,et=Ke;$e<et.length;$e++){var tt,at=et[$e],nt=Object(ce.a)(Ke);try{for(nt.s();!(tt=nt.n()).done;){var rt=tt.value;at!==rt&&Qe.push({typeX:at,typeY:rt,chart:"AUTO"})}}catch(st){nt.e(st)}finally{nt.f()}}function ct(){var e=Object(r.useContext)(z).user,t=Object(l.f)(),a=Ge([{type:"LOW",label:"Low"},{type:"MEDIUM",label:"Medium"},{type:"HIGH",label:"High"}],"LOW"),c=Object(b.a)(a,3),i=c[0],s=c[1],o=c[2],u=Ge([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),d=Object(b.a)(u,3),m=d[0],p=d[1],f=d[2],j=Ge([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),h=Object(b.a)(j,3),x=h[0],O=h[1],g=h[2],y=Object(P.c)({initialValues:{stacked:!0,multiline:!0,rightAxis:!0,binValues:50,clampStrings:30,chartTypes:Qe},onSubmit:function(t){(function(e,t){return N.apply(this,arguments)})(+e,Object(q.a)(Object(q.a)({},t),{},{disability:["true"===m&&"colorBlind","true"===x&&"dyslexic"].filter(Boolean).join(", "),visLiteracy:i})).then((function(){w()}))}});Object(r.useEffect)((function(){v(+e).then((function(e){if(o(e.visLiteracy),f(e.disability.includes("colorBlind")?"true":"false"),g(e.disability.includes("dyslexic")?"true":"false"),e.preferences){y.setFieldValue("stacked",e.preferences.stacked),y.setFieldValue("multiline",e.preferences.multiline),y.setFieldValue("rightAxis",e.preferences.rightAxis),y.setFieldValue("binValues",e.preferences.binValues),y.setFieldValue("clampStrings",e.preferences.clampStrings);var t,a=Object(ce.a)(Ke);try{var n=function(){var a,n=t.value,r=Object(ce.a)(Ke);try{var c=function(){var t=a.value;if(n!==t){var r=e.preferences.chartTypes.findIndex((function(e){return e.typeX===n&&e.typeY===t}));y.setFieldValue("chartTypes.".concat(r,".chart"),e.preferences.chartTypes[r].chart)}};for(r.s();!(a=r.n()).done;)c()}catch(st){r.e(st)}finally{r.f()}};for(a.s();!(t=a.n()).done;)n()}catch(st){a.e(st)}finally{a.f()}}}))}),[e]);var w=function(){t.replace("/")};return Object(n.jsx)(L,{title:"Preferences",children:Object(n.jsxs)("form",{className:"w-full",onSubmit:y.handleSubmit,children:[Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Color blind"}),Object(n.jsx)(p,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Dyslexic"}),Object(n.jsx)(O,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Vis Literacy"}),Object(n.jsx)(s,{})]})}),Object(n.jsx)("div",{className:"font-bold",children:"Based on chart types:"}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Je,{checked:y.values.stacked,name:"stacked",label:"Stacked bars when possible",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Je,{checked:y.values.multiline,name:"multiline",label:"Multiline charts",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Je,{checked:y.values.rightAxis,name:"rightAxis",label:"Line charts with right axis",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(ee,{name:"binValues",label:"Bin quantitative columns higher than",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(ee,{name:"clampStrings",label:"Clamp string columns with more distinct values than",formik:y}),Object(n.jsx)("div",{className:"font-bold",children:"Based on chart types:"}),Object(n.jsx)("hr",{className:"my-2"}),Qe.map((function(e,t){return Object(n.jsxs)("div",{className:"flex -mx-4 mb-3",children:[Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(ee,{name:"chartTypes.".concat(t,".typeX"),label:"Type X",disabled:!0,formik:y})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(ee,{name:"chartTypes.".concat(t,".typeY"),label:"Type Y",disabled:!0,formik:y})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(te,{name:"chartTypes.".concat(t,".chart"),label:"Chart Type",options:[{value:"AUTO",label:"Auto"},{value:"LINE",label:"Line"},{value:"BAR",label:"Bar"}],formik:y})})]},t)})),Object(n.jsxs)("div",{className:"flex justify-end",children:[Object(n.jsx)("button",{type:"button",className:"button mr-2",onClick:w,children:"Cancel"}),Object(n.jsx)("button",{type:"submit",className:"button button-primary",children:"Submit"})]})]})})}o.b.add(u.a);var it=function(){var e=Object(r.useContext)(z).disability;return Object(n.jsx)("div",{className:"App ".concat((null===e||void 0===e?void 0:e.includes("dyslexic"))?"dyslexic-font":""),children:Object(n.jsxs)(s.a,{children:[Object(n.jsx)(Ze,{}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"container mx-auto pt-4 mb-8",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/user/add",children:Object(n.jsx)(_e,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/dataset/add",children:Object(n.jsx)(Xe,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/add/:id",children:Object(n.jsx)(ne,{action:"add"})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/:id/edit",children:Object(n.jsx)(ne,{action:"edit"})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/view/:id",children:Object(n.jsx)(Pe,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/user/view/:id",children:Object(n.jsx)(We,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/preferences",children:Object(n.jsx)(ct,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(U,{})})]})})})]})})};i.a.render(Object(n.jsx)(r.StrictMode,{children:Object(n.jsx)(V,{children:Object(n.jsx)(it,{})})}),document.getElementById("root"))}},[[461,1,2]]]);
//# sourceMappingURL=main.3556c63d.chunk.js.map