(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{393:function(e,t,a){},394:function(e,t,a){},407:function(e,t){},408:function(e,t){},409:function(e,t){},410:function(e,t){},461:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),c=a(293),i=a.n(c),s=(a(393),a(394),a(30)),l=a(29),o=a(115),u=a(300),d=a(8),b=a.n(d),j=a(15),m=a(12),p=a(476),f=a(28),h="";function x(){return(x=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/user")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return v.apply(this,arguments)}function v(){return(v=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/user/").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("".concat(h,"/api/user"),{json:t}).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete("".concat(h,"/api/user/").concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(j.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("".concat(h,"/api/user/preferences/").concat(t),{json:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=a(43),S=a(14);function A(e,t){return t?e?t:"":e||""}function D(){return"juno-"+Math.random().toString(36).substr(2,9)}function M(e){return e.endsWith(".csv")&&(e=e.slice(0,-4)),(e=e.replaceAll("_"," ")).split(" ").map((function(e){return e.split(/(?=[A-Z])/)})).flat().map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ").replace(/\s+/g," ")}function E(e,t){return S.n((null===e||void 0===e?void 0:e.includes("colorBlind"))?t.length>4?["#3575B1"]:["#a6cee3","#1f78b4","#b2df8a","#33a02c"]:t.length>10?["#3575B1"]:S.p)}function C(e){var t=e.title,a=e.message,r=e.className;return Object(n.jsx)("div",{className:"bg-blue-100 border-blue-500 rounded-b text-blue-900 px-4 py-3 shadow-md w-full h-fit ".concat(A(r)),role:"alert",children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)("div",{className:"py-1 h-6 w-6 text-blue-500 mr-4",children:Object(n.jsx)(k.a,{icon:"info-circle"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"font-bold",children:t}),Object(n.jsx)("p",{className:"text-sm",children:a})]})]})})}function I(e){return e.loading?Object(n.jsx)("div",{className:"absolute top-1/2 left-1/2 -mt-4 -ml-4 h-40",children:Object(n.jsx)(k.a,{icon:"circle-notch",spin:!0,size:"2x",className:"text-orange-500"})}):Object(n.jsx)(n.Fragment,{})}function L(e){var t=e.title,a=e.className,r=e.children;return Object(n.jsxs)("div",{className:"w-full h-full rounded overflow-hidden shadow bg-white ".concat(A(a)),children:[t&&Object(n.jsx)("div",{className:"px-6 pt-4",children:Object(n.jsx)("div",{className:"font-bold text-xl mb-2 break-words",children:t})}),Object(n.jsx)("div",{className:"px-6 py-4",children:r})]})}function T(e){var t=e.children;return Object(n.jsx)("span",{className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:t})}function F(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),l=Object(m.a)(i,2),o=l[0],u=l[1],d=function(){u(!0),function(){return x.apply(this,arguments)}().then((function(e){c(e),u(!1)}))};Object(r.useEffect)((function(){d()}),[]);var f=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,y(t);case 3:d();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(I,{loading:o}),!o&&0===a.length&&Object(n.jsx)(C,{title:"No user added",message:"Add some user to start a new dashboard.",className:"mx-4"}),!o&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(L,{title:e.name,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsxs)(T,{children:["VisLiteracy: ",e.visLiteracy]}),e.disability&&Object(n.jsxs)(T,{children:["Disability: ",e.disability]}),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(p.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(p.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)(s.b,{to:"user/view/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"eye"}),"Login"]}),Object(n.jsxs)("button",{type:"button",className:"button button-danger button-small",onClick:function(){return f(e.id)},children:[Object(n.jsx)(k.a,{icon:"trash"}),"Delete"]})]})]})},e.id)}))]})}var V=Object(r.createContext)(void 0);function R(e){var t=Object(r.useState)(localStorage.getItem("user")),a=Object(m.a)(t,2),c=a[0],i=a[1],s=Object(r.useState)(localStorage.getItem("disability")),l=Object(m.a)(s,2),o=l[0],u=l[1];return Object(n.jsx)(V.Provider,{value:{user:c,disability:o,signIn:function(e,t){localStorage.setItem("user",e),localStorage.setItem("disability",t),i(e),u(t)},signOut:function(){localStorage.removeItem("user"),localStorage.removeItem("disability"),i(void 0),u(void 0)}},children:e.children})}function B(){var e=Object(l.f)(),t=Object(r.useContext)(V).user;return t&&e.replace("/user/view/".concat(t)),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(s.b,{to:"/user/add",className:"button button-primary",children:"Add new user"})}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(F,{})})]})}var U=a(23),P=a(80);function z(){return(z=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/dataset")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/dataset/").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return q.apply(this,arguments)}function q(){return(q=Object(j.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",a),n.append("user",t),e.abrupt("return",f.a.post("".concat(h,"/api/dataset/upload"),{body:n}).json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/dashboard?user=").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/dashboard/").concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("".concat(h,"/api/dashboard"),{json:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.put("".concat(h,"/api/dashboard"),{json:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=e.name,a=e.label,r=e.type,c=e.placeholder,i=e.disabled,s=e.formik;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("input",Object(U.a)({className:"input",id:t,type:r||"text",placeholder:c||"",disabled:i},s.getFieldProps(t)))]})}function $(e){var t=e.name,a=e.label,r=e.options,c=e.formik,i=e.disabled;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)("select",Object(U.a)(Object(U.a)({className:"select",id:t},c.getFieldProps(t)),{},{disabled:i,children:[Object(n.jsxs)("option",{value:"",children:["Select a ",a.toLowerCase()]}),r.map((function(e){return Object(n.jsx)("option",{value:e.value,disabled:e.isDisabled||!1,children:e.label},e.value)}))]}))})]})}var ee=a(38);function te(e){var t=e.action,a=Object(r.useState)(!1),c=Object(m.a)(a,2),i=c[0],s=c[1],o=Object(r.useState)({name:"",type:"",purpose:"",fields:[]}),u=Object(m.a)(o,2),d=u[0],p=u[1],f=Object(r.useState)(void 0),h=Object(m.a)(f,2),x=h[0],O=h[1],v=Object(r.useState)(0),g=Object(m.a)(v,2),y=g[0],N=g[1],w=Object(l.g)().id,S=Object(l.f)(),A=Object(r.useContext)(V).user;Object(r.useEffect)((function(){s(!0),"add"===t?function(e){return G.apply(this,arguments)}(+w).then((function(e){if(0!==e.columns.length){var t=[],a=[],n=e.columns.filter((function(e){return e.role===ee.a.MEASURE})).length>1;e.columns.forEach((function(e,r){t.push({id:e.id,originalName:e.name,name:M(e.name),role:e.role,index:r,removed:n&&e.role===ee.a.MEASURE&&"count"===e.name.toLowerCase(),type:e.type,aggregate:e.role===ee.a.MEASURE?ee.b.Sum:ee.b.None}),a.push({label:r.toString(),value:r.toString(),isDisabled:!1})})),O(M(e.originalname)),s(!1),p({name:M(e.originalname),type:"",purpose:"",fields:t})}else setTimeout((function(){N(y+1)}),1e3)})):Y(+w).then((function(e){var t=[],a=[];e.userDatasets[0].columns.forEach((function(e,n){t.push({id:e.id,originalName:e.column.name,name:e.name,role:e.role,index:n,removed:e.removed,type:e.column.type,aggregate:e.aggregate}),a.push({label:n.toString(),value:n.toString(),isDisabled:!1})})),O(e.name),s(!1),p({name:e.name,type:e.goalType,purpose:e.goalPurpose,fields:t})}))}),[w,t,y]);var D=function(){S.replace("/user/view/".concat(A))};return Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)(L,{className:"min-h",title:x,children:[Object(n.jsx)(I,{loading:i}),!i&&Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(P.b,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var e=Object(j.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.fields.map((function(e,t){return Object(U.a)(Object(U.a)({},e),{},{index:t,role:e.role})})),s(!0),"add"!==t){e.next=7;break}return e.next=5,X({datasetId:+w,name:a.name,user:+A,goal:a.type,purpose:a.purpose,colums:n});case 5:e.next=9;break;case 7:return e.next=9,J({id:+w,name:a.name,user:+A,goal:a.type,purpose:a.purpose,colums:n});case 9:D();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getFieldProps,a=e.values,r=e.setFieldValue;return Object(n.jsxs)(P.a,{children:[Object(n.jsxs)("div",{className:"flex -mx-4 bg-white",children:[Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(Q,{name:"name",label:"Name",formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)($,{name:"type",label:"Goal Type",options:[{value:"DECISION_MAKING",label:"Decision Making"},{value:"AWARENESS",label:"Awareness"},{value:"MOTIVATIONAL_LEARNING",label:"Motivational Learning"},{value:"OTHER",label:"Other"}],formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)($,{name:"purpose",label:"Goal Purpose",options:[{value:"STRATEGIC",label:"Strategic"},{value:"OPERATIONAL",label:"Operational"},{value:"ORGANIZATIONAL",label:"Organizational"},{value:"LEARNING",label:"Learning"}],formik:{getFieldProps:t}})})]}),Object(n.jsx)("hr",{className:"mt-2 mb-4"}),Object(n.jsx)("div",{children:a.fields.length>0&&a.fields.map((function(e,c){return Object(n.jsxs)("div",{className:"flex -mx-4 bg-white",children:[Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(Q,{name:"fields.".concat(c,".name"),label:"Name",formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(Q,{name:"fields.".concat(c,".type"),label:"Type",formik:{getFieldProps:t},disabled:!0})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)($,{name:"fields.".concat(c,".role"),label:"Type",options:[{value:"measure",label:"Measure"},{value:"dimension",label:"Dimension"}],formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)($,{name:"fields.".concat(c,".aggregate"),label:"Aggregate",options:[{value:"NONE",label:"None"},{value:"MIN",label:"Min"},{value:"MEAN",label:"Mean"},{value:"SUM",label:"Sum"},{value:"BIN",label:"Bin"},{value:"MAX",label:"Max"},{value:"MEDIAN",label:"Median"}],formik:{getFieldProps:t},disabled:"dimension"===a.fields[c].role||"count"===a.fields[c].originalName})}),Object(n.jsx)("div",{className:"px-4 flex items-center",children:Object(n.jsx)("button",{type:"button",className:"button ".concat(e.removed?"button-success":"button-danger"),onClick:function(){return r("fields.".concat(c,".removed"),!a.fields[c].removed)},children:Object(n.jsx)(k.a,{icon:e.removed?"plus":"times"})})})]})}))}),Object(n.jsxs)("div",{className:"flex justify-end",children:[Object(n.jsx)("button",{type:"button",className:"button mr-2",onClick:D,children:"Cancel"}),Object(n.jsx)("button",{type:"submit",className:"button button-primary",children:"Submit"})]})]})}})})]})})}var ae=a(5),ne=a(2);function re(e,t){return"".concat(e,"-").concat(t)}function ce(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(V).disability;return Object(r.useEffect)((function(){var t,n=10,r=30,i=40,s=10,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",re(a,"group-data")),d=l.append("g").attr("id",re(a,"group-data")),b=l.append("g").attr("id",re(a,"group-axis")),j=e.data.map((function(e){return e.name})),p=S.j(e.data,(function(e){return e.value})),f=S.l().domain(j).paddingInner(.1).paddingOuter(.1).range([i,o-s]),h=S.m().domain([0,p]).range([400-r,n]),x=E(c,j),O=S.a(f),v=S.b(h);return l.on("mousemove",(function(t){var a=S.k(t),r=Object(m.a)(a,1)[0],c=function(e){var t=e.domain(),a=e(t[0])||0,n=e.step();return function(e){var r=Math.floor((e-a)/n);return t[Math.max(0,Math.min(r,t.length-1))]}}(f)(r),i=e.data.find((function(e){return e.name===c}));if(u.selectAll(".hover-rect").remove(),i){var s=f.step()*f.paddingInner();u.append("rect").attr("class","hover-rect").attr("x",f(i.name)-s/2).attr("y",h(p)).attr("width",f.bandwidth()+s).attr("height",h(0)-n).attr("fill","#ccc")}})).on("mouseleave",(function(){u.selectAll(".hover-rect").remove()})),d.selectAll("rect.data-item").data(e.data).enter().append("rect").attr("class","data-item").attr("x",(function(e){return f(e.name)})).attr("y",(function(e){return h(e.value)})).attr("width",f.bandwidth()).attr("height",(function(e){return h(0)-h(e.value)})).attr("fill",(function(e){return x(e.name)})).attr("pointer-events","none"),b.append("g").call(O).attr("transform","translate(0, ".concat(400-r,")")),b.append("g").call(v).attr("transform","translate(".concat(i,", 0)")),function(){l.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function ie(){return(ie=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("".concat(h,"/api/dashboard-recommendation/").concat(t,"/spec")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return"".concat(e,"-").concat(t)}function le(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0];return Object(r.useEffect)((function(){var t,n=10,r=30,c=80,i=80,s=400,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",s),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",se(a,"group-data")),d=l.append("g").attr("id",se(a,"group-axis")),b=S.j(e.data,(function(e){return e.value})),j=S.d(e.data,(function(e){return new Date(e.name)})),m=S.o().domain(j).range([c,o-i]),p=S.m().domain([0,b]).range([s-r,n]),f=S.a(m),h=S.b(p),x=S.i().defined((function(e){return!isNaN(e.value)})).x((function(e){return m(new Date(e.name))})).y((function(e){return p(e.value)}));return u.append("path").datum(e.data).attr("d",x).attr("width",o).attr("height",s).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round"),d.append("g").call(f).attr("transform","translate(0, ".concat(s-r,")")),d.append("g").call(h).attr("transform","translate(".concat(c,", 0)")),function(){l.remove()}}),[a,e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}var oe=a(302),ue=a(477),de=a(478),be=a(479),je=a(483),me=a(480);function pe(e,t){return"".concat(e,"-").concat(t)}function fe(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0];return Object(r.useEffect)((function(){var t,n=10,r=30,c=80,i=80,s=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",250),l=null===(t=s.node())||void 0===t?void 0:t.getBoundingClientRect().width,o=s.append("g").attr("id",pe(a,"group-data")),u=s.append("g").attr("id",pe(a,"group-axis")),d=function(e){return new Date(e.name)},b=S.j(e.data,(function(e){return e.value})),j=Array.from(Array(7)).map((function(e,t){return Object(oe.a)(Object(ue.a)(Object(de.a)(new Date),t),"E")})),m=function(e){return Object(oe.a)(Object(de.a)(d(e)),"dd/MM/yyyy")},p=Object(ae.a)(new Set(e.data.map((function(e){return m(e)})))),f=S.l().domain(p).range([c,l-i]).padding(.1),h=S.l().range([250-r,n]).domain(j).padding(.1);o.selectAll("rect").data(e.data.filter((function(e){return!isNaN(e.value)}))).enter().append("rect").attr("x",(function(e){return f(m(e))})).attr("y",(function(e){return h(j[Object(be.a)(d(e))])})).attr("width",f.bandwidth()).attr("height",h.bandwidth()).attr("fill",(function(e){return S.g(e.value/b)}));var x=S.d(e.data,(function(e){return Object(je.a)(e.name,"yyyy/MM/dd",new Date)})),O=Object(me.a)(x[1],x[0]),v=S.a(f).tickValues(f.domain().filter((function(e,t){return!(t%Math.ceil(.0065*O))}))),g=S.b(h);return u.append("g").call(v).attr("transform","translate(0, ".concat(250-r,")")),u.append("g").call(g).attr("transform","translate(".concat(c,", 0)")),function(){s.remove()}}),[a,e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function he(e,t){return"".concat(e,"-").concat(t)}function xe(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(V).disability;return Object(r.useEffect)((function(){var t,n={top:10,bottom:30,left:0,right:10},r=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),i=null===(t=r.node())||void 0===t?void 0:t.getBoundingClientRect().width,s=r.append("g").attr("id",he(a,"group-data")),l=r.append("g").attr("id",he(a,"group-axis")),o=e.data.map((function(e){return e.name})),u=S.j(e.data,(function(e){return e.value})),d=0;r.append("g").selectAll(".dummyText").data(o).enter().append("text").attr("font-family","sans-serif").attr("font-size","14px").text((function(e){return e})).each((function(){var e=this.getComputedTextLength()+10;e>d&&(d=e),this.remove()})),n.left=d;var b=S.m().domain([0,u]).range([n.left,i-n.right]),j=S.l().domain(o).paddingInner(.1).paddingOuter(.1).range([n.top,400-n.bottom]),m=E(c,o),p=S.a(b),f=S.b(j);return s.selectAll("rect.data-item").data(e.data).enter().append("rect").attr("class","data-item").attr("x",b(0)).attr("y",(function(e){return j(e.name)})).attr("width",(function(e){return b(e.value)-b(0)})).attr("height",j.bandwidth()).attr("fill",(function(e){return m(e.name)})).attr("pointer-events","none"),l.append("g").call(p).attr("transform","translate(0, ".concat(400-n.bottom,")")),l.append("g").call(f).attr("transform","translate(".concat(n.left,", 0)")).attr("class","y-axis"),function(){r.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function Oe(e,t){return"".concat(e,"-").concat(t)}function ve(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(V).disability;return Object(r.useEffect)((function(){var t,n=10,r=30,i=100,s=10,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",Oe(a,"group-data")),d=l.append("g").attr("id",Oe(a,"group-axis")),b=Number.MIN_SAFE_INTEGER;e.data.sort((function(e,t){return e.name2.localeCompare(t.name2)}));var j=e.data.reduce((function(e,t){var a=e.find((function(e){return e.name===t.name}));return a||(a={name:t.name,total:0,values:[]},e.push(a)),a.values.push({name:t.name2,start:a.total,end:a.total+t.value}),a.total+=t.value,a.total>=b&&(b=a.total),e}),[]),m=j.map((function(e){return e.name})).reverse(),p=Object(ae.a)(new Set(j.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),f=S.m().domain([0,b]).range([i,o-s]),h=S.l().domain(m).paddingInner(.1).paddingOuter(.1).range([400-r,n]),x=E(c,p),O=S.a(f),v=S.b(h);return u.selectAll("g.group-item").data(j).enter().append("g").attr("class","group-item").attr("transform",(function(e){return"translate(0, ".concat(h(e.name),")")})).selectAll("rect.data-item").data((function(e){return e.values})).enter().append("rect").attr("class","data-item").attr("x",(function(e){return f(e.start)})).attr("width",(function(e){return f(e.end)-f(e.start)})).attr("height",h.bandwidth()).attr("fill",(function(e){return x(e.name)})).attr("pointer-events","none"),d.append("g").call(O).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(v).attr("transform","translate(".concat(i,", 0)")),function(){l.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}var ge=a(482);function ye(e,t){return"".concat(e,"-").concat(t)}function Ne(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(V).disability;return Object(r.useEffect)((function(){var t,n,r=10,i=30,s=80,l=80,o=400,u=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",o),d=null===(t=u.node())||void 0===t?void 0:t.getBoundingClientRect().width,b=u.append("g").attr("id",ye(a,"group-data")),j=u.append("g").attr("id",ye(a,"group-axis")),m=S.j(e.data,(function(t){return S.j(Object.keys(t.values).filter((function(t){return"left"===e.axis[t]})).map((function(e){return t.values[e]})))})),p=S.j(e.data,(function(t){return S.j(Object.keys(t.values).filter((function(t){return"right"===e.axis[t]})).map((function(e){return t.values[e]})))})),f=Object.values(e.axis).some((function(e){return"right"===e})),h=S.d(e.data,(function(e){return new Date(e.name)})),x=Object(ae.a)(new Set([].concat(Object(ae.a)(Object.keys(e.data[0].values)),Object(ae.a)(Object.keys(e.data[1].values)),Object(ae.a)(Object.keys(e.data[e.data.length-2].values)),Object(ae.a)(Object.keys(e.data[e.data.length-1].values))))).filter((function(t){return e.axis[t]})),O=E(c,x),v=S.o().domain(h).range([s,d-l]),g=S.m().domain([0,m]).range([o-i,r]),y=S.m().domain([0,p]).range([o-i,r]),N=S.a(v),w=S.b(g),k=S.c(y),A=Object(ne.a)(x);try{var D=function(){var t=n.value,a=S.i().defined((function(e){return!isNaN(e.values[t])})).x((function(e){return v(new Date(e.name))})).y((function(e){return g(e.values[t])})),r=S.i().defined((function(e){return!isNaN(e.values[t])})).x((function(e){return v(new Date(e.name))})).y((function(e){return y(e.values[t])}));b.append("path").datum(e.data).attr("d","left"===e.axis[t]?a:r).attr("width",d).attr("height",o).attr("fill","none").attr("stroke",O(t)).attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round")};for(A.s();!(n=A.n()).done;)D()}catch(M){A.e(M)}finally{A.f()}return j.append("g").call(N).attr("transform","translate(0, ".concat(o-i,")")),j.append("g").call(w).attr("transform","translate(".concat(s,", 0)")),f&&j.append("g").call(k).attr("transform","translate(".concat(d-l,", 0)")),function(){u.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}var we=function(e){var t=Object(r.useState)(Object(ee.c)()),a=Object(m.a)(t,1)[0];return Object(r.useEffect)((function(){S.h("".concat(h,"/").concat(e.geofile)).then((function(t){var n,r=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",600),c=null===(n=r.node())||void 0===n?void 0:n.getBoundingClientRect().width,i=S.e().fitExtent([[20,20],[c,600]],t),s=S.f().projection(i),l=S.j(e.data,(function(e){return e.value}));return r.append("g").selectAll("path").data(t.features).enter().append("path").attr("d",s).style("fill",(function(t){return function(t){var a=e.data.find((function(e){return e.name.trim()===t.properties.name}));return a?S.g(a.value/l):"white"}(t)})).style("stroke","#ccc").attr("alt",(function(e){return e.properties.name})),function(){r.remove()}}))}),[a,e.data,e.geofile]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})},ke=a(215),Se=a.n(ke);function Ae(e){var t=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(!a.current){var n=Number.MAX_VALUE,r=Number.MIN_VALUE,c=Number.MAX_VALUE,i=Number.MIN_VALUE,s=e.data.filter((function(e){return e.value>0})).map((function(e){return n=Math.min(n,+e.latitude),r=Math.max(r,+e.latitude),c=Math.min(c,+e.longitude),i=Math.max(i,+e.longitude),{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{title:e.name}}}));a.current=new Se.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",zoom:9,bounds:[[n,r],[c,i]]}),a.current.on("load",(function(){a.current.addSource("points",{type:"geojson",cluster:!0,clusterMaxZoom:14,clusterRadius:50,data:{type:"FeatureCollection",features:s}}),a.current.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-color":"#919ad7","circle-opacity":.7,"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),a.current.addLayer({id:"points-count",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}})}))}}),[e.data]),Object(n.jsxs)("div",{className:"relative mb-4 mt-4",style:{height:600},children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{ref:t,className:"map-container mapContainer"})]})}function De(e,t){return"".concat(e,"-").concat(t)}function Me(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(V).disability;return Object(r.useEffect)((function(){var t,n=10,r=30,i=100,s=10,l=S.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),o=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=l.append("g").attr("id",De(a,"group-data")),d=l.append("g").attr("id",De(a,"group-axis")),b=Number.MIN_SAFE_INTEGER;e.data.sort((function(e,t){return e.name2.localeCompare(t.name2)}));var j=e.data.reduce((function(e,t){var a=e.find((function(e){return e.name===t.name}));return a||(a={name:t.name,values:[]},e.push(a)),a.values.push({name:t.name2,value:t.value}),t.value>=b&&(b=t.value),e}),[]),m=j.map((function(e){return e.name})).reverse(),p=Object(ae.a)(new Set(j.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),f=Object(ae.a)(new Set(j.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),h=S.m().domain([0,b]).range([i,o-s]),x=S.l().domain(m).paddingInner(.1).paddingOuter(.1).range([400-r,n]),O=S.l().domain(p).paddingInner(.1).paddingOuter(.1).range([0,x.bandwidth()]),v=E(c,f),g=S.a(h),y=S.b(x),N=u.selectAll("g.group-item").data(j).enter().append("g").attr("class","group-item").attr("transform",(function(e){return"translate(0, ".concat(x(e.name),")")})).selectAll("rect.data-item").data((function(e){return e.values})).enter().append("g").attr("class","data-item");return N.append("rect").attr("x",(function(e){return h(0)})).attr("y",(function(e){return O(e.name)})).attr("width",(function(e){return h(e.value)})).attr("height",O.bandwidth()).attr("fill",(function(e){return v(e.name)})).attr("pointer-events","none"),N.append("text").attr("x",(function(e){return h(0)+5})).attr("y",(function(e){return O(e.name)+O.bandwidth()-5})).attr("font-size","12px").text((function(e){return e.name})),d.append("g").call(g).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(y).attr("transform","translate(".concat(i,", 0)")),function(){l.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function Ee(e){return isNaN(+e)?void 0:+e}Se.a.accessToken="pk.eyJ1IjoicGF1bG9tZW5lemVzIiwiYSI6ImNrMHZrc3Z2NjEwODMzbG52emduZWFkeTIifQ.fUByXk2mj50HO1xPDiTr5w";var Ce=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function Ie(){var e=Object(r.useState)(void 0),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(m.a)(i,2),o=s[0],u=s[1],d=Object(r.useState)(),b=Object(m.a)(d,2),j=b[0],p=b[1],f=Object(r.useState)([]),h=Object(m.a)(f,2),x=h[0],O=h[1],v=Object(l.g)().id;return Object(r.useEffect)((function(){return Y(+v).then((function(e){(function(e){return ie.apply(this,arguments)})(e.id).then((function(t){c(t);var a=[];p(t.pages[0].name);var n,r=e.userDatasets[0].owner.preferences?e.userDatasets[0].owner.preferences.clampStrings:30,i=Object(ne.a)(t.pages);try{for(i.s();!(n=i.n()).done;){var s,l=n.value,o=Object(ne.a)(l.charts);try{var d=function(){var e=s.value;if(e.multipleLines){var t=Object(ae.a)(new Set(e.multipleLines.specs.map((function(e){return e.userDimension.name})))),n=Object(ae.a)(new Set(e.multipleLines.specs.map((function(e){return e.userMeasure.name}))));a.push({page:l.name,type:"multiple-line",name:t.length>1?"".concat(n[0]," by ").concat(t.join(", ")):"".concat(n.join(", ")," by ").concat(t[0]),values:e.multipleLines.data,axis:e.multipleLines.axis})}else if(3===Object.keys(e.encoding).length){var c=e.encoding.color.field.toString();e.userMeasure.aggregate===ee.b.Mean?a.push({page:l.name,type:e.key===e.encoding.x.field?"grouped-vertical-bar":"grouped-horizontal-bar",name:"".concat(e.userMeasure.name," by ").concat(e.trimValues?"Top ".concat(r):""," ").concat(e.userDimension.name," and ").concat(e.userSecondDimension.name),values:e.data.values.map((function(t){return{name:t[e.key],name2:t[c],value:Ee(t[e.value])}}))}):a.push({page:l.name,type:e.key===e.encoding.x.field?"stacked-vertical-bar":"stacked-horizontal-bar",name:"".concat(e.userMeasure.name," by ").concat(e.trimValues?"Top ".concat(r):""," ").concat(e.userDimension.name," and ").concat(e.userSecondDimension.name),values:e.data.values.map((function(t){return{name:t[e.key],name2:t[c],value:Ee(t[e.value])}}))})}else if("text"===e.mark)a.push({page:l.name,type:e.mark,name:e.value,values:[{name:e.value,value:+e.data.values[0]}]});else if("geo-lat-lng"===e.mark)a.push({page:l.name,type:e.mark,name:"".concat(e.value," ").concat(e.userDimension.name," map"),values:e.data.values.map((function(t){return{name:t[e.key],value:Ee(t[e.value]),latitude:t.latitude,longitude:t.longitude}}))});else{var i,o;a.push({page:l.name,type:"bar"===e.mark?e.key===e.encoding.x.field?"vertical-bar":"horizontal-bar":e.mark,name:"".concat(e.userMeasure.name," of ").concat(e.trimValues?"Top ".concat(r):""," ").concat(null!==(i=null===e||void 0===e||null===(o=e.userDimension)||void 0===o?void 0:o.name)&&void 0!==i?i:e.key," ").concat("heatmap"===e.mark?"heatmap":""),values:e.data.values.map((function(t){return{name:t[e.key],value:Ee(t[e.value])}})),geofile:e.geoFile})}};for(o.s();!(s=o.n()).done;)d()}catch(b){o.e(b)}finally{o.f()}}}catch(b){i.e(b)}finally{i.f()}u(a)}))})),function(){u([]),O([])}}),[v]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex flex-wrap mb-2",children:a&&a.pages.length>1&&a.pages.map((function(e){return Object(n.jsx)("button",{type:"button",className:"button button-primary mr-2 mb-2 ".concat(A(e.name===j,"active")),onClick:function(){return p(e.name)},children:e.name},e.name)}))}),Object(n.jsx)("div",{className:"flex -mx-4 mb-4",children:o&&o.filter((function(e){return"text"===e.type})).map((function(e){return Object(n.jsx)(L,{title:e.name,className:"mx-4",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("h3",{children:Ce(e.values[0].value)})},e.name)},e.name)}))}),o&&o.filter((function(e){return e.page===j})).map((function(e,t){return Object(n.jsxs)("div",{children:["geoshape"===e.type&&Object(n.jsx)(we,{name:e.name,geofile:e.geofile,data:e.values}),"geo-lat-lng"===e.type&&Object(n.jsx)(Ae,{name:e.name,data:e.values}),"multiple-line"===e.type&&Object(n.jsx)(Ne,{name:e.name,data:e.values,axis:e.axis}),"line"===e.type&&Object(n.jsx)(le,{name:e.name,data:e.values}),"heatmap"===e.type&&Object(n.jsx)(fe,{name:e.name,data:e.values}),"vertical-bar"===e.type&&Object(n.jsx)(ce,{name:e.name,data:e.values}),"horizontal-bar"===e.type&&Object(n.jsx)(xe,{name:e.name,data:e.values}),"stacked-horizontal-bar"===e.type&&Object(n.jsx)(ve,{name:e.name,data:e.values}),"grouped-horizontal-bar"===e.type&&Object(n.jsx)(Me,{name:e.name,data:e.values})]},"".concat(e.name,"-").concat(t))})),x&&x.filter((function(e){return"line"!==e.mark})).map((function(e){return Object(n.jsx)("span",{children:Object(n.jsx)(ge.a,{spec:e,data:e.data})})}))]})}function Le(e,t){var a=Object(r.useState)(t),c=Object(m.a)(a,2),i=c[0],s=c[1];return[i,function(){return Object(n.jsx)("div",{className:"flex items-start",children:e&&e.map((function(e){return Object(n.jsx)("button",{type:"button",className:"button button-primary rounded-none first:rounded-l-md last:rounded-r-md ".concat(A(i===e.type,"active")),onClick:function(){return s(e.type)},children:e.label},e.type)}))})},s]}function Te(){var e=Object(l.f)(),t=Le([{type:"LOW",label:"Low"},{type:"MEDIUM",label:"Medium"},{type:"HIGH",label:"High"}],"LOW"),a=Object(m.a)(t,2),r=a[0],c=a[1],i=Le([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),s=Object(m.a)(i,2),o=s[0],u=s[1],d=Le([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),b=Object(m.a)(d,2),j=b[0],p=b[1],f=Object(P.c)({initialValues:{name:"",disability:"",visLiteracy:""},onSubmit:function(t){(function(e){return g.apply(this,arguments)})({name:t.name,disability:["true"===o&&"colorBlind","true"===j&&"dyslexic"].filter(Boolean).join(", "),visLiteracy:r}).then((function(t){e.replace("/")}))}});return Object(n.jsx)("div",{className:"relative",children:Object(n.jsx)(L,{className:"min-h",title:"Add new user",children:Object(n.jsxs)("form",{className:"w-full max-w-lg",onSubmit:f.handleSubmit,children:[Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsx)("div",{className:"w-full px-3",children:Object(n.jsx)(Q,{name:"name",label:"Name",placeholder:"name",formik:f})})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Color blind"}),Object(n.jsx)(u,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Dyslexic"}),Object(n.jsx)(p,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Vis Literacy"}),Object(n.jsx)(c,{})]})}),Object(n.jsx)("button",{type:"submit",className:"button",children:"Save"})]})})})}function Fe(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),o=Object(m.a)(i,2),u=o[0],d=o[1],b=Object(l.g)().id;Object(r.useEffect)((function(){d(!0),function(e){return H.apply(this,arguments)}(+b).then((function(e){c(e),d(!1)}))}),[b]);var j=function(e,t){var a=e.userDatasets[0].columns.filter((function(e){return e.role===t&&!e.removed})).length;return a>0?Object(n.jsxs)(T,{children:[a," ",t.toLowerCase()," column",a>1?"s":""]}):null};return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(I,{loading:u}),!u&&0===a.length&&Object(n.jsx)(C,{title:"No dataset loaded",message:"Upload a CSV file or connect with a database.",className:"mx-4"}),!u&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(L,{title:e.name,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsx)(T,{children:"CSV"}),j(e,ee.a.MEASURE),j(e,ee.a.DIMENSION),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(p.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(p.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)(s.b,{to:"/dashboard/view/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"eye"}),"View"]}),Object(n.jsxs)(s.b,{to:"/dashboard/".concat(e.id,"/edit"),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"pencil-alt"}),"Edit"]})]})]})},e.id)}))]})}function Ve(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),l=Object(m.a)(i,2),o=l[0],u=l[1],d=function(){u(!0),function(){return z.apply(this,arguments)}().then((function(e){c(e),u(!1)}))};Object(r.useEffect)((function(){d()}),[]);var b=function(e,t){var a=e.columns.filter((function(e){return e.role===t})).length;return a>0?Object(n.jsxs)(T,{children:[a," ",t.toLowerCase()," column",a>1?"s":""]}):null};return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(I,{loading:o}),!o&&0===a.length&&Object(n.jsx)(C,{title:"No dataset loaded",message:"Upload a CSV file or connect with a database.",className:"mx-4"}),!o&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(L,{title:e.originalname,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsx)(T,{children:"CSV"}),b(e,ee.a.MEASURE),b(e,ee.a.DIMENSION),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(p.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(p.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsxs)(s.b,{to:"/dashboard/add/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(k.a,{icon:"pencil-alt",className:"mr-1"}),"Create new dashboard"]})})]})},e.id)}))]})}function Re(){var e=Object(l.g)().id,t=Object(r.useContext)(V);return Object(r.useEffect)((function(){O(+e).then((function(a){t.signIn(e,a.disability)}))}),[e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(s.b,{to:"/dataset/add",className:"button button-primary",children:"Add new dataset"})}),Object(n.jsx)("div",{className:"text-lg mt-3",children:"My dashboards"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(Fe,{})}),Object(n.jsx)("div",{className:"text-lg",children:"Public datasets"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(Ve,{})})]})}function Be(){var e=Object(r.useContext)(V).user,t=Object(r.useState)(!1),a=Object(m.a)(t,2),c=a[0],i=a[1],s=Object(l.f)(),o=function(){var t=Object(j.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.persist(),!a.target.files){t.next=13;break}return t.prev=2,i(!0),t.next=6,_(e,a.target.files[0]);case 6:n=t.sent,s.push("/dashboard/add/".concat(n.id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)(L,{className:"min-h",children:[Object(n.jsx)(I,{loading:c}),!c&&Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",children:"Upload a file:"}),Object(n.jsxs)("div",{className:"mt-2",children:[Object(n.jsx)("label",{htmlFor:"file",className:"button",children:"Select a file"}),Object(n.jsx)("input",{type:"file",className:"hide",name:"file",id:"file",onChange:o})]})]})]})})}var Ue=Object(l.h)((function(){var e=Object(l.f)(),t=Object(r.useContext)(V),a=t.user,c=t.signOut;return Object(n.jsxs)("header",{className:"bg-yellow-500 p-3 text-white text-lg font-bold flex justify-between",children:[Object(n.jsx)(s.b,{to:"/",children:"Juno"}),a&&Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{type:"button",onClick:function(){return e.replace("/preferences")},className:"mr-4",children:"Preferences"}),Object(n.jsx)("button",{type:"button",onClick:function(){c(),e.replace("/")},children:"Sair"})]})]})}));function Pe(e){var t=e.name,a=e.label,r=e.disabled,c=e.formik,i=e.checked;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("input",Object(U.a)({id:t,type:"checkbox",checked:i,className:"rounded bg-gray-200 border-transparent focus:border-transparent focus:bg-gray-200 text-gray-700 focus:ring-1 focus:ring-offset-2 focus:ring-gray-500",disabled:r},c.getFieldProps(t)))]})}for(var ze=["NUMBER","STRING","DATE"],Ge=[],_e=0,qe=ze;_e<qe.length;_e++){var He,Ye=qe[_e],We=Object(ne.a)(ze);try{for(We.s();!(He=We.n()).done;){var Xe=He.value;Ye!==Xe&&Ge.push({typeX:Ye,typeY:Xe,chart:"AUTO"})}}catch(Ke){We.e(Ke)}finally{We.f()}}function Ze(){var e=Object(r.useContext)(V).user,t=Object(l.f)(),a=Le([{type:"LOW",label:"Low"},{type:"MEDIUM",label:"Medium"},{type:"HIGH",label:"High"}],"LOW"),c=Object(m.a)(a,3),i=c[0],s=c[1],o=c[2],u=Le([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),d=Object(m.a)(u,3),b=d[0],j=d[1],p=d[2],f=Le([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),h=Object(m.a)(f,3),x=h[0],v=h[1],g=h[2],y=Object(P.c)({initialValues:{stacked:!0,multiline:!0,rightAxis:!0,binValues:50,clampStrings:30,chartTypes:Ge},onSubmit:function(t){(function(e,t){return w.apply(this,arguments)})(+e,Object(U.a)(Object(U.a)({},t),{},{disability:["true"===b&&"colorBlind","true"===x&&"dyslexic"].filter(Boolean).join(", "),visLiteracy:i})).then((function(){N()}))}});Object(r.useEffect)((function(){O(+e).then((function(e){if(o(e.visLiteracy),p(e.disability.includes("colorBlind")?"true":"false"),g(e.disability.includes("dyslexic")?"true":"false"),e.preferences){y.setFieldValue("stacked",e.preferences.stacked),y.setFieldValue("multiline",e.preferences.multiline),y.setFieldValue("rightAxis",e.preferences.rightAxis),y.setFieldValue("binValues",e.preferences.binValues),y.setFieldValue("clampStrings",e.preferences.clampStrings);var t,a=Object(ne.a)(ze);try{var n=function(){var a,n=t.value,r=Object(ne.a)(ze);try{var c=function(){var t=a.value;if(n!==t){var r=e.preferences.chartTypes.findIndex((function(e){return e.typeX===n&&e.typeY===t}));y.setFieldValue("chartTypes.".concat(r,".chart"),e.preferences.chartTypes[r].chart)}};for(r.s();!(a=r.n()).done;)c()}catch(Ke){r.e(Ke)}finally{r.f()}};for(a.s();!(t=a.n()).done;)n()}catch(Ke){a.e(Ke)}finally{a.f()}}}))}),[e]);var N=function(){t.replace("/")};return Object(n.jsx)(L,{title:"Preferences",children:Object(n.jsxs)("form",{className:"w-full",onSubmit:y.handleSubmit,children:[Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Color blind"}),Object(n.jsx)(j,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Dyslexic"}),Object(n.jsx)(v,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Vis Literacy"}),Object(n.jsx)(s,{})]})}),Object(n.jsx)("div",{className:"font-bold",children:"Based on chart types:"}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Pe,{checked:y.values.stacked,name:"stacked",label:"Stacked bars when possible",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Pe,{checked:y.values.multiline,name:"multiline",label:"Multiline charts",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Pe,{checked:y.values.rightAxis,name:"rightAxis",label:"Line charts with right axis",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Q,{name:"binValues",label:"Bin quantitative columns higher than",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Q,{name:"clampStrings",label:"Clamp string columns with more distinct values than",formik:y}),Object(n.jsx)("div",{className:"font-bold",children:"Based on chart types:"}),Object(n.jsx)("hr",{className:"my-2"}),Ge.map((function(e,t){return Object(n.jsxs)("div",{className:"flex -mx-4 mb-3",children:[Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(Q,{name:"chartTypes.".concat(t,".typeX"),label:"Type X",disabled:!0,formik:y})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(Q,{name:"chartTypes.".concat(t,".typeY"),label:"Type Y",disabled:!0,formik:y})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)($,{name:"chartTypes.".concat(t,".chart"),label:"Chart Type",options:[{value:"AUTO",label:"Auto"},{value:"LINE",label:"Line"},{value:"BAR",label:"Bar"}],formik:y})})]},t)})),Object(n.jsxs)("div",{className:"flex justify-end",children:[Object(n.jsx)("button",{type:"button",className:"button mr-2",onClick:N,children:"Cancel"}),Object(n.jsx)("button",{type:"submit",className:"button button-primary",children:"Submit"})]})]})})}o.b.add(u.a);var Je=function(){var e=Object(r.useContext)(V).disability;return Object(n.jsx)("div",{className:"App ".concat((null===e||void 0===e?void 0:e.includes("dyslexic"))?"dyslexic-font":""),children:Object(n.jsx)(s.a,{children:Object(n.jsx)(l.c,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(Ue,{}),Object(n.jsxs)("div",{className:"container mx-auto pt-4 mb-8",children:[Object(n.jsx)(l.a,{exact:!0,path:"/user/add",children:Object(n.jsx)(Te,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/dataset/add",children:Object(n.jsx)(Be,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/add/:id",children:Object(n.jsx)(te,{action:"add"})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/:id/edit",children:Object(n.jsx)(te,{action:"edit"})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/view/:id",children:Object(n.jsx)(Ie,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/user/view/:id",children:Object(n.jsx)(Re,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/preferences",children:Object(n.jsx)(Ze,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(B,{})})]})]})})})})};i.a.render(Object(n.jsx)(r.StrictMode,{children:Object(n.jsx)(R,{children:Object(n.jsx)(Je,{})})}),document.getElementById("root"))}},[[461,1,2]]]);
//# sourceMappingURL=main.2504a064.chunk.js.map