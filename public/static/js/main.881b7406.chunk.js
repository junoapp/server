(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{393:function(e,t,a){},394:function(e,t,a){},407:function(e,t){},408:function(e,t){},409:function(e,t){},410:function(e,t){},461:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),c=a(293),i=a.n(c),s=(a(393),a(394),a(30)),l=a(29),u=a(115),o=a(300),d=a(8),b=a.n(d),j=a(15),m=a(12),p=a(476),f=a(28);function h(){return(h=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/user").json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/user/".concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("/api/user",{json:t}).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.delete("/api/user/".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(j.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("/api/user/preferences/".concat(t),{json:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=a(43),k=a(14);function S(e,t){return t?e?t:"":e||""}function D(){return"juno-"+Math.random().toString(36).substr(2,9)}function A(e){return e.endsWith(".csv")&&(e=e.slice(0,-4)),(e=e.replaceAll("_"," ")).split(" ").map((function(e){return e.split(/(?=[A-Z])/)})).flat().map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ").replace(/\s+/g," ")}function M(e,t){return k.n((null===e||void 0===e?void 0:e.includes("colorBlind"))?t.length>4?["#3575B1"]:["#a6cee3","#1f78b4","#b2df8a","#33a02c"]:t.length>10?["#3575B1"]:k.p)}function E(e){var t=e.title,a=e.message,r=e.className;return Object(n.jsx)("div",{className:"bg-blue-100 border-blue-500 rounded-b text-blue-900 px-4 py-3 shadow-md w-full h-fit ".concat(S(r)),role:"alert",children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)("div",{className:"py-1 h-6 w-6 text-blue-500 mr-4",children:Object(n.jsx)(w.a,{icon:"info-circle"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"font-bold",children:t}),Object(n.jsx)("p",{className:"text-sm",children:a})]})]})})}function C(e){return e.loading?Object(n.jsx)("div",{className:"absolute top-1/2 left-1/2 -mt-4 -ml-4 h-40",children:Object(n.jsx)(w.a,{icon:"circle-notch",spin:!0,size:"2x",className:"text-orange-500"})}):Object(n.jsx)(n.Fragment,{})}function I(e){var t=e.title,a=e.className,r=e.children;return Object(n.jsxs)("div",{className:"w-full h-full rounded overflow-hidden shadow bg-white ".concat(S(a)),children:[t&&Object(n.jsx)("div",{className:"px-6 pt-4",children:Object(n.jsx)("div",{className:"font-bold text-xl mb-2 break-words",children:t})}),Object(n.jsx)("div",{className:"px-6 py-4",children:r})]})}function L(e){var t=e.children;return Object(n.jsx)("span",{className:"inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:t})}function T(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),l=Object(m.a)(i,2),u=l[0],o=l[1],d=function(){o(!0),function(){return h.apply(this,arguments)}().then((function(e){c(e),o(!1)}))};Object(r.useEffect)((function(){d()}),[]);var f=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,g(t);case 3:d();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(C,{loading:u}),!u&&0===a.length&&Object(n.jsx)(E,{title:"No user added",message:"Add some user to start a new dashboard.",className:"mx-4"}),!u&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(I,{title:e.name,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsxs)(L,{children:["VisLiteracy: ",e.visLiteracy]}),e.disability&&Object(n.jsxs)(L,{children:["Disability: ",e.disability]}),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(p.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(p.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)(s.b,{to:"user/view/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(w.a,{icon:"eye"}),"Login"]}),Object(n.jsxs)("button",{type:"button",className:"button button-danger button-small",onClick:function(){return f(e.id)},children:[Object(n.jsx)(w.a,{icon:"trash"}),"Delete"]})]})]})},e.id)}))]})}var F=Object(r.createContext)(void 0);function V(e){var t=Object(r.useState)(localStorage.getItem("user")),a=Object(m.a)(t,2),c=a[0],i=a[1],s=Object(r.useState)(localStorage.getItem("disability")),l=Object(m.a)(s,2),u=l[0],o=l[1];return Object(n.jsx)(F.Provider,{value:{user:c,disability:u,signIn:function(e,t){localStorage.setItem("user",e),localStorage.setItem("disability",t),i(e),o(t)},signOut:function(){localStorage.removeItem("user"),localStorage.removeItem("disability"),i(void 0),o(void 0)}},children:e.children})}function B(){var e=Object(l.f)(),t=Object(r.useContext)(F).user;return t&&e.replace("/user/view/".concat(t)),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(s.b,{to:"/user/add",className:"button button-primary",children:"Add new user"})}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(T,{})})]})}var R=a(23),U=a(80);function P(){return(P=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/dataset").json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/dataset/".concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){return _.apply(this,arguments)}function _(){return(_=Object(j.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",a),n.append("user",t),e.abrupt("return",f.a.post("/api/dataset/upload",{body:n}).json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/dashboard?user=".concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/dashboard/".concat(t)).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return X.apply(this,arguments)}function X(){return(X=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("/api/dashboard",{json:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return J.apply(this,arguments)}function J(){return(J=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.put("/api/dashboard",{json:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){var t=e.name,a=e.label,r=e.type,c=e.placeholder,i=e.disabled,s=e.formik;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("input",Object(R.a)({className:"input",id:t,type:r||"text",placeholder:c||"",disabled:i},s.getFieldProps(t)))]})}function Q(e){var t=e.name,a=e.label,r=e.options,c=e.formik,i=e.disabled;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)("select",Object(R.a)(Object(R.a)({className:"select",id:t},c.getFieldProps(t)),{},{disabled:i,children:[Object(n.jsxs)("option",{value:"",children:["Select a ",a.toLowerCase()]}),r.map((function(e){return Object(n.jsx)("option",{value:e.value,disabled:e.isDisabled||!1,children:e.label},e.value)}))]}))})]})}var $=a(41);function ee(e){var t=e.action,a=Object(r.useState)(!1),c=Object(m.a)(a,2),i=c[0],s=c[1],u=Object(r.useState)({name:"",type:"",purpose:"",fields:[]}),o=Object(m.a)(u,2),d=o[0],p=o[1],f=Object(r.useState)(void 0),h=Object(m.a)(f,2),x=h[0],O=h[1],v=Object(r.useState)(0),g=Object(m.a)(v,2),y=g[0],N=g[1],k=Object(l.g)().id,S=Object(l.f)(),D=Object(r.useContext)(F).user;Object(r.useEffect)((function(){s(!0),"add"===t?function(e){return z.apply(this,arguments)}(+k).then((function(e){if(0!==e.columns.length){var t=[],a=[];e.columns.forEach((function(e,n){t.push({id:e.id,originalName:e.name,name:A(e.name),role:e.role,index:n,removed:!1,type:e.type,aggregate:e.role===$.a.MEASURE?$.b.Sum:$.b.None}),a.push({label:n.toString(),value:n.toString(),isDisabled:!1})})),O(A(e.originalname)),s(!1),p({name:A(e.originalname),type:"",purpose:"",fields:t})}else setTimeout((function(){N(y+1)}),1e3)})):H(+k).then((function(e){var t=[],a=[];e.userDatasets[0].columns.forEach((function(e,n){t.push({id:e.id,originalName:e.column.name,name:e.name,role:e.role,index:n,removed:e.removed,type:e.column.type,aggregate:e.aggregate}),a.push({label:n.toString(),value:n.toString(),isDisabled:!1})})),O(e.name),s(!1),p({name:e.name,type:e.goalType,purpose:e.goalPurpose,fields:t})}))}),[k,t,y]);var M=function(){S.replace("/user/view/".concat(D))};return Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)(I,{className:"min-h",title:x,children:[Object(n.jsx)(C,{loading:i}),!i&&Object(n.jsx)("div",{className:"mt-4",children:Object(n.jsx)(U.b,{enableReinitialize:!0,initialValues:d,onSubmit:function(){var e=Object(j.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.fields.map((function(e,t){return Object(R.a)(Object(R.a)({},e),{},{index:t,role:e.role})})),s(!0),"add"!==t){e.next=7;break}return e.next=5,W({datasetId:+k,name:a.name,user:+D,goal:a.type,purpose:a.purpose,colums:n});case 5:e.next=9;break;case 7:return e.next=9,Z({id:+k,name:a.name,user:+D,goal:a.type,purpose:a.purpose,colums:n});case 9:M();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.getFieldProps,a=e.values,r=e.setFieldValue;return Object(n.jsxs)(U.a,{children:[Object(n.jsxs)("div",{className:"flex -mx-4 bg-white",children:[Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(K,{name:"name",label:"Name",formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(Q,{name:"type",label:"Goal Type",options:[{value:"DECISION_MAKING",label:"Decision Making"},{value:"AWARENESS",label:"Awareness"},{value:"MOTIVATIONAL_LEARNING",label:"Motivational Learning"},{value:"OTHER",label:"Other"}],formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(Q,{name:"purpose",label:"Goal Purpose",options:[{value:"STRATEGIC",label:"Strategic"},{value:"OPERATIONAL",label:"Operational"},{value:"ORGANIZATIONAL",label:"Organizational"},{value:"LEARNING",label:"Learning"}],formik:{getFieldProps:t}})})]}),Object(n.jsx)("hr",{className:"mt-2 mb-4"}),Object(n.jsx)("div",{children:a.fields.length>0&&a.fields.map((function(e,c){return Object(n.jsxs)("div",{className:"flex -mx-4 bg-white",children:[Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(K,{name:"fields.".concat(c,".name"),label:"Name",formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(K,{name:"fields.".concat(c,".type"),label:"Type",formik:{getFieldProps:t},disabled:!0})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(Q,{name:"fields.".concat(c,".role"),label:"Type",options:[{value:"measure",label:"Measure"},{value:"dimension",label:"Dimension"}],formik:{getFieldProps:t}})}),Object(n.jsx)("div",{className:"px-4 w-2/5",children:Object(n.jsx)(Q,{name:"fields.".concat(c,".aggregate"),label:"Aggregate",options:[{value:"NONE",label:"None"},{value:"MIN",label:"Min"},{value:"MEAN",label:"Mean"},{value:"SUM",label:"Sum"},{value:"BIN",label:"Bin"},{value:"MAX",label:"Max"},{value:"MEDIAN",label:"Median"}],formik:{getFieldProps:t},disabled:"dimension"===a.fields[c].role||"count"===a.fields[c].originalName})}),Object(n.jsx)("div",{className:"px-4 flex items-center",children:Object(n.jsx)("button",{type:"button",className:"button ".concat(e.removed?"button-success":"button-danger"),onClick:function(){return r("fields.".concat(c,".removed"),!a.fields[c].removed)},children:Object(n.jsx)(w.a,{icon:e.removed?"plus":"times"})})})]})}))}),Object(n.jsxs)("div",{className:"flex justify-end",children:[Object(n.jsx)("button",{type:"button",className:"button mr-2",onClick:M,children:"Cancel"}),Object(n.jsx)("button",{type:"submit",className:"button button-primary",children:"Submit"})]})]})}})})]})})}var te=a(5),ae=a(2);function ne(e,t){return"".concat(e,"-").concat(t)}function re(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(F).disability;return Object(r.useEffect)((function(){var t,n=10,r=30,i=40,s=10,l=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),u=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,o=l.append("g").attr("id",ne(a,"group-data")),d=l.append("g").attr("id",ne(a,"group-data")),b=l.append("g").attr("id",ne(a,"group-axis")),j=e.data.map((function(e){return e.name})),p=k.j(e.data,(function(e){return e.value})),f=k.l().domain(j).paddingInner(.1).paddingOuter(.1).range([i,u-s]),h=k.m().domain([0,p]).range([400-r,n]),x=M(c,j),O=k.a(f),v=k.b(h);return l.on("mousemove",(function(t){var a=k.k(t),r=Object(m.a)(a,1)[0],c=function(e){var t=e.domain(),a=e(t[0])||0,n=e.step();return function(e){var r=Math.floor((e-a)/n);return t[Math.max(0,Math.min(r,t.length-1))]}}(f)(r),i=e.data.find((function(e){return e.name===c}));if(o.selectAll(".hover-rect").remove(),i){var s=f.step()*f.paddingInner();o.append("rect").attr("class","hover-rect").attr("x",f(i.name)-s/2).attr("y",h(p)).attr("width",f.bandwidth()+s).attr("height",h(0)-n).attr("fill","#ccc")}})).on("mouseleave",(function(){o.selectAll(".hover-rect").remove()})),d.selectAll("rect.data-item").data(e.data).enter().append("rect").attr("class","data-item").attr("x",(function(e){return f(e.name)})).attr("y",(function(e){return h(e.value)})).attr("width",f.bandwidth()).attr("height",(function(e){return h(0)-h(e.value)})).attr("fill",(function(e){return x(e.name)})).attr("pointer-events","none"),b.append("g").call(O).attr("transform","translate(0, ".concat(400-r,")")),b.append("g").call(v).attr("transform","translate(".concat(i,", 0)")),function(){l.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function ce(){return(ce=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/api/dashboard-recommendation/".concat(t,"/spec")).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return"".concat(e,"-").concat(t)}function se(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0];return Object(r.useEffect)((function(){var t,n=10,r=30,c=80,i=80,s=400,l=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",s),u=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,o=l.append("g").attr("id",ie(a,"group-data")),d=l.append("g").attr("id",ie(a,"group-axis")),b=k.j(e.data,(function(e){return e.value})),j=k.d(e.data,(function(e){return new Date(e.name)})),m=k.o().domain(j).range([c,u-i]),p=k.m().domain([0,b]).range([s-r,n]),f=k.a(m),h=k.b(p),x=k.i().defined((function(e){return!isNaN(e.value)})).x((function(e){return m(new Date(e.name))})).y((function(e){return p(e.value)}));return o.append("path").datum(e.data).attr("d",x).attr("width",u).attr("height",s).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round"),d.append("g").call(f).attr("transform","translate(0, ".concat(s-r,")")),d.append("g").call(h).attr("transform","translate(".concat(c,", 0)")),function(){l.remove()}}),[a,e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}var le=a(302),ue=a(477),oe=a(478),de=a(479),be=a(483),je=a(480);function me(e,t){return"".concat(e,"-").concat(t)}function pe(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0];return Object(r.useEffect)((function(){var t,n=10,r=30,c=80,i=80,s=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",250),l=null===(t=s.node())||void 0===t?void 0:t.getBoundingClientRect().width,u=s.append("g").attr("id",me(a,"group-data")),o=s.append("g").attr("id",me(a,"group-axis")),d=function(e){return new Date(e.name)},b=k.j(e.data,(function(e){return e.value})),j=Array.from(Array(7)).map((function(e,t){return Object(le.a)(Object(ue.a)(Object(oe.a)(new Date),t),"E")})),m=function(e){return Object(le.a)(Object(oe.a)(d(e)),"dd/MM/yyyy")},p=Object(te.a)(new Set(e.data.map((function(e){return m(e)})))),f=k.l().domain(p).range([c,l-i]).padding(.1),h=k.l().range([250-r,n]).domain(j).padding(.1);u.selectAll("rect").data(e.data.filter((function(e){return!isNaN(e.value)}))).enter().append("rect").attr("x",(function(e){return f(m(e))})).attr("y",(function(e){return h(j[Object(de.a)(d(e))])})).attr("width",f.bandwidth()).attr("height",h.bandwidth()).attr("fill",(function(e){return k.g(e.value/b)}));var x=k.d(e.data,(function(e){return Object(be.a)(e.name,"yyyy/MM/dd",new Date)})),O=Object(je.a)(x[1],x[0]),v=k.a(f).tickValues(f.domain().filter((function(e,t){return!(t%Math.ceil(.0065*O))}))),g=k.b(h);return o.append("g").call(v).attr("transform","translate(0, ".concat(250-r,")")),o.append("g").call(g).attr("transform","translate(".concat(c,", 0)")),function(){s.remove()}}),[a,e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function fe(e,t){return"".concat(e,"-").concat(t)}function he(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(F).disability;return Object(r.useEffect)((function(){var t,n={top:10,bottom:30,left:0,right:10},r=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),i=null===(t=r.node())||void 0===t?void 0:t.getBoundingClientRect().width,s=r.append("g").attr("id",fe(a,"group-data")),l=r.append("g").attr("id",fe(a,"group-axis")),u=e.data.map((function(e){return e.name})),o=k.j(e.data,(function(e){return e.value})),d=0;r.append("g").selectAll(".dummyText").data(u).enter().append("text").attr("font-family","sans-serif").attr("font-size","14px").text((function(e){return e})).each((function(){var e=this.getComputedTextLength()+10;e>d&&(d=e),this.remove()})),n.left=d;var b=k.m().domain([0,o]).range([n.left,i-n.right]),j=k.l().domain(u).paddingInner(.1).paddingOuter(.1).range([n.top,400-n.bottom]),m=M(c,u),p=k.a(b),f=k.b(j);return s.selectAll("rect.data-item").data(e.data).enter().append("rect").attr("class","data-item").attr("x",b(0)).attr("y",(function(e){return j(e.name)})).attr("width",(function(e){return b(e.value)-b(0)})).attr("height",j.bandwidth()).attr("fill",(function(e){return m(e.name)})).attr("pointer-events","none"),l.append("g").call(p).attr("transform","translate(0, ".concat(400-n.bottom,")")),l.append("g").call(f).attr("transform","translate(".concat(n.left,", 0)")).attr("class","y-axis"),function(){r.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function xe(e,t){return"".concat(e,"-").concat(t)}function Oe(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(F).disability;return Object(r.useEffect)((function(){var t,n=10,r=30,i=100,s=10,l=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),u=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,o=l.append("g").attr("id",xe(a,"group-data")),d=l.append("g").attr("id",xe(a,"group-axis")),b=Number.MIN_SAFE_INTEGER;e.data.sort((function(e,t){return e.name2.localeCompare(t.name2)}));var j=e.data.reduce((function(e,t){var a=e.find((function(e){return e.name===t.name}));return a||(a={name:t.name,total:0,values:[]},e.push(a)),a.values.push({name:t.name2,start:a.total,end:a.total+t.value}),a.total+=t.value,a.total>=b&&(b=a.total),e}),[]),m=j.map((function(e){return e.name})).reverse(),p=Object(te.a)(new Set(j.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),f=k.m().domain([0,b]).range([i,u-s]),h=k.l().domain(m).paddingInner(.1).paddingOuter(.1).range([400-r,n]),x=M(c,p),O=k.a(f),v=k.b(h);return o.selectAll("g.group-item").data(j).enter().append("g").attr("class","group-item").attr("transform",(function(e){return"translate(0, ".concat(h(e.name),")")})).selectAll("rect.data-item").data((function(e){return e.values})).enter().append("rect").attr("class","data-item").attr("x",(function(e){return f(e.start)})).attr("width",(function(e){return f(e.end)-f(e.start)})).attr("height",h.bandwidth()).attr("fill",(function(e){return x(e.name)})).attr("pointer-events","none"),d.append("g").call(O).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(v).attr("transform","translate(".concat(i,", 0)")),function(){l.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}var ve=a(482);function ge(e,t){return"".concat(e,"-").concat(t)}function ye(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(F).disability;return Object(r.useEffect)((function(){var t,n,r=10,i=30,s=80,l=80,u=400,o=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",u),d=null===(t=o.node())||void 0===t?void 0:t.getBoundingClientRect().width,b=o.append("g").attr("id",ge(a,"group-data")),j=o.append("g").attr("id",ge(a,"group-axis")),m=k.j(e.data,(function(t){return k.j(Object.keys(t.values).filter((function(t){return"left"===e.axis[t]})).map((function(e){return t.values[e]})))})),p=k.j(e.data,(function(t){return k.j(Object.keys(t.values).filter((function(t){return"right"===e.axis[t]})).map((function(e){return t.values[e]})))})),f=Object.values(e.axis).some((function(e){return"right"===e})),h=k.d(e.data,(function(e){return new Date(e.name)})),x=Object(te.a)(new Set([].concat(Object(te.a)(Object.keys(e.data[0].values)),Object(te.a)(Object.keys(e.data[1].values)),Object(te.a)(Object.keys(e.data[e.data.length-2].values)),Object(te.a)(Object.keys(e.data[e.data.length-1].values))))).filter((function(t){return e.axis[t]})),O=M(c,x),v=k.o().domain(h).range([s,d-l]),g=k.m().domain([0,m]).range([u-i,r]),y=k.m().domain([0,p]).range([u-i,r]),N=k.a(v),w=k.b(g),S=k.c(y),D=Object(ae.a)(x);try{var A=function(){var t=n.value,a=k.i().defined((function(e){return!isNaN(e.values[t])})).x((function(e){return v(new Date(e.name))})).y((function(e){return g(e.values[t])})),r=k.i().defined((function(e){return!isNaN(e.values[t])})).x((function(e){return v(new Date(e.name))})).y((function(e){return y(e.values[t])}));b.append("path").datum(e.data).attr("d","left"===e.axis[t]?a:r).attr("width",d).attr("height",u).attr("fill","none").attr("stroke",O(t)).attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round")};for(D.s();!(n=D.n()).done;)A()}catch(E){D.e(E)}finally{D.f()}return j.append("g").call(N).attr("transform","translate(0, ".concat(u-i,")")),j.append("g").call(w).attr("transform","translate(".concat(s,", 0)")),f&&j.append("g").call(S).attr("transform","translate(".concat(d-l,", 0)")),function(){o.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}var Ne=function(e){var t=Object(r.useState)(Object($.c)()),a=Object(m.a)(t,1)[0];return Object(r.useEffect)((function(){k.h("/".concat(e.geofile)).then((function(t){var n,r=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",600),c=null===(n=r.node())||void 0===n?void 0:n.getBoundingClientRect().width,i=k.e().fitExtent([[20,20],[c,600]],t),s=k.f().projection(i),l=k.j(e.data,(function(e){return e.value}));return r.append("g").selectAll("path").data(t.features).enter().append("path").attr("d",s).style("fill",(function(t){return function(t){var a=e.data.find((function(e){return e.name.trim()===t.properties.name}));return a?k.g(a.value/l):"white"}(t)})).style("stroke","#ccc").attr("alt",(function(e){return e.properties.name})),function(){r.remove()}}))}),[a,e.data,e.geofile]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})},we=a(215),ke=a.n(we);function Se(e){var t=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(!a.current){var n=Number.MAX_VALUE,r=Number.MIN_VALUE,c=Number.MAX_VALUE,i=Number.MIN_VALUE,s=e.data.filter((function(e){return e.value>0})).map((function(e){return n=Math.min(n,+e.latitude),r=Math.max(r,+e.latitude),c=Math.min(c,+e.longitude),i=Math.max(i,+e.longitude),{type:"Feature",geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{title:e.name}}}));a.current=new ke.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",zoom:9,bounds:[[n,r],[c,i]]}),a.current.on("load",(function(){a.current.addSource("points",{type:"geojson",cluster:!0,clusterMaxZoom:14,clusterRadius:50,data:{type:"FeatureCollection",features:s}}),a.current.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-color":"#919ad7","circle-opacity":.7,"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),a.current.addLayer({id:"points-count",type:"symbol",source:"points",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}})}))}}),[e.data]),Object(n.jsxs)("div",{className:"relative mb-4 mt-4",style:{height:600},children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{ref:t,className:"map-container mapContainer"})]})}function De(e,t){return"".concat(e,"-").concat(t)}function Ae(e){var t=Object(r.useState)(D()),a=Object(m.a)(t,1)[0],c=Object(r.useContext)(F).disability;return Object(r.useEffect)((function(){var t,n=10,r=30,i=100,s=10,l=k.q("#".concat(a)).append("svg").attr("width","100%").attr("height",400),u=null===(t=l.node())||void 0===t?void 0:t.getBoundingClientRect().width,o=l.append("g").attr("id",De(a,"group-data")),d=l.append("g").attr("id",De(a,"group-axis")),b=Number.MIN_SAFE_INTEGER;e.data.sort((function(e,t){return e.name2.localeCompare(t.name2)}));var j=e.data.reduce((function(e,t){var a=e.find((function(e){return e.name===t.name}));return a||(a={name:t.name,values:[]},e.push(a)),a.values.push({name:t.name2,value:t.value}),t.value>=b&&(b=t.value),e}),[]),m=j.map((function(e){return e.name})).reverse(),p=Object(te.a)(new Set(j.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),f=Object(te.a)(new Set(j.map((function(e){return e.values.map((function(e){return e.name}))})).flat())),h=k.m().domain([0,b]).range([i,u-s]),x=k.l().domain(m).paddingInner(.1).paddingOuter(.1).range([400-r,n]),O=k.l().domain(p).paddingInner(.1).paddingOuter(.1).range([0,x.bandwidth()]),v=M(c,f),g=k.a(h),y=k.b(x),N=o.selectAll("g.group-item").data(j).enter().append("g").attr("class","group-item").attr("transform",(function(e){return"translate(0, ".concat(x(e.name),")")})).selectAll("rect.data-item").data((function(e){return e.values})).enter().append("g").attr("class","data-item");return N.append("rect").attr("x",(function(e){return h(0)})).attr("y",(function(e){return O(e.name)})).attr("width",(function(e){return h(e.value)})).attr("height",O.bandwidth()).attr("fill",(function(e){return v(e.name)})).attr("pointer-events","none"),N.append("text").attr("x",(function(e){return h(0)+5})).attr("y",(function(e){return O(e.name)+O.bandwidth()-5})).attr("font-size","12px").text((function(e){return e.name})),d.append("g").call(g).attr("transform","translate(0, ".concat(400-r,")")),d.append("g").call(y).attr("transform","translate(".concat(i,", 0)")),function(){l.remove()}}),[a,e,c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:e.name}),Object(n.jsx)("div",{id:a})]})}function Me(e){return isNaN(+e)?void 0:+e}ke.a.accessToken="pk.eyJ1IjoicGF1bG9tZW5lemVzIiwiYSI6ImNrMHZrc3Z2NjEwODMzbG52emduZWFkeTIifQ.fUByXk2mj50HO1xPDiTr5w";var Ee=new Intl.NumberFormat("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}).format;function Ce(){var e=Object(r.useState)(void 0),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(m.a)(i,2),u=s[0],o=s[1],d=Object(r.useState)(),b=Object(m.a)(d,2),j=b[0],p=b[1],f=Object(r.useState)([]),h=Object(m.a)(f,2),x=h[0],O=h[1],v=Object(l.g)().id;return Object(r.useEffect)((function(){return H(+v).then((function(e){(function(e){return ce.apply(this,arguments)})(e.id).then((function(t){c(t);var a=[];p(t.pages[0].name);var n,r=e.userDatasets[0].owner.preferences?e.userDatasets[0].owner.preferences.clampStrings:30,i=Object(ae.a)(t.pages);try{for(i.s();!(n=i.n()).done;){var s,l=n.value,u=Object(ae.a)(l.charts);try{var d=function(){var e=s.value;if(e.multipleLines){var t=Object(te.a)(new Set(e.multipleLines.specs.map((function(e){return e.userDimension.name})))),n=Object(te.a)(new Set(e.multipleLines.specs.map((function(e){return e.userMeasure.name}))));a.push({page:l.name,type:"multiple-line",name:t.length>1?"".concat(n[0]," by ").concat(t.join(", ")):"".concat(n.join(", ")," by ").concat(t[0]),values:e.multipleLines.data,axis:e.multipleLines.axis})}else if(3===Object.keys(e.encoding).length){var c=e.encoding.color.field.toString();e.userMeasure.aggregate===$.b.Mean?a.push({page:l.name,type:e.key===e.encoding.x.field?"grouped-vertical-bar":"grouped-horizontal-bar",name:"".concat(e.userMeasure.name," by ").concat(e.trimValues?"Top ".concat(r):""," ").concat(e.userDimension.name," and ").concat(e.userSecondDimension.name),values:e.data.values.map((function(t){return{name:t[e.key],name2:t[c],value:Me(t[e.value])}}))}):a.push({page:l.name,type:e.key===e.encoding.x.field?"stacked-vertical-bar":"stacked-horizontal-bar",name:"".concat(e.userMeasure.name," by ").concat(e.trimValues?"Top ".concat(r):""," ").concat(e.userDimension.name," and ").concat(e.userSecondDimension.name),values:e.data.values.map((function(t){return{name:t[e.key],name2:t[c],value:Me(t[e.value])}}))})}else if("text"===e.mark)a.push({page:l.name,type:e.mark,name:e.value,values:[{name:e.value,value:+e.data.values[0]}]});else if("geo-lat-lng"===e.mark)a.push({page:l.name,type:e.mark,name:"".concat(e.value," ").concat(e.userDimension.name," map"),values:e.data.values.map((function(t){return{name:t[e.key],value:Me(t[e.value]),latitude:t.latitude,longitude:t.longitude}}))});else{var i,u;a.push({page:l.name,type:"bar"===e.mark?e.key===e.encoding.x.field?"vertical-bar":"horizontal-bar":e.mark,name:"".concat(e.userMeasure.name," of ").concat(e.trimValues?"Top ".concat(r):""," ").concat(null!==(i=null===e||void 0===e||null===(u=e.userDimension)||void 0===u?void 0:u.name)&&void 0!==i?i:e.key," ").concat("heatmap"===e.mark?"heatmap":""),values:e.data.values.map((function(t){return{name:t[e.key],value:Me(t[e.value])}})),geofile:e.geoFile})}};for(u.s();!(s=u.n()).done;)d()}catch(b){u.e(b)}finally{u.f()}}}catch(b){i.e(b)}finally{i.f()}o(a)}))})),function(){o([]),O([])}}),[v]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex flex-wrap mb-2",children:a&&a.pages.length>1&&a.pages.map((function(e){return Object(n.jsx)("button",{type:"button",className:"button button-primary mr-2 mb-2 ".concat(S(e.name===j,"active")),onClick:function(){return p(e.name)},children:e.name},e.name)}))}),Object(n.jsx)("div",{className:"flex -mx-4 mb-4",children:u&&u.filter((function(e){return"text"===e.type})).map((function(e){return Object(n.jsx)(I,{title:e.name,className:"mx-4",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("h3",{children:Ee(e.values[0].value)})},e.name)},e.name)}))}),u&&u.filter((function(e){return e.page===j})).map((function(e,t){return Object(n.jsxs)("div",{children:["geoshape"===e.type&&Object(n.jsx)(Ne,{name:e.name,geofile:e.geofile,data:e.values}),"geo-lat-lng"===e.type&&Object(n.jsx)(Se,{name:e.name,data:e.values}),"multiple-line"===e.type&&Object(n.jsx)(ye,{name:e.name,data:e.values,axis:e.axis}),"line"===e.type&&Object(n.jsx)(se,{name:e.name,data:e.values}),"heatmap"===e.type&&Object(n.jsx)(pe,{name:e.name,data:e.values}),"vertical-bar"===e.type&&Object(n.jsx)(re,{name:e.name,data:e.values}),"horizontal-bar"===e.type&&Object(n.jsx)(he,{name:e.name,data:e.values}),"stacked-horizontal-bar"===e.type&&Object(n.jsx)(Oe,{name:e.name,data:e.values}),"grouped-horizontal-bar"===e.type&&Object(n.jsx)(Ae,{name:e.name,data:e.values})]},"".concat(e.name,"-").concat(t))})),x&&x.filter((function(e){return"line"!==e.mark})).map((function(e){return Object(n.jsx)("span",{children:Object(n.jsx)(ve.a,{spec:e,data:e.data})})}))]})}function Ie(e,t){var a=Object(r.useState)(t),c=Object(m.a)(a,2),i=c[0],s=c[1];return[i,function(){return Object(n.jsx)("div",{className:"flex items-start",children:e&&e.map((function(e){return Object(n.jsx)("button",{type:"button",className:"button button-primary rounded-none first:rounded-l-md last:rounded-r-md ".concat(S(i===e.type,"active")),onClick:function(){return s(e.type)},children:e.label},e.type)}))})},s]}function Le(){var e=Object(l.f)(),t=Ie([{type:"LOW",label:"Low"},{type:"MEDIUM",label:"Medium"},{type:"HIGH",label:"High"}],"LOW"),a=Object(m.a)(t,2),r=a[0],c=a[1],i=Ie([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),s=Object(m.a)(i,2),u=s[0],o=s[1],d=Ie([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),b=Object(m.a)(d,2),j=b[0],p=b[1],f=Object(U.c)({initialValues:{name:"",disability:"",visLiteracy:""},onSubmit:function(t){(function(e){return v.apply(this,arguments)})({name:t.name,disability:["true"===u&&"colorBlind","true"===j&&"dyslexic"].filter(Boolean).join(", "),visLiteracy:r}).then((function(t){e.replace("/")}))}});return Object(n.jsx)("div",{className:"relative",children:Object(n.jsx)(I,{className:"min-h",title:"Add new user",children:Object(n.jsxs)("form",{className:"w-full max-w-lg",onSubmit:f.handleSubmit,children:[Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsx)("div",{className:"w-full px-3",children:Object(n.jsx)(K,{name:"name",label:"Name",placeholder:"name",formik:f})})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Color blind"}),Object(n.jsx)(o,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Dyslexic"}),Object(n.jsx)(p,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Vis Literacy"}),Object(n.jsx)(c,{})]})}),Object(n.jsx)("button",{type:"submit",className:"button",children:"Save"})]})})})}function Te(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),u=Object(m.a)(i,2),o=u[0],d=u[1],b=Object(l.g)().id;Object(r.useEffect)((function(){d(!0),function(e){return q.apply(this,arguments)}(+b).then((function(e){c(e),d(!1)}))}),[b]);var j=function(e,t){var a=e.userDatasets[0].columns.filter((function(e){return e.role===t&&!e.removed})).length;return a>0?Object(n.jsxs)(L,{children:[a," ",t.toLowerCase()," column",a>1?"s":""]}):null};return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(C,{loading:o}),!o&&0===a.length&&Object(n.jsx)(E,{title:"No dataset loaded",message:"Upload a CSV file or connect with a database.",className:"mx-4"}),!o&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(I,{title:e.name,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsx)(L,{children:"CSV"}),j(e,$.a.MEASURE),j(e,$.a.DIMENSION),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(p.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(p.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)(s.b,{to:"/dashboard/view/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(w.a,{icon:"eye"}),"View"]}),Object(n.jsxs)(s.b,{to:"/dashboard/".concat(e.id,"/edit"),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(w.a,{icon:"pencil-alt"}),"Edit"]})]})]})},e.id)}))]})}function Fe(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),l=Object(m.a)(i,2),u=l[0],o=l[1],d=function(){o(!0),function(){return P.apply(this,arguments)}().then((function(e){c(e),o(!1)}))};Object(r.useEffect)((function(){d()}),[]);var b=function(e,t){var a=e.columns.filter((function(e){return e.role===t})).length;return a>0?Object(n.jsxs)(L,{children:[a," ",t.toLowerCase()," column",a>1?"s":""]}):null};return Object(n.jsxs)("div",{className:"relative flex flex-wrap -mx-4 min-h",children:[Object(n.jsx)(C,{loading:u}),!u&&0===a.length&&Object(n.jsx)(E,{title:"No dataset loaded",message:"Upload a CSV file or connect with a database.",className:"mx-4"}),!u&&a.length>0&&a.map((function(e){return Object(n.jsx)("div",{className:"w-1/3 px-4 mb-4",children:Object(n.jsxs)(I,{title:e.originalname,children:[Object(n.jsxs)("div",{className:"flex flex-col items-start",children:[Object(n.jsx)(L,{children:"CSV"}),b(e,$.a.MEASURE),b(e,$.a.DIMENSION),Object(n.jsxs)("span",{className:"text-gray-600 text-xs mb-2",children:["Updated ",Object(p.a)(new Date(e.updatedDate),new Date),Object(n.jsx)("br",{}),"Created ",Object(p.a)(new Date(e.createdDate),new Date)]})]}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsxs)(s.b,{to:"/dashboard/add/".concat(e.id),className:"button button-primary button-small mr-2",children:[Object(n.jsx)(w.a,{icon:"pencil-alt",className:"mr-1"}),"Create new dashboard"]})})]})},e.id)}))]})}function Ve(){var e=Object(l.g)().id,t=Object(r.useContext)(F);return Object(r.useEffect)((function(){x(+e).then((function(a){t.signIn(e,a.disability)}))}),[e]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(s.b,{to:"/dataset/add",className:"button button-primary",children:"Add new dataset"})}),Object(n.jsx)("div",{className:"text-lg mt-3",children:"My dashboards"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(Te,{})}),Object(n.jsx)("div",{className:"text-lg",children:"Public datasets"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"mt-5",children:Object(n.jsx)(Fe,{})})]})}function Be(){var e=Object(r.useContext)(F).user,t=Object(r.useState)(!1),a=Object(m.a)(t,2),c=a[0],i=a[1],s=Object(l.f)(),u=function(){var t=Object(j.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.persist(),!a.target.files){t.next=13;break}return t.prev=2,i(!0),t.next=6,G(e,a.target.files[0]);case 6:n=t.sent,s.push("/dashboard/add/".concat(n.id)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"relative",children:Object(n.jsxs)(I,{className:"min-h",children:[Object(n.jsx)(C,{loading:c}),!c&&Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",children:"Upload a file:"}),Object(n.jsxs)("div",{className:"mt-2",children:[Object(n.jsx)("label",{htmlFor:"file",className:"button",children:"Select a file"}),Object(n.jsx)("input",{type:"file",className:"hide",name:"file",id:"file",onChange:u})]})]})]})})}var Re=Object(l.h)((function(){var e=Object(l.f)(),t=Object(r.useContext)(F),a=t.user,c=t.signOut;return Object(n.jsxs)("header",{className:"bg-yellow-500 p-3 text-white text-lg font-bold flex justify-between",children:[Object(n.jsx)(s.b,{to:"/",children:"Juno"}),a&&Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{type:"button",onClick:function(){return e.replace("/preferences")},className:"mr-4",children:"Preferences"}),Object(n.jsx)("button",{type:"button",onClick:function(){c(),e.replace("/")},children:"Sair"})]})]})}));function Ue(e){var t=e.name,a=e.label,r=e.disabled,c=e.formik,i=e.checked;return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(n.jsx)("input",Object(R.a)({id:t,type:"checkbox",checked:i,className:"rounded bg-gray-200 border-transparent focus:border-transparent focus:bg-gray-200 text-gray-700 focus:ring-1 focus:ring-offset-2 focus:ring-gray-500",disabled:r},c.getFieldProps(t)))]})}for(var Pe=["NUMBER","STRING","DATE"],ze=[],Ge=0,_e=Pe;Ge<_e.length;Ge++){var qe,He=_e[Ge],Ye=Object(ae.a)(Pe);try{for(Ye.s();!(qe=Ye.n()).done;){var We=qe.value;He!==We&&ze.push({typeX:He,typeY:We,chart:"AUTO"})}}catch(Je){Ye.e(Je)}finally{Ye.f()}}function Xe(){var e=Object(r.useContext)(F).user,t=Object(l.f)(),a=Ie([{type:"LOW",label:"Low"},{type:"MEDIUM",label:"Medium"},{type:"HIGH",label:"High"}],"LOW"),c=Object(m.a)(a,3),i=c[0],s=c[1],u=c[2],o=Ie([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),d=Object(m.a)(o,3),b=d[0],j=d[1],p=d[2],f=Ie([{type:"false",label:"No"},{type:"true",label:"Yes"}],"false"),h=Object(m.a)(f,3),O=h[0],v=h[1],g=h[2],y=Object(U.c)({initialValues:{stacked:!0,multiline:!0,rightAxis:!0,binValues:50,clampStrings:30,chartTypes:ze},onSubmit:function(t){(function(e,t){return N.apply(this,arguments)})(+e,Object(R.a)(Object(R.a)({},t),{},{disability:["true"===b&&"colorBlind","true"===O&&"dyslexic"].filter(Boolean).join(", "),visLiteracy:i})).then((function(){w()}))}});Object(r.useEffect)((function(){x(+e).then((function(e){if(u(e.visLiteracy),p(e.disability.includes("colorBlind")?"true":"false"),g(e.disability.includes("dyslexic")?"true":"false"),e.preferences){y.setFieldValue("stacked",e.preferences.stacked),y.setFieldValue("multiline",e.preferences.multiline),y.setFieldValue("rightAxis",e.preferences.rightAxis),y.setFieldValue("binValues",e.preferences.binValues),y.setFieldValue("clampStrings",e.preferences.clampStrings);var t,a=Object(ae.a)(Pe);try{var n=function(){var a,n=t.value,r=Object(ae.a)(Pe);try{var c=function(){var t=a.value;if(n!==t){var r=e.preferences.chartTypes.findIndex((function(e){return e.typeX===n&&e.typeY===t}));y.setFieldValue("chartTypes.".concat(r,".chart"),e.preferences.chartTypes[r].chart)}};for(r.s();!(a=r.n()).done;)c()}catch(Je){r.e(Je)}finally{r.f()}};for(a.s();!(t=a.n()).done;)n()}catch(Je){a.e(Je)}finally{a.f()}}}))}),[e]);var w=function(){t.replace("/")};return Object(n.jsx)(I,{title:"Preferences",children:Object(n.jsxs)("form",{className:"w-full",onSubmit:y.handleSubmit,children:[Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Color blind"}),Object(n.jsx)(j,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Disability - Dyslexic"}),Object(n.jsx)(v,{})]})}),Object(n.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(n.jsxs)("div",{className:"w-full px-3",children:[Object(n.jsx)("label",{className:"label",children:"Vis Literacy"}),Object(n.jsx)(s,{})]})}),Object(n.jsx)("div",{className:"font-bold",children:"Based on chart types:"}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Ue,{checked:y.values.stacked,name:"stacked",label:"Stacked bars when possible",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Ue,{checked:y.values.multiline,name:"multiline",label:"Multiline charts",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(Ue,{checked:y.values.rightAxis,name:"rightAxis",label:"Line charts with right axis",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(K,{name:"binValues",label:"Bin quantitative columns higher than",formik:y}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)(K,{name:"clampStrings",label:"Clamp string columns with more distinct values than",formik:y}),Object(n.jsx)("div",{className:"font-bold",children:"Based on chart types:"}),Object(n.jsx)("hr",{className:"my-2"}),ze.map((function(e,t){return Object(n.jsxs)("div",{className:"flex -mx-4 mb-3",children:[Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(K,{name:"chartTypes.".concat(t,".typeX"),label:"Type X",disabled:!0,formik:y})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(K,{name:"chartTypes.".concat(t,".typeY"),label:"Type Y",disabled:!0,formik:y})}),Object(n.jsx)("div",{className:"px-4 w-1/3",children:Object(n.jsx)(Q,{name:"chartTypes.".concat(t,".chart"),label:"Chart Type",options:[{value:"AUTO",label:"Auto"},{value:"LINE",label:"Line"},{value:"BAR",label:"Bar"}],formik:y})})]},t)})),Object(n.jsxs)("div",{className:"flex justify-end",children:[Object(n.jsx)("button",{type:"button",className:"button mr-2",onClick:w,children:"Cancel"}),Object(n.jsx)("button",{type:"submit",className:"button button-primary",children:"Submit"})]})]})})}u.b.add(o.a);var Ze=function(){var e=Object(r.useContext)(F).disability;return Object(n.jsx)("div",{className:"App ".concat((null===e||void 0===e?void 0:e.includes("dyslexic"))?"dyslexic-font":""),children:Object(n.jsx)(s.a,{children:Object(n.jsx)(l.c,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(Re,{}),Object(n.jsxs)("div",{className:"container mx-auto pt-4 mb-8",children:[Object(n.jsx)(l.a,{exact:!0,path:"/user/add",children:Object(n.jsx)(Le,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/dataset/add",children:Object(n.jsx)(Be,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/add/:id",children:Object(n.jsx)(ee,{action:"add"})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/:id/edit",children:Object(n.jsx)(ee,{action:"edit"})}),Object(n.jsx)(l.a,{exact:!0,path:"/dashboard/view/:id",children:Object(n.jsx)(Ce,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/user/view/:id",children:Object(n.jsx)(Ve,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/preferences",children:Object(n.jsx)(Xe,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(B,{})})]})]})})})})};i.a.render(Object(n.jsx)(r.StrictMode,{children:Object(n.jsx)(V,{children:Object(n.jsx)(Ze,{})})}),document.getElementById("root"))}},[[461,1,2]]]);
//# sourceMappingURL=main.881b7406.chunk.js.map